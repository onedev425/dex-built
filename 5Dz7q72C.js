function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as s,s as d,Y as l,ap as re,cA as oe,a9 as ce,ag as me,z as f,cB as ue,ab as W,k as j,aq as ge,ar as ve,bB as de,t,cm as fe,cl as $,at as be,ak as q,av as he,am as we,j as e,H as Te,q as p,bc as u,T as ye,D as F,cv as pe,__tla as xe}from"./assets/index-CyIKZwcA.js";import{I as _e}from"./CzdZMSiN.js";import{P as Ve}from"./GQQXxAVl.js";import{P as Ee}from"./DJiAHzKX.js";import{T as He}from"./CkVRNEhN.js";import{V as je}from"./DA3rLf5F.js";import{V as r}from"./DlkGqSVu.js";let G,Se=Promise.all([(()=>{try{return xe}catch{}})()]).then(async()=>{(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g=new Error().stack;g&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[g]="f1e27bf7-a1a3-44a4-951e-cc84542d45ca",o._sentryDebugIdIdentifier="sentry-dbid-f1e27bf7-a1a3-44a4-951e-cc84542d45ca")}catch{}})();let S;S=()=>{const[o,g]=s.useState(new d({value:0,decimal:l.ETH})),[b,h]=s.useState(!1),[w,L]=s.useState(r.THOR),T=re(),[{vthorVesting:A,thorVesting:C},x]=oe(),{getWalletAddress:N}=ce(),{setIsConnectModalOpen:J}=me(),i=s.useMemo(()=>N(f.Ethereum),[N]),_=s.useCallback(async a=>{var z,B;if(!i)return ue;const{getWallet:n}=await(await W(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient(),{getProvider:v}=await W(()=>import("./assets/index-CyIKZwcA.js").then(async y=>(await y.__tla,y)).then(y=>y.hk),__vite__mapDeps([1,2])),c=a===r.THOR?"vesting":"vthor_vesting",{abi:P,address:k}=pe[c],D={callProvider:v(f.Ethereum),from:i,funcParams:[i,{}]},[V,E,ae,se,ie,ne]=await((z=n(f.Ethereum))==null?void 0:z.call({...D,abi:P,contractAddress:k,funcName:"vestingSchedule"}))||[],H=await((B=n(f.Ethereum))==null?void 0:B.call({...D,abi:P,contractAddress:k,funcName:"claimableAmount"})),I=new d({value:(V==null?void 0:V.toString())||"0",decimal:l.ETH}).div(10**l.ETH),M=new d({value:(E==null?void 0:E.toString())||"0",decimal:l.ETH}).div(10**l.ETH),Y=new d({value:(H==null?void 0:H.toString())||"0",decimal:l.ETH}).div(10**l.ETH),le=I.gt(0)||M.gt(0)||Y.gt(0);return{totalVestedAmount:I.getValue("string"),totalClaimedAmount:M,startTime:j.unix(ae.toString()).format("YYYY-MM-DD HH:MM:ss"),vestingPeriod:j.duration(se.toString()*1e3).asDays()/365,cliff:j.duration(ie.toString()*1e3).asDays()/30,initialRelease:(ne||"0").toString(),claimableAmount:Y,hasAlloc:le}},[i]),Q=s.useCallback(async({vestingAction:a,amount:n})=>{if(n.lte(0))return;h(!0);const v=ge();try{T(ve({id:v,inChain:f.Ethereum,type:de.ETH_STATUS,label:`${t("txManager.claim")} ${n.toSignificant(8)} ${a}`}));const c=await fe(a===r.THOR?$.VESTING:$.VTHOR_VESTING,"claim",[n.getBaseValue("bigint")]);c&&T(be({id:v,txid:c}))}catch(c){q(c),T(he({id:v,status:"error"})),we(t("notification.submitFail"),t("common.defaultErrMsg"),void 0,c)}finally{h(!1)}},[T]),O=s.useCallback(async()=>{if(!(!i||b)){h(!0);try{const a=await _(r.THOR),n=await _(r.VTHOR);x({type:"setTHORVesting",payload:a}),x({type:"setVTHORVesting",payload:n})}catch(a){q(a.toString())}finally{h(!1)}}},[i,_,b,x]);s.useEffect(()=>{O()},[]);const{vestingPeriod:X,totalClaimedAmount:Z,totalVestedAmount:R,startTime:K,claimableAmount:m,cliff:U}=s.useMemo(()=>w===r.THOR?C:A,[C,A,w]),ee=s.useCallback(a=>{g(a.gt(m)?m:a)},[m]),te=s.useCallback(a=>{g(new d({value:m.mul(a).div(100).getValue("string"),decimal:l.ETH}))},[m]);return e.jsxs(Ve,{header:e.jsx(je,{actionsComponent:i&&e.jsx(Te,{iconName:"refresh",onClick:O,size:18,spin:b}),title:t("views.vesting.vesting")}),title:t("views.vesting.vesting"),children:[e.jsx(p,{className:"self-stretch",children:e.jsx(He,{onChange:a=>L(a),tabs:[{label:t("views.vesting.vestingThor"),value:r.THOR},{label:t("views.vesting.vestingVthor"),value:r.VTHOR}],value:w})}),e.jsxs(p,{col:!0,className:"w-full p-2 pt-0",children:[e.jsx(u,{label:t("views.vesting.totalVested"),value:R}),e.jsx(u,{label:t("views.vesting.totalClaimed"),value:Z.toSignificant(10)}),e.jsx(u,{label:t("views.vesting.vestingStartTime"),value:R==="0"?"N/A":K}),e.jsx(u,{label:t("views.vesting.cliff"),value:t("views.vesting.cliffValue",{cliff:U})}),e.jsx(u,{label:t("views.vesting.vestingPeriod"),value:t("views.vesting.vestingPeriodValue",{vestingPeriod:X})}),e.jsx(u,{label:t("views.vesting.claimableAmount"),value:m.toSignificant(10)}),i&&e.jsxs(e.Fragment,{children:[e.jsxs(p,{alignCenter:!0,row:!0,className:"!mt-6",justify:"between",children:[e.jsx(ye,{className:"pr-4 min-w-fit",children:t("views.vesting.claimAmount")}),e.jsx(_e,{stretch:!0,amountValue:o,border:"rounded",className:"!text-right !text-base",onAmountChange:ee})]}),e.jsx(p,{className:"!mt-4 flex-1",children:e.jsx(Ee,{onSelect:te,options:[25,50,75,100]})})]}),i?e.jsx(F,{stretch:!0,className:"mt-4",loading:b,onClick:()=>Q({vestingAction:w,amount:o}),size:"lg",variant:"fancy",children:t("views.vesting.claim")}):e.jsx(F,{stretch:!0,className:"mt-4",onClick:()=>J(!0),size:"lg",variant:"fancy",children:t("common.connectWallet")})]})]})},G=S});export{Se as __tla,G as default};
