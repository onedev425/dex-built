function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as e,j as a,q as g,w as F,I as Se,t as s,R as f,G as ut,T as C,A as dt,af as q,ap as mt,ag as pt,a9 as ht,bf as ft,z as y,$ as gt,be as xt,ai as yt,s as D,aJ as bt,aq as H,ar as G,ao as W,ab as je,at as Y,ak as _e,av as J,am as Pe,al as ke,bK as X,D as Q,__tla as vt}from"./assets/index-CyIKZwcA.js";import{G as At}from"./Cse5bgR0.js";import{I as Me}from"./nkxDqpDa.js";import{C as Te,__tla as wt}from"./VQNeEiYk.js";import{u as Ct}from"./l25LWlPl.js";import{P as St}from"./GQQXxAVl.js";import{V as jt}from"./DA3rLf5F.js";import{u as _t}from"./C20jg5MW.js";import{g as Pt}from"./DVVdR7oe.js";import{i as kt,g as Ne}from"./DYrZbK8R.js";import{u as Mt,__tla as Tt}from"./BQokClGM.js";import{u as Nt}from"./C2yJ0wdw.js";import{u as Lt}from"./rzhudTEk.js";import{c as Vt}from"./Cm9YPx6u.js";import{L as $}from"./DKb0irD5.js";import{u as Rt}from"./CbB86d3W.js";import{u as qt,__tla as Dt}from"./CJ_Ik3qV.js";import{u as Et}from"./BhLnMwi7.js";import{A as Le,u as Ot}from"./nBoaRR4P.js";import{u as Ut}from"./CWmyRVe8.js";import"./BGeRo-1L.js";import"./CkVRNEhN.js";import"./CzdZMSiN.js";let Ve,It=Promise.all([(()=>{try{return vt}catch{}})(),(()=>{try{return wt}catch{}})(),(()=>{try{return Tt}catch{}})(),(()=>{try{return Dt}catch{}})()]).then(async()=>{(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m=new Error().stack;m&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[m]="cda6f016-5617-4952-90df-7557a198d4dc",r._sentryDebugIdIdentifier="sentry-dbid-cda6f016-5617-4952-90df-7557a198d4dc")}catch{}})();let Z,ee,te;Z=e.memo(({poolAsset:r,runeAsset:m,poolAssetList:b,onAssetAmountChange:S,onRuneAmountChange:j,onPoolChange:N,liquidityType:x,isAssetPending:u,isRunePending:d})=>{const{assetInputProps:k,assets:E}=Ut(b);return a.jsxs(g,{col:!0,className:"relative self-stretch w-full",children:[a.jsx(g,{className:F("absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","p-1 md:p-2 rounded-xl md:rounded-[18px]","border-10 border-solid bg-blue dark:border-dark-border-primary border-light-border-primary","opacity-100 scale-100 transition-all",{"!scale-0 !opacity-0":x!==$.SYMMETRICAL}),children:a.jsx(Se,{className:F("w-7 h-7"),color:"white",name:"plus"})}),a.jsx(g,{className:F("overflow-hidden h-[111px] transition-all",{"!h-[0px]":x===$.RUNE}),children:a.jsx(Le,{...k,assets:E,className:"!mb-1 flex-1",disabled:u,maxButtonLabel:d?s("pendingLiquidity.complete"):"",onAssetChange:N,onValueChange:S,selectedAsset:r,warning:u?s("pendingLiquidity.content",{asset:f.ticker}):""})}),a.jsx(g,{className:F("overflow-hidden h-[111px] transition-all",{"!h-[0px]":x===$.ASSET}),children:a.jsx(Le,{singleAsset:!0,className:"!mb-1 flex-1",disabled:d,maxButtonLabel:u?s("pendingLiquidity.complete"):"",onValueChange:j,selectedAsset:m,warning:d?s("pendingLiquidity.content",{asset:r.asset.ticker}):""})})]})}),ee=({poolAsset:r,runeAsset:m,poolShare:b,assetUSDPrice:S,rate:j})=>a.jsx(ut,{className:"self-stretch !mt-0 !bg-light-gray-light dark:!bg-dark-gray-light !rounded-2xl flex-col",shadow:!1,title:a.jsxs("div",{className:"flex flex-row gap-x-2",children:[a.jsx(Se,{color:"secondary",name:"infoCircle",size:16}),a.jsx(C,{fontWeight:"normal",textStyle:"caption",variant:"primary",children:s("views.addLiquidity.pricesAndPoolShare")})]}),children:a.jsxs(g,{row:!0,className:"w-full",children:[a.jsxs(g,{col:!0,className:"flex-1 gap-2 border-0 border-r border-dotted border-light-typo-gray dark:border-dark-typo-gray",children:[a.jsxs(C,{fontWeight:"semibold",textStyle:"caption",variant:"secondary",children:[r.asset.ticker,` ${s("common.per")} `,m.asset.ticker]}),a.jsx(C,{textStyle:"h4",children:j||"N/A"})]}),a.jsxs(g,{col:!0,className:"flex-1 gap-2 text-center border-0 border-r border-dotted border-light-typo-gray dark:border-dark-typo-gray",children:[a.jsx(C,{fontWeight:"semibold",textStyle:"caption",variant:"secondary",children:s("views.liquidity.assetUSDPrice")}),a.jsx(C,{textStyle:"h4",children:S||"N/A"})]}),a.jsxs(g,{col:!0,className:"flex-1 gap-2 text-right",children:[a.jsx(C,{fontWeight:"semibold",textStyle:"caption",variant:"secondary",children:s("views.addLiquidity.shareOfPool")}),a.jsx(C,{textStyle:"h4",children:b||"N/A"})]})]})}),te=({assets:r,fees:m,totalFee:b,poolShare:S,slippage:j,estimatedTime:N})=>{const x=r.map(d=>({label:`${s("views.liquidity.depositAmount")} ${d.asset.symbol}`,value:a.jsxs(g,{alignCenter:!0,justify:"between",children:[a.jsx(C,{className:"mx-2",fontWeight:"semibold",children:d.value}),a.jsx(dt,{asset:d.asset,size:24})]})})),u=m.map(d=>({label:`${d.chain} ${s("common.fee")}`,value:a.jsx(q,{tooltip:s("views.liquidity.chainFeeTooltip",{chain:d.chain}),value:d.fee})}));return[...x,{label:s("views.wallet.slip"),value:a.jsx(q,{tooltip:s("views.wallet.slippageTooltip"),value:j||"N/A"})},{label:s("views.liquidity.poolShareEstimated"),value:a.jsx(q,{tooltip:s("views.liquidity.poolShareTooltip"),value:S})},...u,{label:s("views.wallet.totalFee"),value:a.jsx(q,{tooltip:s("views.wallet.totalFeeTooltip"),value:b||"N/A"})},{label:s("views.wallet.estimatedTime"),value:a.jsx(q,{tooltip:s("views.wallet.estimatedTimeTooltip"),value:N})}]},Ve=()=>{const r=mt(),[m,b]=e.useState([]),[S,j]=e.useState(""),{setIsConnectModalOpen:N}=pt(),{hasWallet:x,wallet:u,getWallet:d}=ht(),{poolAssets:k}=Lt(),E=Et("pools"),{tokens:Re}=Ot(),O=ft(),qe=_t(),ae=e.useMemo(()=>{var n;const o=[];if(!x)return k;if(k.length===0)return[];for(const l of Object.keys(u)){const c=((n=d(l))==null?void 0:n.balance)||[];if(y.THORChain!==l)for(const h of c)!k.find(P=>P.eqAsset(h))&&h.chain!==y.THORChain&&kt(h,E)&&o.push(h)}return o},[E,d,x,k,u]),se=e.useCallback(async o=>{const n=await Vt()||[],{router:l,halted:c}=n.find(h=>h.chain===o)||{};if(c&&!l)throw new Error("Trading & LP is temporarily halted, please try again later.");j(l||"")},[]),ie=e.useCallback(()=>{if(x){const o=ae.filter(n=>n.ticker!=="RUNE"&&!n.isSynthetic)||[];b(o)}else b([])},[ae,x]);e.useEffect(()=>{ie()},[ie]);const[t,De]=e.useState((m==null?void 0:m[0])??gt.from({chain:y.Bitcoin})),{getMaxBalance:U,isWalletAssetConnected:oe}=Mt(),{isChainPauseLPAction:ne}=xt(),{getChainDepositLPPaused:le}=yt(),re=e.useMemo(()=>ne(t.chain)||le(t.chain),[ne,t.chain,le]),[i,ce]=e.useState(),[p,ue]=e.useState(new D(0)),[Ee,z]=e.useState(!1),[Oe,K]=e.useState(!1),[v,Ue]=e.useState(),[A,Ie]=e.useState(f),{feeInUSD:Fe,inputFee:de,outputFee:We}=Nt({inputAsset:t,outputAsset:f}),I=e.useMemo(()=>!!d(t.chain),[t,d]),L=e.useMemo(()=>I&&!!d(y.THORChain),[I,d]),$e=e.useMemo(()=>t.set((i==null?void 0:i.getValue("string"))||0),[t,i]),{isApproved:me,isLoading:ze}=qt({contract:S,assetValue:$e}),Ke=e.useMemo(()=>[t,f],[t]),{data:_}=bt(Ke),{assetUnitPrice:M,runeUnitPrice:T,assetUSDPrice:B,runeUSDPrice:pe}=e.useMemo(()=>{var l,c;const o=((l=_==null?void 0:_[t.toString()])==null?void 0:l.price_usd)||0,n=((c=_==null?void 0:_[f.toString()])==null?void 0:c.price_usd)||0;return{assetUnitPrice:o,runeUnitPrice:n,assetUSDPrice:i?i.getValue("number")*o:0,runeUSDPrice:p?p.getValue("number")*n:0}},[_,t,i,p]),Be=e.useMemo(()=>i!=null&&i.lte(0)?i.set(0):i?p.div(i):p,[i,p]),he=e.useMemo(()=>u?Ne(t,u):t.set(0),[t,u]);e.useEffect(()=>{se(t.chain)},[se,t.chain]),e.useEffect(()=>{U(i?t.set(i):t).then(o=>Ue(o))},[t,U,i]),e.useEffect(()=>{U(f.set(p)).then(o=>Ie(o))},[U,p]);const fe=e.useMemo(()=>u?Ne(f,u):f.set(0),[u]),He=e.useCallback(o=>{De(o)},[]),ge=e.useCallback(o=>{const n=v&&o.gt(v)?v:t.set(o.getValue("string")),l=n.mul(M).div(T),c=A&&l.gt(A),h=c?A:l;return{assetAmount:c?n.set(h.mul(T).div(M)):n,runeAmount:h}},[M,v,A,t,T]),xe=e.useCallback(o=>{const n=A&&o.gt(A)?A:f.set(o.getValue("string")),l=n.mul(T).div(M),c=v&&l.gt(v),h=c?v:l,P=c?n.set(h.mul(M).div(T)):n;return{assetAmount:h,runeAmount:P}},[M,v,A,T]),Ge=e.useCallback(o=>{const{assetAmount:n,runeAmount:l}=ge(o);ce(new D({value:n.getValue("string"),decimal:n.decimal})),ue(new D({value:l.getValue("string"),decimal:l.decimal}))},[ge]),Ye=e.useCallback(o=>{const{assetAmount:n,runeAmount:l}=xe(o);ce(new D({value:n.getValue("string"),decimal:n.decimal})),ue(new D({value:l.getValue("string"),decimal:l.decimal}))},[xe]),Je=e.useCallback(async()=>{if(z(!1),u){const o=f.set(p.getValue("string")),n=t.set((i==null?void 0:i.getValue("string"))||0),l=H(),c=H();r(G({id:l,label:s("txManager.addAmountAsset",{asset:f.ticker,amount:o.toSignificant(6)}),type:W.TC_LP_ADD,inChain:y.THORChain})),r(G({id:c,label:s("txManager.addAmountAsset",{asset:t.ticker,amount:n.toSignificant(6)}),type:W.TC_LP_ADD,inChain:t.chain}));let h,P;const{thorchain:Ce}=await(await je(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();if(!Ce)throw new Error("SwapKit client not found");try{const w=await Ce.createLiquidity({baseAssetValue:o,assetValue:n});h=await w.runeTx,P=await w.assetTx,h&&r(Y({id:l,txid:h})),P&&r(Y({id:c,txid:P}))}catch(w){_e(w),r(J({id:l,status:"error"})),r(J({id:c,status:"error"})),Pe(s("notification.submitFail"),w==null?void 0:w.toString(),void 0,w)}}},[u,p,t,i,r]),Xe=e.useCallback(async()=>{if(K(!1),oe(t)){const o=H(),n=t.chain===y.Ethereum?W.ETH_APPROVAL:W.AVAX_APPROVAL;r(G({id:o,label:`${s("txManager.approve")} ${t.ticker}`,inChain:t.chain,type:n}));const{thorchain:l}=await(await je(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();if(!l)throw new Error("SwapKit client not found");try{const c=await l.approveAssetValue({assetValue:t});typeof c=="string"&&r(Y({id:o,txid:c}))}catch(c){_e(c),Pe(s("notification.approveFailed"),void 0,void 0,c),r(J({id:o,status:"error"}))}}},[oe,t,r]),Qe=e.useCallback(()=>{if(!L)return ke(s("notification.walletNotFound"),s("notification.connectWallet"));z(!0)},[L]),Ze=e.useCallback(()=>{u?K(!0):ke(s("notification.walletNotFound"),s("notification.connectWallet"))},[u]),et=e.useMemo(()=>[t,f],[t]),tt=e.useMemo(()=>[{asset:f,value:p.toSignificant(6)},{asset:t,value:(i==null?void 0:i.toSignificant(6))||""}],[t,i,p]),ye=e.useMemo(()=>X(y.THORChain),[]),be=e.useMemo(()=>t.isGasAsset?X(t.chain):X(y.THORChain),[t]),V=e.useMemo(()=>re?{valid:!1,msg:s("notification.notAvailableDeposit")}:m.length===0?{valid:!1,msg:s("notification.assetNotFound")}:p.gt(ye)&&(i!=null&&i.gt(be))?{valid:!0}:{valid:!1,msg:s("notification.invalidAmount")},[re,p,i,ye,be,m]),R=e.useMemo(()=>I&&me===!1,[I,me]),ve=e.useMemo(()=>({asset:t,value:i,balance:he,usdPrice:B}),[t,i,he,B]),Ae=e.useMemo(()=>({asset:f,value:p,balance:fe,usdPrice:pe}),[p,fe,pe]),we=Rt(Re),at=e.useMemo(()=>we.filter(o=>m.some(n=>n.toString().toUpperCase()===o.asset.toString().toUpperCase())),[we,m]),st=e.useMemo(()=>`${s("common.create")} ${t.ticker} ${s("common.liquidity")}`,[t]),it=e.useMemo(()=>V.valid?R?s("common.create"):s("common.createLiquidity"):V.msg,[V,R]),ot=e.useMemo(()=>Pt({chain:t.chain,amount:i}),[i,t]),nt=te({assets:tt,poolShare:"100%",slippage:"N/A",estimatedTime:ot,totalFee:Fe,fees:[{chain:t.chain,fee:de.toSignificant()},{chain:y.THORChain,fee:We.toSignificant()}]}),lt=Ct({assetName:t.ticker,assetValue:(i==null?void 0:i.toSignificant(6))||"0",fee:de.toSignificant()}),rt=e.useMemo(()=>L&&!R,[L,R]),ct=e.useMemo(()=>a.jsx(At,{}),[]);return a.jsxs(St,{header:a.jsx(jt,{actionsComponent:ct,title:s("common.createLiquidity")}),title:st,children:[a.jsx(Z,{isAssetPending:!1,isRunePending:!1,liquidityType:$.SYMMETRICAL,onAssetAmountChange:Ge,onPoolChange:He,onRuneAmountChange:Ye,poolAsset:ve,poolAssetList:at,runeAsset:Ae}),a.jsx(ee,{assetUSDPrice:qe(B),poolAsset:ve,poolShare:"100%",rate:Be.toSignificant(6),runeAsset:Ae}),R&&a.jsx(g,{className:"w-full pt-5",children:a.jsx(Q,{stretch:!0,error:O,loading:ze,onClick:Ze,size:"lg",tooltip:O?s("views.liquidity.hardCapReachedTooltip"):void 0,variant:"fancy",children:s("common.approve")})}),rt&&a.jsx(g,{className:"w-full pt-5",children:a.jsx(Q,{stretch:!0,disabled:!V.valid,error:!V.valid||O,onClick:Qe,size:"lg",tooltip:O?s("views.liquidity.hardCapReachedTooltip"):void 0,variant:"fancy",children:it})}),!L&&a.jsx(g,{className:"w-full pt-5",children:a.jsx(Q,{stretch:!0,onClick:()=>N(!0),size:"lg",variant:"fancy",children:s("common.connectWallet")})}),a.jsx(Te,{inputAssets:et,isOpened:Ee,onClose:()=>z(!1),onConfirm:Je,children:a.jsx(Me,{items:nt})}),a.jsx(Te,{inputAssets:[t],isOpened:Oe,onClose:()=>K(!1),onConfirm:Xe,children:a.jsx(Me,{items:lt})})]})}});export{It as __tla,Ve as default};
