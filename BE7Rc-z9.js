function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{cD as F,cR as J,r as l,cS as U,ab as z,t as m,aa as D,j as d,aM as G,q as H,T as Q,L as X,b6 as Y,R as Z,D as V,bP as ee,ak as te,am as ae,I as se,__tla as re}from"./assets/index-CyIKZwcA.js";import{u as C}from"./Dk64sxA0.js";import{a as ne}from"./ChoHBXOg.js";let R,T,P,le=Promise.all([(()=>{try{return re}catch{}})()]).then(async()=>{(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="430b2b32-26cb-4ca1-8eac-eeaa5341a19f",t._sentryDebugIdIdentifier="sentry-dbid-430b2b32-26cb-4ca1-8eac-eeaa5341a19f")}catch{}})();let v,_,x;v=2,P=({pubKey:t}={})=>{const{addMultisigWallet:s}=C(),{control:b,register:i,handleSubmit:c,watch:o,setError:h,clearErrors:n,formState:{errors:p},getValues:E,setValue:j}=F({defaultValues:{name:"",members:[{name:"",pubKey:""},{name:"",pubKey:""}],threshold:2}}),{fields:g,append:I,remove:W}=J({control:b,name:"members"}),K=i("name"),M=i("threshold",{validate:e=>e<=g.length}),[f,$]=l.useState(""),y=l.useCallback(async(e,a)=>{const u=await U.createMultisigWallet(e,a);return $(u||""),u},[]);l.useEffect(()=>{const e=E("members");if(t&&!e[0].pubKey){const a=[...e];a[0].pubKey=t,j("members",a)}},[E,t,j]),l.useEffect(()=>{const e=o(async a=>{var A;const{ThorchainToolbox:u}=await z(()=>import("./assets/index-CyIKZwcA.js").then(async r=>(await r.__tla,r)).then(r=>r.hm),__vite__mapDeps([0,1])),k=await u({}),B=await Promise.all(((A=a.members)==null?void 0:A.map(async r=>{var S;if(!r)return r;if(await k.validateAddress(r.pubKey||"")){const w=await k.getAccount(r.pubKey);return{...r,pubKey:(S=w==null?void 0:w.pubkey)==null?void 0:S.value}}return r}))||[]);await y(B,a.threshold)&&n("signatureValidation")});return()=>e.unsubscribe()},[o,y,h,n]);const q=l.useCallback(async(e,a)=>{const u=f||await y(e.members,e.threshold);if(!u){h("signatureValidation",{type:"custom",message:m("views.multisig.incorrectSignatures")});return}s({name:e.name,members:e.members,threshold:e.threshold,address:u}),a==null||a()},[s,y,h,f]),L=e=>c(a=>q(a,e))(),N=l.useCallback(()=>I({name:"",pubKey:""}),[I]),O=l.useMemo(()=>({name:K,members:g,threshold:M}),[g,K,M]);return{walletAddress:f,errors:p,submit:L,formFields:O,handleSubmit:c,register:i,addMember:N,removeMember:W,isRequiredMember:e=>e<v}},R=()=>{const t=D(({multisig:o})=>o.address),{runeBalance:s}=ne(),{isMultsigActivated:b}=C(),[i,c]=l.useState(!1);return l.useEffect(()=>{t&&(async()=>{const o=await b();c(!o)})()},[t,b,s]),i?d.jsx(G,{content:d.jsxs(H,{col:!0,className:"gap-2",children:[d.jsx(Q,{children:m("views.multisig.notActiveAccount")}),d.jsx(X,{to:Y(Z,t),children:d.jsx(V,{stretch:!0,variant:"secondary",children:`${m("common.send")} RUNE`})})]}),title:m("views.multisig.accountNotAcivated"),type:"warn"}):null},_="thorsafe",x=()=>{const{members:t,threshold:s,address:b,name:i}=D(({multisig:n})=>n),c=i||"wallet",o=!!b,h=l.useCallback(async()=>{try{const n={members:t,threshold:s};await ee(`${_}-${c}.json`,JSON.stringify(n))}catch(n){te(n);const p=n.message||m("views.multisig.exportError");ae(p,void 0,void 0,n)}},[c,t,s]);return{hasWallet:o,handleExport:h}},T=()=>{const{hasWallet:t,handleExport:s}=x();return t?d.jsx(V,{onClick:s,rightIcon:d.jsx(se,{name:"export"}),tooltip:m("views.multisig.exportTooltip"),variant:"tint",children:m("views.multisig.export")}):null}});export{R as I,T as M,le as __tla,P as u};
