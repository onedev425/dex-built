function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{a9 as te,ap as ge,r as t,s as p,ch as Te,t as n,aq as we,ar as be,ao as $,ab as ye,at as Se,ak as X,av as ke,am as Ve,j as e,M as Ke,q as l,bc as E,T as f,br as $e,D as w,ci as G,cj as je,Y as T,ag as Ee,z as _,ck as ve,cl as q,cm as Xe,bi as Ae,w as Ne,bF as Ce,A as Ge,H as qe,a7 as He,L as Y,I as Oe,$ as y,R as Ye,bV as Je,bU as Qe,bg as Ze,__tla as ea}from"./assets/index-CyIKZwcA.js";import{A as Ie}from"./TP_WktaR.js";import{B as aa}from"./BKK9b-JX.js";import{P as sa}from"./DJiAHzKX.js";import{u as ta,__tla as na}from"./CJ_Ik3qV.js";import{u as la}from"./rzhudTEk.js";let _e,ia=Promise.all([(()=>{try{return ea}catch{}})(),(()=>{try{return na}catch{}})()]).then(async()=>{(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[a]="821d8af5-bdfc-4951-9404-4a44f04fd74e",s._sentryDebugIdIdentifier="sentry-dbid-821d8af5-bdfc-4951-9404-4a44f04fd74e")}catch{}})();var r=(s=>(s.DEPOSIT="deposit",s.CLAIM="claim",s.EXIT="exit",s))(r||{});let ne,le,J,ie,Q,re,ce,oe,de,me,v,xe,Z,he,ue;ne={[r.DEPOSIT]:"views.staking.depositAction",[r.CLAIM]:"views.staking.harvestAction",[r.EXIT]:"views.staking.exitAction"},le=({isOpened:s,type:a,contractType:d,lpAsset:c,tokenBalance:u,stakedAmount:h,claimableAmount:g,onConfirm:S,onCancel:b})=>{const{hasWallet:k}=te(),H=ge(),[A,i]=t.useState(new p({value:0,decimal:c.decimal})),{isApproved:P}=ta({assetValue:c.add(A),contract:Te(d).address}),O=n(ne[a]),R=a===r.CLAIM,N=t.useCallback(m=>{a===r.DEPOSIT?i(u.mul(m).div(100)):a===r.CLAIM?i(g.mul(m).div(100)):a===r.EXIT&&i(h.mul(m).div(100))},[a,u,g,h]),B=t.useCallback(m=>{i(new p({value:m,decimal:c.decimal}))},[c.decimal]),M=t.useCallback(m=>{N(m)},[N]),F=t.useCallback(()=>{S(A),b()},[A,b,S]),U=t.useCallback(async()=>{if(k){b();const m=we();H(be({id:m,label:`${n("txManager.approve")} ${c.ticker}`,inChain:c.chain,type:$.ETH_APPROVAL}));const{approveAssetValue:L}=await(await ye(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();try{const C=await L(c,Te(d).address);typeof C=="string"&&H(Se({id:m,txid:C}))}catch(C){X(C),H(ke({id:m,status:"error"})),Ve(n("notification.approveFailed"),void 0,void 0,C)}}},[k,b,H,c,d]);return t.useEffect(()=>{N(100)},[N]),e.jsx(Ke,{isOpened:s,onClose:b,title:O,children:e.jsxs(l,{col:!0,className:"w-full md:w-atuo md:!min-w-[350px]",flex:1,children:[e.jsx(E,{label:n("views.staking.tokenBalance"),value:u.gt(0)?u.toFixed(4):"N/A"}),e.jsx(E,{label:n("views.staking.tokenStaked"),value:h.gt(0)?h.toFixed(4):"N/A"}),e.jsx(E,{label:n("views.staking.claimable"),value:g.gt(0)?g.toFixed(2):"N/A"}),!R&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{alignCenter:!0,className:"gap-3 !mt-8",children:[e.jsx(f,{children:n("views.staking.stakeActionAmount",{stakeAction:O})}),e.jsx($e,{border:"rounded",className:"text-right",onChange:m=>B(m.target.value),value:A.getValue("string")})]}),e.jsx(l,{className:"!mt-4 flex-1",children:e.jsx(sa,{onSelect:M,options:[25,50,75,100]})})]}),e.jsxs(l,{className:"gap-3 !mt-8",children:[a===r.DEPOSIT&&P===!1&&k&&e.jsx(w,{stretch:!0,onClick:U,variant:"fancy",children:n("txManager.approve")}),(P&&a===r.DEPOSIT||a!==r.DEPOSIT)&&e.jsx(w,{stretch:!0,onClick:F,variant:"fancy",children:O})]})]})})},J={[G.THOR]:{tokenAddr:"0xa5f2211B9b8170F694421f2046281775E8468044",stakingAddr:"0x6755630c583f12fFBD10568EB633c0319dB34922"},[G.THOR_ETH]:{tokenAddr:"0x3D3F13F2529eC3C84B2940155EffBf9b39a8f3Ec",stakingAddr:"0xae1Fc3947Ee83aeb3b7fEC237BCC1D194C88BC24"}},ie=s=>J[s].tokenAddr.toLowerCase(),Q=async s=>{const{tokenAddr:a,stakingAddr:d}=J[s],c=await(await je(a)).balanceOf(d);return p.fromBigInt(c,T.ETH)},re=()=>{const[s,a]=t.useState(!1),[d,c]=t.useState(null),u=t.useCallback(g=>{c(g),a(!0)},[]),h=t.useCallback(()=>{a(!1),setTimeout(()=>c(null),300)},[]);return{isOpened:s,type:d,open:u,close:h}},ce=({assets:s,contractType:a,exchange:d,farmName:c,lpAsset:u,lpContractType:h,stakeAddr:g,stakingToken:S,withdrawOnly:b})=>{const k=ge(),{setIsConnectModalOpen:H}=Ee(),{getWalletAddress:A}=te(),i=t.useMemo(()=>A(_.Ethereum),[A]),[P,O]=t.useState(!1),[R,N]=t.useState(),[B,M]=t.useState(new p({value:0,decimal:T.ETH})),[F,U]=t.useState(new p({value:0,decimal:T.ETH})),[m,L]=t.useState(new p({value:0,decimal:T.ETH})),[{stakingTokenUrl:C,stakeAddrUrl:Re},Be]=t.useState({stakingTokenUrl:"",stakeAddrUrl:""}),{isOpened:Fe,open:W,close:ee,type:ae}=re(),z=t.useCallback(async()=>{if(O(!0),i){const o=await(await je(S)).balanceOf(i);M(p.fromBigInt(o,T.ETH));try{const x=await ve(a),{amount:j}=await x.userInfo(0,i),D=await x.pendingRewards(0,i);U(p.fromBigInt(BigInt(j||0),T.ETH)),L(p.fromBigInt(BigInt(D||0),T.ETH))}catch(x){X(x.toString())}}O(!1)},[a,i,S]),De=t.useCallback(()=>{i&&z()},[i,z]),se=t.useCallback((o,x)=>x===0?Number.MAX_SAFE_INTEGER:o*aa/x*100,[]),fe=t.useCallback(async()=>{const o=await(await ve(a)).blockReward();return p.fromBigInt(o,T.ETH)},[a]),pe=t.useCallback(async()=>{try{const o=await fe();if(a===q.STAKING_THOR){const x=await Q(h),j=se(o.getValue("number"),x.getValue("number"));N(j)}else{const{data:{pair:x}}=await fetch("https://api.thegraph.com/subgraphs/name/sushiswap/exchange",{method:"POST",body:JSON.stringify({query:`{
                pair(id: "${ie(h)}") {
                  reserve0
                  reserve1
                  reserveUSD
                  totalSupply
                }
              }`,variables:null})}).then(ze=>ze.json()),j=Number.parseFloat(x.reserveUSD),D=Number.parseFloat(x.totalSupply),I=j/D,Me=Number.parseFloat(x.reserve0),Ue=j/2/Me,Le=await Q(h),We=se(o.getValue("number")*Ue,Le.getValue("number")*I);N(We)}}catch(o){X(o.toString())}},[fe,a,h,se]),[V,K]=t.useMemo(()=>{switch(ae){case r.DEPOSIT:return["deposit",$.ETH_STATUS];case r.EXIT:return["withdraw",$.ETH_STATUS];case r.CLAIM:return["harvest",$.ETH_STATUS];default:return[]}},[ae]),Pe=t.useCallback(async o=>{if(ee(),!(V&&i&&K))return;const x=we(),j=`${n(`common.${K}`)} ${o.toSignificant(6)} ${u.ticker}`;k(be({id:x,from:i,inChain:_.Ethereum,type:K,label:j}));const D=V==="harvest"?[0,i]:[0,o.getBaseValue("string"),i];try{const I=await Xe(a,V,D);I&&k(Se({id:x,txid:I}))}catch(I){X(I),k(ke({id:x,status:"error"}))}},[ee,V,i,K,u,k,a]);return t.useEffect(()=>{i?z():(U(new p({decimal:T.ETH,value:0})),L(new p({decimal:T.ETH,value:0})),M(new p({decimal:T.ETH,value:0})))},[i,z]),t.useEffect(()=>{pe(),ye(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2])).then(({getSwapKitClient:o})=>o()).then(({getExplorerAddressUrl:o})=>{Be({stakeAddrUrl:o({chain:_.Ethereum,address:g})||"",stakingTokenUrl:o({chain:_.Ethereum,address:S})||""})})},[pe,g,S]),e.jsxs(l,{col:!0,className:"flex-1 !min-w-[360px] lg:!max-w-[50%]",children:[e.jsx(l,{className:"relative w-full mt-14",children:e.jsxs(Ae,{className:Ne("flex-col w-full",Ce),children:[e.jsx("div",{className:"flex justify-center absolute m-auto left-0 right-0 top-[-28px]",children:s.length>1?e.jsx(Ie,{hasShadow:!0,inline:!0,asset1:s[0],asset2:s[1],size:"big"}):e.jsx(Ge,{hasShadow:!0,asset:s[0],hasChainIcon:!1,shadowPosition:"center",size:"big"})}),e.jsxs(l,{alignCenter:!0,row:!0,className:"mt-8",justify:"between",children:[e.jsx(l,{flex:1}),e.jsx(f,{className:"mr-2",textStyle:"h4",children:c}),e.jsx(l,{flex:1,justify:"end",children:i&&e.jsx(qe,{color:"cyan",iconName:"refresh",onClick:De,spin:P})})]}),e.jsxs(l,{className:"flex-row justify-between",children:[e.jsxs(l,{col:!0,className:"p-4",children:[e.jsx(f,{fontWeight:"bold",textStyle:"caption-xs",textTransform:"uppercase",variant:"secondary",children:n("common.exchange")}),e.jsx(f,{fontWeight:"bold",textStyle:"body",variant:"primary",children:d})]}),e.jsxs(l,{col:!0,className:"p-4",children:[e.jsx(f,{className:"text-right",fontWeight:"bold",textStyle:"caption-xs",variant:"secondary",children:n("common.APR")}),e.jsxs(f,{className:"text-right",fontWeight:"bold",textStyle:"body",variant:"green",children:[(R==null?void 0:R.toFixed(2))||"-","%"]})]})]}),e.jsxs(l,{className:"flex-col px-4",children:[e.jsx(E,{label:n("views.staking.stakingToken"),size:"md",value:e.jsxs(l,{alignCenter:!0,row:!0,className:"space-x-1",children:[e.jsx(f,{className:"overflow-hidden text-ellipsis whitespace-nowrap",fontWeight:"bold",textStyle:"caption-xs",variant:"primary",children:He(S)}),e.jsx(Y,{external:!0,to:C,children:e.jsx(Oe,{color:"cyan",name:"share",size:16})})]})}),e.jsx(E,{label:n("views.staking.stakingContract"),size:"md",value:e.jsxs(l,{alignCenter:!0,row:!0,className:"space-x-1",children:[e.jsx(f,{className:"overflow-hidden text-ellipsis whitespace-nowrap",fontWeight:"bold",textStyle:"caption-xs",variant:"primary",children:He(g)}),e.jsx(Y,{external:!0,to:Re,children:e.jsx(Oe,{color:"cyan",name:"share",size:16})})]})}),e.jsx(E,{label:n("views.staking.tokenBalance"),size:"md",value:i&&B.gt(0)?B.toSignificant(4):"N/A"}),e.jsx(E,{label:n("views.staking.tokenStaked"),size:"md",value:i&&F.gt(0)?F.toSignificant(4):"N/A"}),e.jsx(E,{label:n("views.staking.claimable"),size:"md",value:i&&m.gt(0)?m.toSignificant(4):"N/A"})]}),e.jsx(l,{alignCenter:!0,className:"w-full gap-2 mt-4",children:i?e.jsxs(e.Fragment,{children:[b?e.jsx(w,{className:"flex-1",onClick:()=>W(r.EXIT),variant:"fancy",children:b?n("common.withdraw"):n("common.deposit")}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"flex-1",onClick:()=>W(r.DEPOSIT),variant:"primary",children:n("common.deposit")}),e.jsx(w,{className:"flex-1",onClick:()=>W(r.EXIT),variant:"primary",children:n("common.withdraw")})]}),e.jsx(w,{className:"flex-1",onClick:()=>W(r.CLAIM),variant:b?"fancy":"tertiary",children:n("common.claim")})]}):e.jsx(w,{stretch:!0,onClick:()=>H(!0),size:"lg",variant:"fancy",children:n("common.connectWallet")})})]})}),e.jsx(le,{claimableAmount:m,contractType:a,isOpened:Fe,lpAsset:u,onCancel:ee,onConfirm:Pe,stakedAmount:F,tokenBalance:B,type:ae||r.CLAIM})]})},oe=6432,de=(s,a)=>a===0?Number.MAX_SAFE_INTEGER:((1+s*oe/a)**365-1)*100,me=()=>{const{pools:s}=la(),a=t.useMemo(()=>{const h=y.fromChainOrSignature("ETH.THOR");return s==null?void 0:s.find(({asset:g})=>h.toString()===g)},[s]),d=t.useMemo(()=>Number.parseFloat((a==null?void 0:a.assetDepth)??"0")*2,[a]),c=t.useMemo(()=>Number(d?de(0,d).toFixed(2):0),[d]),u=Number((a==null?void 0:a.poolAPY)??0)*100;return(c+u).toFixed(2)},v={THOR:"0xa5f2211B9b8170F694421f2046281775E8468044",ETH_THOR:"0x3D3F13F2529eC3C84B2940155EffBf9b39a8f3Ec",THOR_STAKE:"0x6755630c583f12fFBD10568EB633c0319dB34922",SUSHI_STAKE:"0xae1Fc3947Ee83aeb3b7fEC237BCC1D194C88BC24"},xe=[{farmName:"$THOR Staking",assets:[y.fromChainOrSignature("ETH.THOR")],lpAsset:y.fromChainOrSignature("ETH.THOR"),lpToken:v.THOR,contractType:q.STAKING_THOR,lpContractType:G.THOR,stakeAddr:v.THOR_STAKE,exchange:"THORSwap"},{farmName:"ETH-THOR LP",assets:[y.from({chain:_.Ethereum}),y.fromChainOrSignature("ETH.THOR")],lpAsset:y.fromStringSync(`ETH.SLP-${v.ETH_THOR}`),lpToken:v.ETH_THOR,contractType:q.STAKING_SUSHI_WETH,lpContractType:G.THOR_ETH,stakeAddr:v.SUSHI_STAKE,exchange:"SushiSwap"}],Z={farmName:"RUNE-THOR",assets:[y.fromChainOrSignature("ETH.THOR"),Ye],lpToken:v.THOR,contractType:q.STAKING_THOR,exchange:"THORSwap"},he=()=>{const{setIsConnectModalOpen:s}=Ee(),{getWalletAddress:a}=te(),d=t.useMemo(()=>a(_.Ethereum),[a]),c=Je(y.fromChainOrSignature("ETH.THOR")),u=me(),h=Qe(y.fromChainOrSignature("ETH.THOR"));return e.jsx(l,{col:!0,className:"flex-1 !min-w-[360px] lg:!max-w-[50%]",children:e.jsx(l,{className:"w-full h-full min-h-[436px] relative mt-14",children:e.jsxs(Ae,{className:Ne("flex-col flex-1",Ce),children:[e.jsx("div",{className:"flex justify-center absolute m-auto left-0 right-0 top-[-28px]",children:e.jsx(Ie,{hasShadow:!0,inline:!0,asset1:Z.assets[0],asset2:Z.assets[1],size:"big"})}),e.jsx(l,{center:!0,className:"mt-8",children:e.jsx(f,{className:"mr-2",textStyle:"h4",children:"THOR-RUNE LP"})}),e.jsxs(l,{className:"flex-row justify-between",children:[e.jsxs(l,{col:!0,className:"p-4",children:[e.jsx(f,{fontWeight:"bold",textStyle:"caption-xs",textTransform:"uppercase",variant:"secondary",children:n("common.exchange")}),e.jsx(f,{fontWeight:"bold",textStyle:"body",variant:"primary",children:n("common.THORSwap")})]}),e.jsxs(l,{col:!0,className:"p-4",children:[e.jsx(f,{className:"text-right",fontWeight:"bold",textStyle:"caption-xs",variant:"secondary",children:n("common.APR")}),e.jsxs(f,{className:"text-right",fontWeight:"bold",textStyle:"body",variant:"green",children:[u,"%"]})]})]}),e.jsx(l,{className:"flex-col px-4",children:e.jsx(f,{children:n("views.staking.tcStakingDesc")})}),e.jsx(l,{alignCenter:!0,className:"flex-col-reverse flex-grow w-full mt-4",children:d?e.jsxs(l,{alignCenter:!0,row:!0,className:"self-stretch gap-2",children:[e.jsx(Y,{className:"flex-1",to:h,children:e.jsx(w,{stretch:!0,variant:"primary",children:n("common.deposit")})}),e.jsx(Y,{className:"flex-1",to:c,children:e.jsx(w,{stretch:!0,variant:"secondary",children:n("common.withdraw")})})]}):e.jsx(w,{stretch:!0,onClick:()=>s(!0),size:"lg",variant:"fancy",children:n("common.connectWallet")})})]})})})},ue=()=>e.jsxs("div",{className:"container mx-auto",children:[e.jsx(Ze,{content:n("common.staking"),title:n("common.staking")}),e.jsxs(l,{className:"gap-2.5 flex-wrap justify-center",children:[xe.map(({lpToken:s,lpAsset:a,...d})=>s&&a&&t.createElement(ce,{...d,key:s,lpAsset:a,stakingToken:s})),e.jsx(he,{})]})]}),_e=ue});export{ia as __tla,_e as default};
