function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as s,j as e,q as l,w as H,A as J,T as v,t as r,b9 as tt,p as Z,F as T,ba as st,bb as at,I as P,bc as nt,a4 as it,aJ as ae,bd as E,af as U,aI as X,E as ve,D as V,a9 as G,ag as we,be as ye,s as A,aw as Ce,Y as Se,$ as rt,ap as lt,bf as ot,aL as ct,h as dt,ab as ut,aq as mt,ar as pt,ao as ke,at as ht,ak as xt,av as gt,bg as bt,L as ft,bh as jt,bi as vt,__tla as wt}from"./assets/index-CyIKZwcA.js";import{a as yt,A as Ct}from"./nBoaRR4P.js";import{I as Ae}from"./nkxDqpDa.js";import{P as St}from"./xyTk0RBf.js";import{T as kt}from"./CkVRNEhN.js";import{u as At}from"./C20jg5MW.js";import{u as Nt}from"./BlqyVemR.js";import{u as _t,__tla as It}from"./BQokClGM.js";import{g as Ne,u as $t,a as Tt,T as Bt,b as Et,c as _e,d as Dt,e as Ie,__tla as Mt}from"./DaRmYrn3.js";import{C as Pt,__tla as Wt}from"./VQNeEiYk.js";import{S as $e,C as Ft,s as Rt}from"./G016iS_E.js";import{D as Vt,S as Ot,a as Lt,b as zt,c as qt,d as Ht,e as Ut,f as Gt,g as Qt}from"./mMiU1HvE.js";import{R as Yt}from"./DG2H1jGl.js";import{u as Te}from"./rzhudTEk.js";import{u as Kt}from"./C2yJ0wdw.js";import{g as Jt,a as Zt,b as Xt}from"./Cm9YPx6u.js";import{A as es}from"./CBlIVkVu.js";import{u as ts,__tla as ss}from"./CJ_Ik3qV.js";import"./BGeRo-1L.js";import"./CzdZMSiN.js";import"./DYrZbK8R.js";import"./l25LWlPl.js";let Be,as=Promise.all([(()=>{try{return wt}catch{}})(),(()=>{try{return It}catch{}})(),(()=>{try{return Mt}catch{}})(),(()=>{try{return Wt}catch{}})(),(()=>{try{return ss}catch{}})()]).then(async()=>{(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[t]="44bacb75-a437-424d-973e-5c40a02f117a",a._sentryDebugIdIdentifier="sentry-dbid-44bacb75-a437-424d-973e-5c40a02f117a")}catch{}})();const Ee=s.memo(({asset:a,logoURI:t,select:m,apr:u,filled:o,isSelected:c,balance:g})=>e.jsx(l,{alignCenter:!0,className:H("dark:bg-dark-dark-gray bg-btn-light-tint z-0 lig rounded-3xl p-2 hover:duration-150 transition cursor-pointer  dark:hover:bg-dark-border-primary hover:bg-btn-light-tint-active border border-transparent",{"brightness-90 dark:brightness-110 dark:!bg-dark-border-primary !bg-btn-light-tint-active border-btn-primary":c}),onClick:()=>m(a),children:e.jsxs(l,{className:"gap-x-3 pl-2",flex:1,children:[e.jsx(l,{center:!0,className:"gap-x-2",children:e.jsx(J,{asset:a,logoURI:t,size:34})}),e.jsxs(l,{col:!0,flex:1,children:[e.jsx(l,{alignCenter:!0,justify:"between",children:e.jsx(v,{fontWeight:"medium",textStyle:"body",children:a==null?void 0:a.ticker})}),e.jsx(l,{row:!0,className:"gap-x-2 justify-between pr-2",children:e.jsxs(l,{center:!0,className:"gap-1",children:[e.jsx(v,{fontWeight:"light",textStyle:"caption",textTransform:"uppercase",variant:"secondary",children:r("common.APR")}),typeof u<"u"?e.jsx(v,{textStyle:"caption",variant:"primaryBtn",children:u||"N/A"}):e.jsx(tt,{size:"xs"})]})})]}),e.jsxs(l,{center:!0,className:"gap-2",children:[!!g&&e.jsx(v,{fontWeight:"medium",textStyle:"caption-xs",variant:"secondary",children:g.toSignificant(6)}),typeof o<"u"&&e.jsx(Z,{content:`${r("common.filled")}: ${Ne(o)||"N/A"}`,children:e.jsxs(T,{position:"relative",children:[e.jsx(st,{color:"brand.btnPrimary",size:"35px",trackColor:"borderPrimary",value:o}),e.jsx(T,{alignItems:"center",bottom:0,justifyContent:"center",left:0,position:"absolute",right:0,top:0,children:e.jsxs(v,{className:H("text-[10px]",{"text-[9px]":o>=100}),fontWeight:"semibold",textStyle:"caption-xs",variant:"secondary",children:[Math.floor(o),"%"]})})]})})]})]})})),ne=({assets:a,onSelect:t,onClose:m,isLoading:u,setQuery:o,selectedAsset:c})=>{const{filteredAssets:g,select:j}=yt({assets:a,onSelect:t,onClose:m}),w=s.useCallback(b=>{j(b),setTimeout(()=>o==null?void 0:o(""),500)},[j,o]);return e.jsxs(l,{col:!0,className:H("rounded-box-lg justify-center items-start w-2/5 py-5 px-6",at.secondary),flex:1,children:[e.jsx(l,{className:"w-full -mt-2 mb-2 pr-3.5",flex:1,justify:"end",children:e.jsx(Z,{content:r("views.savings.aprTooltip"),place:"bottom",children:e.jsx(P,{className:"ml-1",color:"primaryBtn",name:"infoCircle",size:24})})}),g.length?e.jsx(l,{className:"!overflow-x-clip flex-col overflow-y-auto gap-1.5 w-full h-full",children:g.map(b=>s.createElement(Ee,{...b,isSelected:c==null?void 0:c.eqAsset(b.asset),key:b.asset.toString(),select:w}))}):e.jsx(l,{justifyCenter:!0,className:"pt-4",flex:1,children:u?e.jsx(P,{spin:!0,name:"loader",size:24}):e.jsx(v,{children:r("components.assetSelect.noResultsFound")})})]})},De=({isOpened:a,onClose:t,onConfirm:m,asset:u,amount:o,tabLabel:c,outboundDelay:g,expectedAmountOut:j,slippage:w,expectedOutputAmount:b,networkFee:y,outboundFee:C,timeToBreakEvenInfo:n})=>{const[N,d]=s.useState(!1),i=s.useMemo(()=>{if(!g)return;const h=Math.floor(g/60),f=Math.floor(h/60),S=f>0?`${f}h `:"",k=h>0?`${h%60}m `:"",D=g%60>0?` ${g%60}s`:"";return`${S}${k}${D}`},[g]),p=[{label:r("common.action"),value:c},{label:r("common.asset"),value:`${u.ticker}`,icon:u},{label:r("views.wallet.estimatedTime"),value:i||"N/A"},{label:r("views.wallet.networkFee"),value:`${y.toSignificant(6)} ${y.ticker}`},{label:`${r("common.outbound")} ${r("common.fee")}`,value:`${C.toSignificant(6)} ${u.ticker}`},{label:r("common.totalFees"),value:`${(w==null?void 0:w.toSignificant(6))||0} ${u.ticker}`},{label:c,value:b?`${b.toSignificant(6)} ${u.ticker}`:y.gte(o)?r("views.savings.notEnoughForOutboundFee"):e.jsx(P,{spin:!0,color:"primary",name:"loader",size:24})},{label:r("views.savings.timeToBrakeEven"),value:n}];return e.jsxs(Pt,{buttonDisabled:!(Number.parseInt(j||"0")&&N),inputAssets:[u],isOpened:a,onClose:t,onConfirm:()=>m((b==null?void 0:b.toSignificant(6))||"0"),children:[e.jsx(l,{col:!0,className:"mb-5",children:p.map(({label:h,value:f,icon:S})=>e.jsx(nt,{label:h,value:e.jsxs(l,{center:!0,className:"gap-1",children:[e.jsx(v,{textStyle:"caption",children:f}),S&&e.jsx(J,{asset:S,size:22})]})},h))}),e.jsx(it,{className:"py-1",label:e.jsx(l,{alignCenter:!0,children:e.jsx(v,{children:r("views.savings.highOutboundFee")})}),onValueChange:d,value:N})]})},ie=[Ot,Lt,zt,qt,Ht,Ut,Gt,Qt],Me=({data:a,unit:t="$",chartIndexes:m,selectChart:u,selectedIndex:o,title:c})=>{const g=s.useRef(null),[j,w]=s.useState(null),b=s.useMemo(()=>a.map(({asset:i})=>i),[a]),{data:y}=ae(b),C=o===$e.Earned,n=s.useCallback(i=>{var h,f,S,k;const p=i===null?[]:[{datasetIndex:0,index:i}];(f=(h=g.current)==null?void 0:h.tooltip)==null||f.setActiveElements(p,{x:0,y:0}),(S=g.current)==null||S.setActiveElements(p),(k=g.current)==null||k.update()},[]),N=s.useMemo(()=>({cutout:"70%",padding:0,responsive:!0,plugins:{legend:{display:!1},tooltip:{displayColors:!1,backgroundColor:"rgba(0, 0, 0, 0.9)",bodyFont:{size:12},cornerRadius:16,padding:14,titleFont:{size:14},titleSpacing:8,callbacks:{label:i=>`${i.formattedValue} ${t}`}}},onHover:(i,p)=>{var h,f;((h=p[0])==null?void 0:h.index)!==j&&w((f=p[0])==null?void 0:f.index)}}),[j,t]),d=s.useMemo(()=>{const i=a.map(({asset:p,amount:h,earnedAmount:f})=>{var k;const S=C?(f==null?void 0:f.getValue("number"))||0:h.getValue("number");return(((k=y[p.toString()])==null?void 0:k.price_usd)||0)*S});return{labels:a.map(p=>p.asset.ticker),datasets:[{label:C?"Earned":"Total",data:i,backgroundColor:ie.map(p=>`${p}50`),borderColor:ie,borderWidth:1}]}},[a,C,y]);return e.jsxs(T,{direction:"column",p:2,w:"full",children:[e.jsxs(T,{justify:"space-between",pb:4,children:[e.jsx(v,{textStyle:"subtitle2",children:c}),e.jsx(Ft,{chartTypeIndexes:m,selectChartTypeIndex:u,selectedChartTypeIndex:o})]}),e.jsxs(T,{align:"center",justify:"space-between",children:[e.jsx(T,{height:150,width:40,children:e.jsx(Vt,{data:d,id:"myChart",options:N,ref:g})}),e.jsx(T,{direction:"column",gap:1,h:"full",pl:2,w:"full",children:a.map((i,p)=>{var S;const h=C?i.earnedAmount:i.amount,f=j===p;return e.jsxs(T,{_dark:{bgColor:f?E.gray:E.bgDarkGray,_hover:{bgColor:E.gray}},_hover:{border:`1px solid ${E.btnPrimary}`,bgColor:E.bgBtnLightTintActive},align:"center",bgColor:f?E.bgBtnLightTintActive:E.bgLightGray,border:f?`1px solid ${E.btnPrimary}`:"1px solid transparent",borderRadius:"3xl",display:"flex",gap:2,justify:"space-between",onMouseEnter:()=>n(a.indexOf(i)),onMouseLeave:()=>n(null),p:1,pl:3,children:[e.jsxs(T,{gap:1,children:[e.jsx(v,{children:h==null?void 0:h.toSignificant(6)}),e.jsx(v,{children:i.asset.ticker})]}),e.jsx(J,{asset:i.asset,size:28})]},`${i.amount.getValue("string")}-${(S=i.earnedAmount)==null?void 0:S.getValue("string")}`)})})]})]})},Pe=({assetPriceUSD:a,position:t,withdraw:m,deposit:u})=>{var g;const o=s.useCallback(j=>`$${(a*j.getValue("number")).toFixed(2)}`,[a]),c=s.useMemo(()=>{var j,w;return[{label:"Amount Deposited",value:e.jsx(U,{icon:"usdCircle",tooltip:o(t.depositAmount),value:`${t.depositAmount.toSignificant(6)} ${t.asset.ticker}`})},{label:"Amount Redeemable",value:e.jsx(U,{icon:"usdCircle",tooltip:o(t.amount),value:`${(j=t==null?void 0:t.amount)==null?void 0:j.toSignificant(6)} ${t.asset.ticker}`})},{label:"Total Earned",value:e.jsx(U,{icon:"usdCircle",tooltip:o(t.earnedAmount||X),value:`${(w=t==null?void 0:t.earnedAmount)==null?void 0:w.toSignificant(6)} ${t.asset.ticker}`})}]},[o,t]);return e.jsx(l,{col:!0,justifyCenter:!0,className:"self-stretch",children:e.jsxs(ve,{className:"!rounded-2xl pt-2 !pb-0 !gap-0",type:"primary",children:[e.jsx(l,{alignCenter:!0,className:"cursor-pointer",justify:"between",children:e.jsxs(l,{alignCenter:!0,flex:1,justify:"between",children:[e.jsxs(l,{center:!0,children:[e.jsx(l,{col:!0,children:e.jsx(J,{asset:t.asset,size:32})}),e.jsx(v,{className:H("mx-1 md:mx-3 !transition-all"),fontWeight:"semibold",children:t.asset.ticker})]}),e.jsxs(T,{children:[e.jsxs(v,{fontWeight:"bold",children:[(g=t.amount)==null?void 0:g.toSignificant(6)," ",t.asset.ticker]}),e.jsx(v,{children:"\xA0"}),e.jsx(v,{fontWeight:"light",children:`(${o(t.amount)})`})]})]})}),e.jsxs(l,{className:"gap-2",children:[e.jsx(Ae,{horizontalInset:!0,className:"my-3",items:c,size:"sm"}),e.jsxs(l,{col:!0,justifyCenter:!0,className:"gap-1",children:[e.jsx(V,{stretch:!0,className:"!h-[32px]",onClick:()=>u(t.asset),variant:"primary",children:r("views.liquidity.addButton")}),e.jsx(V,{stretch:!0,className:"md:min-w-[100px] !h-[32px]",onClick:()=>m(t.asset),variant:"outlineSecondary",children:r("common.withdraw")})]})]})]})},t.asset.toString())},We=({positions:a,refresh:t,withdrawAsset:m,depositAsset:u})=>{const[o,c]=s.useState(!1),[g,j]=s.useState($e.Earned),{isWalletLoading:w}=G(),b=s.useCallback(()=>{c(!0),t(),setTimeout(()=>c(!1),500)},[t]),{data:y}=ae(a.map(C=>C.asset));return e.jsx(l,{center:!0,col:!0,className:"w-full",children:e.jsxs(l,{col:!0,className:"max-w-[480px] w-full gap-1",children:[!!a.length&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{className:"gap-x-2 mb-1 w-full",justify:"between",children:[e.jsx(l,{}),e.jsx(Yt,{loading:o,onLoad:b,size:16})]}),e.jsx(ve,{children:e.jsx(Me,{chartIndexes:Rt,data:a,selectChart:j,selectedIndex:g,title:"Earn positions"})})]}),a.length?a.map(C=>{var n;return e.jsx(Pe,{assetPriceUSD:((n=y==null?void 0:y[C.asset.toString()])==null?void 0:n.price_usd)||0,deposit:u,position:C,withdraw:m},C.asset.toString())}):e.jsxs(l,{center:!0,className:"gap-2",flex:1,children:[e.jsx(v,{textStyle:"subtitle2",variant:"primary",children:w?r("common.loading"):r("views.wallet.noDataToShow")}),w&&e.jsx(P,{spin:!0,name:"loader",size:32})]})]})})},Fe=({onWithdraw:a,onDeposit:t,positions:m,refreshPositions:u})=>{const{setIsConnectModalOpen:o}=we(),{hasWallet:c}=G();return e.jsx(l,{className:"w-full self-stretch",children:c?e.jsx(We,{depositAsset:t,positions:m,refresh:u,withdrawAsset:a}):e.jsx(l,{center:!0,className:"self-stretch w-full",children:e.jsx(V,{stretch:!0,className:"mt-3 max-w-[460px] self-center",onClick:()=>o(!0),size:"lg",variant:"fancy",children:r("common.connectWallet")})})})},Re=()=>{const{pools:a}=Te("7d"),{synthCap:t}=ye();return s.useMemo(()=>a.filter(m=>m.saversDepth!=="0"&&m.saversUnits!=="0").map(m=>{const u=Number(m.saversAPR||0)*100,o=A.fromBigInt(BigInt(m.assetDepth),8).mul(t),c=A.fromBigInt(BigInt(m.synthSupply),8),g=o.gt(0)?Number(c.div(o).mul(100).toFixed(2)):0;return{apr:Ne(u),aprRaw:u/100,asset:m.asset,filled:Math.min(100,Number(g))}}).sort((m,u)=>u.filled-m.filled),[t,a])},Ve=({isDeposit:a,asset:t,withdrawPercent:m,amount:u,apr:o})=>{var f,S;const[c,g]=s.useState(),{getWalletAddress:j}=G(),w=s.useMemo(()=>new A({value:u.getValue("number"),decimal:t.decimal}),[u,t.decimal]),b=Ce(w),y=Ce(m),C=s.useMemo(()=>j(t.chain),[j,t.chain]),n=s.useCallback(async()=>{if(!(t.decimal&&(b!=null&&b.gt(0))))return;const k=A.shiftDecimals({value:b,from:t.decimal,to:8}).getBaseValue("string"),D=`${Number.parseInt((y==null?void 0:y.mul(100).getValue("string"))||"10000")}`,O=await Jt({...a?{type:"deposit",amount:k}:{address:C,type:"withdraw",withdraw_bps:D},asset:t.toString().toLowerCase()});g(O)},[b,a,C,y,t]);s.useEffect(()=>{n()},[n]);const N=s.useMemo(()=>A.fromBigInt(BigInt((c==null?void 0:c.expected_amount_out)||0),8),[c==null?void 0:c.expected_amount_out]),d=A.fromBigInt(BigInt(((f=c==null?void 0:c.fees)==null?void 0:f.total)||"0"),Se.THOR),i=A.fromBigInt(BigInt(((S=c==null?void 0:c.fees)==null?void 0:S.outbound)||"0"),Se.THOR),{inputFee:p}=Kt({inputAsset:t,outputAsset:t}),h=s.useMemo(()=>{const k=N.mul(o||0).mul(.0027397260273972603),D=d.add(p),O=k.gt(0)?D.div(k):0;return Math.round(Number(O.toFixed(2)))},[o,N,p,d]);return{slippage:d,outboundFee:i,getConfirmData:n,saverQuote:c,expectedOutputAmount:N,networkFee:p,daysToBreakEven:h}},Oe=s.memo(({loading:a,hardCapReached:t,label:m,disabled:u,handleSubmit:o,address:c,setIsConnectModalOpen:g})=>e.jsx(l,{className:"self-stretch pt-5",children:c?e.jsx(l,{className:"w-full",children:e.jsx(V,{stretch:!0,disabled:u||t,error:t,loading:a,onClick:o,rightIcon:t?e.jsx(P,{name:"infoCircle",size:20}):void 0,size:"lg",tooltip:t?r("views.liquidity.hardCapReachedTooltip"):void 0,tooltipClasses:"text-center mx-[-2px]",variant:"fancy",children:m})}):e.jsx(V,{stretch:!0,onClick:()=>g(!0),size:"lg",variant:"fancy",children:r("common.connectWallet")})}));var I=(a=>(a.Deposit="deposit",a.Withdraw="withdraw",a))(I||{}),ee=(a=>(a[a.Earn=0]="Earn",a[a.Positions=1]="Positions",a))(ee||{});let re,le;re=()=>{const{getWalletAddress:a,isWalletLoading:t}=G(),[m,u]=s.useState([]),{pools:o}=Te(),[c,g]=s.useState(),[j,w]=s.useState([]),b=s.useMemo(()=>j.length?m.map(d=>{const i=j.find(({asset:S})=>S===d.asset.toString().toUpperCase());if(!i)return d;const p=A.fromBigInt(BigInt(i.savers_depth),8),h=A.fromBigInt(BigInt(i.savers_units),8),f=d.units.div(h).mul(p);return{...d,saverPool:i,amount:f,earnedAmount:d.depositAmount&&f.gt(d.depositAmount)?f.sub(d.depositAmount):null}}):m,[m,j]),y=s.useCallback(async d=>{const i=a(d.chain);if(i){const p=await Zt({asset:d.toString(),address:i}),h=A.fromBigInt(BigInt(p.units),8),f=A.fromBigInt(BigInt(p.asset_deposit_value),8);return h.gt(0)?{asset:d,units:h,provider:p,amount:h,depositAmount:f}:null}},[a]),C=s.useCallback(async()=>{if(t)return;const d=((o==null?void 0:o.filter(p=>p.saversDepth!=="0").map(p=>rt.from({asset:p.asset})))||[]).map(y),i=await Promise.all(d);u(i.filter(Boolean))},[t,o]),n=s.useCallback(d=>b.find(i=>i.asset.eqAsset(d)),[b]),N=s.useCallback(async()=>{const d=await Xt();w(d);const i=d==null?void 0:d.reduce((p,h)=>(p[h.asset]=h.synth_mint_paused,p),{});g(i)},[]);return s.useEffect(()=>{N()},[N]),{getPosition:n,getSaverPosition:y,positions:b,refreshPositions:C,synthAvailability:c}},le=()=>{const a=lt(),t=Re(),m=Nt(),u=ot(),{getMaxBalance:o}=_t(),{isChainHalted:c}=ye(),{positions:g,refreshPositions:j,getPosition:w,synthAvailability:b}=re(),{setIsConnectModalOpen:y}=we(),{getWalletAddress:C}=G(),{asset:n,setAsset:N,amount:d,setAmount:i}=$t(ct.Earn),[p,h]=s.useState(!1),[f,S]=s.useState(!1),[k,D]=s.useState(I.Deposit),[O,oe]=s.useState(ee.Earn),[Q,Le]=s.useState(new A({decimal:2,value:0})),[ce,ze]=s.useState(X),[L,de]=s.useState(),qe=At(),Y=s.useMemo(()=>m.map(x=>({...t.find(({asset:$})=>x.asset.toString().toLowerCase()===$.toLowerCase()),...x})),[t,m]),B=k===I.Deposit,{data:ue}=ae([n]),{isApproved:He,isLoading:me}=ts({assetValue:n.set(d.getValue("string")),force:!0}),Ue=Tt({asset:n}),_=s.useMemo(()=>Y.find(x=>x.asset.toString()===n.toString()),[n,Y]),{slippage:M,outboundFee:Ge,saverQuote:W,expectedOutputAmount:K,networkFee:Qe,daysToBreakEven:F}=Ve({isDeposit:B,asset:n,withdrawPercent:Q,amount:d,apr:_==null?void 0:_.aprRaw}),te=s.useCallback(x=>{var $;return((($=ue[n.toString()])==null?void 0:$.price_usd)||0)*x.getValue("number")},[n,ue]),{isLgActive:pe}=dt(),z=s.useMemo(()=>C(n.chain),[C,n.chain]);s.useEffect(()=>{z?o(n).then(x=>de(x)):de(void 0)},[n,o,z]);const Ye=s.useMemo(()=>[{label:r("common.deposit"),value:I.Deposit},{label:r("common.withdraw"),value:I.Withdraw}],[]),q=s.useCallback(x=>{oe(ee.Earn),D(x),i(new A({value:0,decimal:n.decimal}))},[n.decimal,i]),Ke=s.useCallback(x=>{q(I.Deposit),N(x),i(new A({value:0,decimal:x.decimal}))},[i,N,q]),Je=s.useCallback(x=>{q(I.Withdraw),N(x),i(new A({value:0,decimal:x.decimal}))},[i,N,q]),Ze=s.useCallback(x=>{Le(x),z&&i(ce.mul(x.div(100)))},[z,ce,i]);s.useEffect(()=>{const x=w(n);ze((x==null?void 0:x.amount)||new A({value:0,decimal:8}))},[n,w,g]),s.useEffect(()=>{j()},[j]);const he=s.useCallback(x=>{N(x),i(new A({value:0,decimal:x.decimal}))},[N,i]),xe=s.useCallback(async()=>{const{thorchain:x}=await(await ut(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();if(!x)throw new Error("SwapKit client not found");const $=Q.getValue("number"),R=B?{memo:`+:${n.chain}/${n.symbol}`,assetValue:n.set(d.getValue("string")),type:"add"}:{assetValue:n,type:"withdraw",percent:$};return x.savings(R)},[d,n,B,Q]),Xe=s.useCallback(async x=>{h(!1);const $=mt();a(pt({id:$,label:r(B?"txManager.addAmountAsset":"txManager.withdrawAmountAsset",{asset:n.ticker,amount:x}),type:B?ke.TC_SAVINGS_ADD:ke.TC_SAVINGS_WITHDRAW,inChain:n.chain}));try{const R=await xe();i(new A({value:0,decimal:8})),R&&a(ht({id:$,txid:R}))}catch(R){xt(R),a(gt({id:$,status:"error"}))}},[a,n.chain,n.ticker,xe,B,i]),ge=s.useMemo(()=>!(b!=null&&b[n.toString()])&&((_==null?void 0:_.filled)||0)<99.5,[n,_==null?void 0:_.filled,b]),be=s.useMemo(()=>d.lte(new A({value:0,decimal:8}))||B&&(L&&d.gt(L)||!ge)||c[n.chain],[d,n.chain,L,c,B,ge]),fe=k===I.Deposit?r("common.deposit"):r("common.withdraw"),je=s.useMemo(()=>({asset:n,value:K,balance:L,usdPrice:te(K)}),[n,K,L,te]),se=s.useMemo(()=>e.jsx(l,{center:!0,children:e.jsx(v,{textStyle:"caption",children:e.jsx(U,{tooltip:r("views.savings.timeToBrakeEvenTip"),value:e.jsxs(v,{variant:F>20?"red":F>10?"orange":"primary",textStyle:"caption",textTransform:"uppercase",children:[" ",`${Number.isFinite(F)?F:0} ${F===1?r("views.savings.day"):r("views.savings.days")}`]})})})}),[F]),et=s.useMemo(()=>[{label:r("common.fee"),value:e.jsx(l,{center:!0,children:e.jsx(v,{textStyle:"caption",children:e.jsx(U,{tooltip:r("views.savings.feeTooltipDescription"),value:e.jsx(v,{variant:M.eqValue(X)?"primary":"red",textStyle:"caption",textTransform:"uppercase",children:`${M?M==null?void 0:M.toSignificant(6):0} ${n.ticker}`})})})})},{label:r("views.savings.timeToBrakeEven"),value:se}],[M,n.ticker,se]);return e.jsxs(l,{col:!0,className:"w-full max-w-[880px] flex self-center gap-3 mt-2",children:[e.jsx(bt,{content:"Earn APY on native assets with THORSwap EARN",keywords:"Earn, Savings, THORSwap, APY, Native assets",title:r("views.savings.earn")}),e.jsxs(Bt,{index:O,onChange:oe,children:[e.jsxs(Et,{children:[e.jsx(_e,{children:r("views.savings.earn")}),e.jsx(_e,{children:r("views.savings.myPositions")})]}),e.jsxs(Dt,{children:[e.jsx(Ie,{children:e.jsxs(l,{col:!0,className:"gap-3",children:[e.jsx(l,{className:"flex w-full justify-between",children:e.jsxs(l,{alignCenter:!0,children:[e.jsxs(v,{className:"ml-3 mr-2",textStyle:"h3",children:[r("views.savings.earn")," ",n.ticker]}),e.jsx(v,{textStyle:"h3",variant:"primaryBtn",children:_!=null&&_.apr?`${_==null?void 0:_.apr} ${r("common.apr").toUpperCase()}`:""}),e.jsx(Z,{content:r("views.savings.aprTooltip",{asset:n.ticker}),place:"bottom",children:e.jsx(P,{className:"ml-1",color:"primaryBtn",name:"infoCircle",size:24})})]})}),e.jsxs(l,{alignCenter:!0,className:"px-3",justify:"between",children:[e.jsxs(v,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:[r("views.savings.description",{asset:n.ticker}),e.jsx(ft,{className:"text-twitter-blue cursor-pointer",to:jt,children:e.jsx(v,{fontWeight:"medium",textStyle:"caption",variant:"blue",children:`${r("common.learnMore")} \u2192`})})]}),e.jsx(Z,{content:r("views.savings.tooltipDescription",{asset:n.ticker}),place:"bottom",children:e.jsx(P,{color:"primaryBtn",name:"infoCircle",size:24})})]}),e.jsxs(l,{row:!0,className:"w-full justify-center gap-5",children:[pe&&e.jsx(l,{className:"w-9/12",children:e.jsx(ne,{assets:Y,onSelect:he,selectedAsset:n})}),e.jsxs(l,{col:!0,className:H("flex h-full",pe&&"w-full"),children:[e.jsx(vt,{stretch:!0,className:"!rounded-2xl md:!rounded-3xl !p-4 flex-col items-center self-stretch mt-2 space-y-1 shadow-lg md:w-full md:h-auto",size:"lg",children:e.jsxs(l,{col:!0,className:"self-stretch gap-2",children:[e.jsx(kt,{onChange:x=>q(x),tabs:Ye,value:k}),k===I.Withdraw&&e.jsx(St,{onChange:Ze,percent:Q,title:r("common.withdrawPercent"),subTitle:d.eqValue(X)?void 0:`${d.toSignificant(6)} ${n.ticker} (${qe(te(d))})`}),e.jsx(Ct,{noFilters:!0,hideZeroPrice:!0,AssetListComponent:ne,assets:Y,className:"flex-1",disabled:k===I.Withdraw,onAssetChange:he,onValueChange:i,poolAsset:je,selectedAsset:je}),e.jsx(Ae,{horizontalInset:!0,items:et}),!be&&(!He||me)&&B?e.jsx(l,{className:"w-full pt-5",children:e.jsx(V,{stretch:!0,disabled:u,error:u,loading:me,onClick:()=>S(!0),size:"lg",tooltip:u?r("views.liquidity.hardCapReachedTooltip"):void 0,variant:"fancy",children:r("common.approve")})}):e.jsx(Oe,{address:z,disabled:be,handleSubmit:()=>h(!0),hardCapReached:k===I.Deposit&&u,label:fe,setIsConnectModalOpen:y})]})}),e.jsx(es,{handleApprove:Ue,inputAsset:n,setVisible:S,visible:f}),e.jsx(De,{amount:d,asset:n,expectedAmountOut:W==null?void 0:W.expected_amount_out,expectedOutputAmount:K,isOpened:p,networkFee:Qe,onClose:()=>h(!1),onConfirm:Xe,outboundDelay:(W==null?void 0:W.outbound_delay_seconds)||0,slippage:M,outboundFee:Ge,tabLabel:fe,timeToBreakEvenInfo:se})]})]})]})}),e.jsx(Ie,{children:e.jsx(Fe,{onDeposit:Ke,onWithdraw:Je,positions:g,refreshPositions:j})})]})]})]})},Be=le});export{as as __tla,Be as default};
