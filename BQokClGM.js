function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{ab as W,$ as y,dg as H,an as m,s as U,cu as M,z as S,cT as $,aa as q,a9 as v,r as A,a2 as P,b5 as C,__tla as x}from"./assets/index-CyIKZwcA.js";import{g as N}from"./DYrZbK8R.js";import{g as I,a as D,p as R}from"./C2yJ0wdw.js";let k,B,F=Promise.all([(()=>{try{return x}catch{}})()]).then(async()=>{(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="73cef43a-b3c3-40aa-8568-eeb1b8c6aefa",s._sentryDebugIdIdentifier="sentry-dbid-73cef43a-b3c3-40aa-8568-eeb1b8c6aefa")}catch{}})();let T,E;T=()=>M.get("https://thornode.thorswap.net/thorchain/inbound_addresses"),E=async s=>{const t=(await T()).find(u=>u.chain===s);return Number.parseInt(t.gas_rate)},k=async({recipient:s,route:t,feeOptionKey:u,wallet:g,streamSwap:p})=>{if(p&&!t.calldata.memoStreamingSwap)throw new Error("Streaming swap not supported");if(t.provider==="CHAINFLIP"){const{confirmSwap:f}=await W(()=>import("./assets/index-CyIKZwcA.js").then(async o=>(await o.__tla,o)).then(o=>o.hn),__vite__mapDeps([0,1])),{buyAsset:h,sellAsset:w,sellAmount:e}=t,n=await y.fromString(w),r=await y.fromString(h),a=n.set(e),i=g[a.chain].walletMethods;if(!i)throw new Error(`Chain ${a.chain} is not connected`);const l=await f({buyAsset:r,sellAsset:n,recipient:s||t.destinationAddress,brokerEndpoint:`${H}/channel`,maxBoostFeeBps:0});return i.transfer({recipient:l.depositAddress,memo:"",from:i.getAddress(),assetValue:a})}const c=t.meta.quoteMode;switch(c){case m.TC_SUPPORTED_TO_AVAX:case m.TC_SUPPORTED_TO_TC_SUPPORTED:case m.ETH_TO_AVAX:case m.ETH_TO_TC_SUPPORTED:case m.TC_SUPPORTED_TO_ETH:{const{fromAsset:f,amountIn:h,memo:w,memoStreamingSwap:e}=t.calldata,n=await y.fromIdentifier(f);if(!n)throw new Error("Asset not recognised");const r=(p?e:w).replace("{recipientAddress}",s),a=(await T()).find(({chain:d})=>d===n.chain);if(!a)throw new Error("pool address not found");if(a!=null&&a.halted)throw new Error("Network temporarily halted, please try again later.");const{address:i}=a,l=n.chain,o=g[n.chain].walletMethods;if(!o)throw new Error(`Chain ${l} is not connected`);if(!(({chain:d,address:b})=>{if(!b)return!1;switch(d){case S.Bitcoin:return!b.startsWith("bc1p");default:return!0}})({chain:l,address:o.getAddress()}))throw new Error("Sender address not supported by THORChain");const _={recipient:i,memo:r,feeOptionKey:u,from:o.getAddress(),assetValue:n.set(U.fromBigInt(BigInt(h),n.decimal)),feeRate:Number.parseInt(a.gas_rate)};return o.transfer(_)}default:throw new Error(`Quote mode ${c} not supported`)}},B=s=>{const{data:t}=$(void 0,{skip:s}),u=q(({app:{feeOptionType:e}})=>e),{getWalletAddress:g,wallet:p,getWallet:c}=v(),f=A.useCallback(e=>!!c(e.chain),[c]),h=A.useCallback(e=>!!c(e),[c]),w=A.useCallback(async(e,n=s)=>{const r=N(e,p);if(n)return r;const{chain:a}=e,i=c(a);if(!i)return e.mul(0);const l=t==null?void 0:t.find(({asset:d})=>y.fromStringSync(d).chain===a);P&&a===S.Bitcoin&&E(a).then(d=>{const b=I({gasPrice:d/1e8,feeOptionType:u,multiplier:D(e)}),V=R({gasRate:b,asset:e}),O=C(r)?r.sub(V):r;return O.gt(0)?O:r.set(0)});const o=I({gasPrice:(l==null?void 0:l.gasAsset)||0,feeOptionType:u,multiplier:D(e)||1});if(r.eqValue(0))return r;const _=P?(i==null?void 0:i.balance.find(d=>d.eqAsset(e)))||e.set(0):C(e)?r.sub(R({gasRate:o,asset:e})):r;return _.gt(0)?_:e.set(0)},[s,p,c,t,u]);return{getWalletAddress:g,isWalletAssetConnected:f,isWalletConnected:h,getMaxBalance:w}}});export{F as __tla,k as l,B as u};
