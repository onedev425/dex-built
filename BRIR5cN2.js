function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as t,ab as je,z as re,cp as _,cq as we,j as e,q as s,D as C,t as a,A as R,T as c,I as w,aK as ne,Y as b,cr as ye,ak as be,aM as le,L as ke,aL as Te,H as ve,p as V,s as N,ag as Ce,a9 as Ne,$ as ie,cs as ce,bg as Se,bi as P,w as I,E as Ve,ct as Ee,cj as He,__tla as Ae}from"./assets/index-CyIKZwcA.js";import{I as Oe}from"./CzdZMSiN.js";import{T as _e}from"./CkVRNEhN.js";import{V as Re}from"./DA3rLf5F.js";import{V as oe}from"./DlkGqSVu.js";import{u as q,S as g,a as Ie,__tla as De}from"./Cx7gR159.js";import{C as de}from"./Cguvfe_P.js";import{C as We,__tla as ze}from"./VQNeEiYk.js";import{t as K}from"./BfMEEv4T.js";import{f as Me}from"./BKK9b-JX.js";let me,Be=Promise.all([(()=>{try{return Ae}catch{}})(),(()=>{try{return De}catch{}})(),(()=>{try{return ze}catch{}})()]).then(async()=>{(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[r]="3cd46982-193d-4a58-a9ca-9ebbb62a2c36",l._sentryDebugIdIdentifier="sentry-dbid-3cd46982-193d-4a58-a9ca-9ebbb62a2c36")}catch{}})();let U,X,G,D,J,Q,Z;U=t.memo(({action:l,assetValue:r,disabledButton:d,ethAddress:n,handleVthorAction:f,setIsConnectModalOpen:m})=>{const[u,o]=t.useState(!1),{approveTHOR:S}=q(),k=t.useCallback(async()=>{var v;const{getWallet:p}=await(await je(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient(),x=p(re.Ethereum);if(!(x&&n))return;const T=await((v=x==null?void 0:x.isApproved)==null?void 0:v.call(x,{from:n,spenderAddress:_[oe.VTHOR],assetAddress:_[oe.THOR],amount:r.bigIntValue||we}));o(!!T)},[r.bigIntValue,n]);return t.useEffect(()=>{k()},[k]),e.jsx(s,{className:"self-stretch pt-5",children:n?e.jsx(s,{className:"w-full",children:l===g.Deposit?e.jsx(e.Fragment,{children:u?e.jsx(C,{stretch:!0,disabled:d,onClick:f,size:"lg",variant:"fancy",children:a("txManager.stake")}):e.jsx(C,{stretch:!0,loading:!1,onClick:S,size:"lg",variant:"fancy",children:a("txManager.approve")})}):e.jsx(C,{stretch:!0,disabled:d,onClick:f,size:"lg",variant:"fancy",children:a("views.stakingVThor.unstake")})}):e.jsx(C,{stretch:!0,onClick:()=>m(!0),size:"lg",variant:"fancy",children:a("common.connectWallet")})})}),X=({outputAmount:l,stakingAsset:r,handleAction:d,closeModal:n,isOpened:f,outputAsset:m})=>{const u=t.useCallback(()=>{n(),d()},[n,d]);return e.jsx(We,{inputAssets:[r],isOpened:f,onClose:n,onConfirm:u,children:e.jsx(s,{className:"w-full",children:e.jsxs(s,{alignCenter:!0,row:!0,className:"w-full",justify:"between",children:[e.jsxs(s,{center:!0,col:!0,className:"flex-1 p-4 rounded-2xl",children:[e.jsx(R,{asset:r}),e.jsx(s,{center:!0,className:"pt-2",children:e.jsx(de,{asset:r})}),e.jsx(s,{center:!0,className:"w-full",children:e.jsxs(c,{fontWeight:"medium",textStyle:"caption",children:[r.toSignificant(6)," ",r.ticker]})})]}),e.jsx(w,{className:"mx-2 -rotate-90",name:"arrowDown"}),e.jsxs(s,{center:!0,col:!0,className:"flex-1 p-4 rounded-2xl",children:[e.jsx(R,{asset:m}),e.jsx(s,{center:!0,className:"pt-2",children:e.jsx(de,{asset:m})}),e.jsx(s,{center:!0,className:"w-full",children:e.jsxs(c,{fontWeight:"medium",textStyle:"caption",children:[l," ",m.ticker]})})]})]})})})},G=t.memo(({walletType:l})=>{const r=t.useCallback(async()=>{var d,n;await((n=l===ne.XDEFI?(d=window.xfi)==null?void 0:d.ethereum:window.ethereum)==null?void 0:n.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:_.VTHOR,symbol:"vTHOR",decimals:b.ETH,image:ye("vthor","png")}}}))},[l]);return e.jsx(C,{onClick:r,rightIcon:e.jsx(w,{name:"metamask",size:16}),textTransform:"none",variant:"outlineTint",children:a("views.stakingVThor.addVTHOR")})}),D={apy:0,realYieldApy:0,emissionsApy:0},J=t.memo(({walletType:l,ethAddress:r})=>{const[d,n]=t.useState(!1),[f,m]=t.useState(!0),[u,o]=t.useState(D),{getRate:S,stakePercentageRate:k,thorStaked:p,vthorBalance:x,handleRefresh:T}=q(),{hasStakedV1Thor:v}=Ie(r),E=t.useCallback(()=>{n(!0),T(),setTimeout(()=>n(!1),1e3)},[T]),H=t.useCallback(async()=>{if(p!=null&&p.gt(0))try{const y=await Me(p.getValue("number"));o(y)}catch(y){be(y.toString()),o(D)}},[p]);return t.useEffect(()=>{H()},[H]),t.useEffect(()=>{m(v)},[v]),e.jsxs(s,{col:!0,className:"mt-5 gap-2",children:[f&&e.jsx(le,{content:e.jsxs(e.Fragment,{children:[a("views.stakingVThor.stakeInfoDescription"),e.jsx(ke,{className:"text-twitter-blue",to:Te.LegacyStake,children:a("views.stakingVThor.goToUnstake")})]}),onClose:()=>m(!1),title:a("views.stakingVThor.stakeInfoTitle"),type:"warn"}),e.jsx(le,{type:"info",children:e.jsxs(s,{col:!0,className:"self-stretch gap-3 px-3 py-1",children:[e.jsxs(s,{alignCenter:!0,row:!0,className:"pb-2 border-0 border-b border-solid border-opacity-20 border-light-border-primary dark:border-dark-border-primary",justify:"between",children:[e.jsx(c,{fontWeight:"semibold",textStyle:"subtitle2",children:a("views.stakingVThor.statTitle")}),e.jsxs(s,{alignCenter:!0,row:!0,className:"gap-2",children:[e.jsx(G,{walletType:l}),e.jsx(ve,{iconName:"refresh",onClick:E,spin:d})]})]}),e.jsxs(s,{alignCenter:!0,row:!0,className:"gap-2",justify:"between",children:[e.jsxs(s,{alignCenter:!0,row:!0,className:"gap-x-1",children:[e.jsx(c,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:a("views.stakingVThor.stakingApy")}),e.jsx(V,{className:"cursor-pointer",content:a("views.stakingVThor.apyTip"),children:e.jsx(w,{color:"primaryBtn",name:"infoCircle",size:16})})]}),e.jsxs(s,{alignCenter:!0,row:!0,className:"gap-2",children:[e.jsx(c,{fontWeight:"medium",textStyle:"subtitle2",children:u.apy>0?`${K(u.apy,3)}%`:"-"}),e.jsx(V,{className:"cursor-pointer",content:`Real yield: ${K(u.realYieldApy,3)}%
                Emissions: ${K(u.emissionsApy,3)}%
              `,children:e.jsx(w,{color:"primaryBtn",name:"infoCircle",size:16})})]})]}),e.jsxs(s,{alignCenter:!0,row:!0,className:"gap-2",justify:"between",children:[e.jsxs(s,{alignCenter:!0,row:!0,className:"gap-x-1",children:[e.jsx(c,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:a("views.stakingVThor.totalStaked")}),e.jsx(V,{className:"cursor-pointer",content:a("views.stakingVThor.totalThorTip"),children:e.jsx(w,{color:"primaryBtn",name:"infoCircle",size:16})})]}),e.jsxs(c,{fontWeight:"medium",textStyle:"subtitle2",children:[p.toAbbreviation()," / ",k,"%"]})]}),e.jsxs(s,{alignCenter:!0,row:!0,className:"gap-2",justify:"between",children:[e.jsx(s,{alignCenter:!0,row:!0,className:"gap-x-1",children:e.jsx(c,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:a("views.stakingVThor.redeemableBalance")})}),e.jsx(c,{fontWeight:"medium",textStyle:"subtitle2",children:x.gt(0)?`${x.mul(S()).toCurrency("")} / ${x.toCurrency("")}`:"-"})]})]})})]})}),Q=async(l,r)=>{try{const d=await(await He(_[l])).balanceOf(r);return N.fromBigInt(d,b.ETH)}catch{return new N({value:0,decimal:b.ETH})}},Z=()=>{const l=[{label:a("views.stakingVThor.stakeVThor"),value:g.Deposit},{label:a("views.stakingVThor.unstake"),value:g.Unstake}],[r,d]=t.useState(g.Deposit),[n,f]=t.useState(new N({value:0,decimal:b.ETH})),[m,u]=t.useState(new N({value:0,decimal:b.ETH})),[o,S]=t.useState(new N({value:0,decimal:b.ETH})),[k,p]=t.useState("0"),[x,T]=t.useState(!0),[v,E]=t.useState(!1),{getRateString:H,previewDeposit:y,previewRedeem:A,stakeThor:ee,unstakeThor:se}=q(),{setIsConnectModalOpen:he}=Ce(),{getWallet:te}=Ne(),h=t.useMemo(()=>r===g.Deposit,[r]),[O,W]=t.useMemo(()=>[ie.fromChainOrSignature(h?"ETH.THOR":"ETH.vTHOR"),ie.fromChainOrSignature(h?"ETH.vTHOR":"ETH.THOR")],[h]),{walletType:z,address:j}=t.useMemo(()=>te(re.Ethereum)||{walletType:void 0,address:void 0},[te]),M=t.useCallback(async(i,F,L)=>{const ae=await Q(i,F);L==="thor"?f(ae):u(ae)},[]);t.useEffect(()=>{j?(M(ce.THOR,j,"thor"),M(ce.VTHOR,j,"vthor")):(f(new N({value:0,decimal:b.ETH})),u(new N({value:0,decimal:b.ETH})))},[j,M]);const xe=t.useCallback(()=>{const i=h?n:m;S(i),p(h?y(i):A(i))},[h,n,m,y,A]),B=t.useCallback((i,F)=>{S(i);const L=F===g.Deposit?y(i):A(i);p(L)},[y,A]),Y=t.useCallback(()=>{j&&(h?ee:se)(o,j)},[j,o,h,ee,se]),ue=t.useCallback(()=>{z===ne.KEYSTORE?E(!0):Y()},[z,Y]),pe=t.useCallback(()=>{E(!1)},[]),$=t.useCallback(i=>{d(i),T(i!==g.Deposit),B(o,i)},[o,B]),ge=t.useCallback(()=>{$(r===g.Deposit?g.Unstake:g.Deposit)},[r,$]),fe=t.useMemo(()=>o.lte(0)||h&&o.gt(n)||!h&&o.gt(m),[o,h,n,m]);return e.jsxs(s,{col:!0,className:"self-center w-full max-w-[480px] mt-2",children:[e.jsx(Se,{content:a("views.stakingVThor.description"),keywords:"THOR, vTHOR, Staking, THORSwap, DEFI, DEX",title:a("views.stakingVThor.title")}),e.jsx(Re,{title:a("views.stakingVThor.stakeVThorTitle")}),e.jsxs(s,{alignCenter:!0,className:"px-3",justify:"between",children:[e.jsx(c,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:a("views.stakingVThor.stakeVThorSubtitle")}),e.jsx(V,{content:a("views.stakingVThor.stakeInfo"),place:"bottom",children:e.jsx(w,{color:"primaryBtn",name:"infoCircle",size:24})})]}),e.jsx(J,{ethAddress:j,walletType:z}),e.jsxs(P,{stretch:!0,className:"!rounded-2xl md:!rounded-3xl !p-4 flex-col items-center self-stretch mt-2 space-y-1 shadow-lg md:w-full md:h-auto",size:"lg",children:[e.jsx(s,{className:"self-stretch",children:e.jsx(_e,{onChange:$,tabs:l,value:r})}),e.jsxs(s,{className:"relative self-stretch",children:[e.jsx(s,{center:!0,className:I("z-10 absolute -mt-0.5 -bottom-6 left-1/2 -translate-x-1/2","p-1 md:p-2 rounded-xl md:rounded-[18px] cursor-pointer","border-10 border-solid bg-blue dark:border-dark-border-primary border-transparent hover:brightness-125 transition"),onClick:ge,children:e.jsx(w,{className:I("p-1 transition-all",{"-scale-x-100":h}),color:"white",name:"arrowDown",size:20})}),e.jsx(Ve,{className:I("!gap-1 !justify-start flex-1 !px-4 md:!px-6 !py-4"),children:e.jsxs(s,{alignCenter:!0,col:!0,className:"self-stretch flex-1 md:pl-0",children:[e.jsx(s,{className:"gap-3 self-stretch !mb-3",children:e.jsxs(s,{alignCenter:!0,flex:1,justify:"between",children:[e.jsx(c,{className:"-ml-1",fontWeight:"normal",variant:"secondary",children:a("views.stakingVThor.send")}),e.jsxs(s,{center:!0,row:!0,className:"gap-1 pr-2 md:pr-0",children:[e.jsxs(c,{fontWeight:"medium",variant:"secondary",children:[a("common.balance"),":"," ",h?n.toSignificant(6):m.toSignificant(6)]}),e.jsx(C,{className:"!h-5 !px-1.5",onClick:xe,textTransform:"uppercase",variant:"outlineSecondary",children:a("common.max")})]})]})}),e.jsxs(s,{className:"self-stretch flex-1",children:[e.jsx(s,{flex:1,children:e.jsx(Oe,{stretch:!0,amountValue:o,className:I("-ml-1 !text-2xl font-normal text-left flex-1"),containerClassName:"!py-0",onAmountChange:i=>B(i,r)})}),e.jsxs(s,{center:!0,className:"gap-3",children:[e.jsx(c,{textStyle:"subtitle2",children:O.ticker}),e.jsx(R,{asset:O,size:34})]})]})]})})]}),e.jsx(P,{className:"!bg-light-bg-primary dark:!bg-dark-gray-light !rounded-2xl self-stretch !py-3 gap-2 justify-between md:px-6",children:e.jsxs(s,{col:!0,className:"self-stretch flex-1 md:pl-0",children:[e.jsx(s,{className:"gap-3 self-stretch !mb-3",children:e.jsxs(c,{className:"-ml-1",fontWeight:"normal",variant:"secondary",children:[a("views.stakingVThor.receive"),":"]})}),e.jsxs(s,{className:"self-stretch flex-1",children:[e.jsx(s,{flex:1,children:e.jsx(c,{className:"-ml-1 !text-2xl text-left flex-1",fontWeight:"normal",children:k})}),e.jsxs(s,{center:!0,className:"gap-3",children:[e.jsx(c,{textStyle:"subtitle2",children:W.ticker}),e.jsx(R,{asset:W,size:34})]})]})]})}),e.jsx(P,{className:"self-stretch align-center !bg-light-bg-primary dark:!bg-dark-gray-light !rounded-2xl !py-2.5",children:e.jsxs(s,{alignCenter:!0,className:"flex-1 gap-2",justify:"between",children:[e.jsxs(s,{center:!0,className:"gap-2",children:[e.jsx(C,{className:"!p-1 !h-auto",leftIcon:e.jsx(w,{name:"switch",size:16}),onClick:()=>T(i=>!i),variant:"outlinePrimary"}),e.jsx(c,{fontWeight:"normal",textStyle:"caption",variant:"primary",children:H(x)})]}),e.jsx(V,{content:a("views.wallet.priceRate"),children:e.jsx(w,{className:Ee,color:"secondary",name:"infoCircle",size:20})})]})}),e.jsx(U,{action:r,assetValue:O.add(o),disabledButton:fe,ethAddress:j,handleVthorAction:ue,setIsConnectModalOpen:he})]}),e.jsx(X,{closeModal:pe,handleAction:Y,isOpened:v,outputAmount:k,outputAsset:W,stakingAsset:O.add(o)})]})},me=Z});export{Be as __tla,me as default};
