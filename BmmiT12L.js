import{gP as kt,gy as b,gQ as jt,gD as Bt,dM as Xt,gR as ke}from"./assets/index-CyIKZwcA.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="44c2b65d-2e13-4307-a9e7-97a16ff18624",r._sentryDebugIdIdentifier="sentry-dbid-44c2b65d-2e13-4307-a9e7-97a16ff18624")}catch{}})();const q=r=>{class e extends Error{constructor(n,s,i){if(super(n||r,i),Object.setPrototypeOf(this,e.prototype),this.name=r,s)for(const c in s)this[c]=s[c];if(i&&Vt(i)&&"cause"in i&&!("cause"in this)){const c=i.cause;this.cause=c,"stack"in c&&(this.stack=this.stack+`
CAUSE: `+c.stack)}}}return e};function Vt(r){return typeof r=="object"}const zt=q("DisconnectedDevice"),Ht=q("DisconnectedDeviceDuringOperation"),Wt=q("TransportOpenUserCancelled"),je=q("TransportInterfaceNotAvailable"),Yt=q("TransportRaceCondition"),qt=q("TransportWebUSBGestureRequired");var Be;(function(r){r.Unknown="Unknown",r.LocationServicesDisabled="LocationServicesDisabled",r.LocationServicesUnauthorized="LocationServicesUnauthorized",r.BluetoothScanStartFailed="BluetoothScanStartFailed"})(Be||(Be={}));class X extends Error{constructor(e,t){const n="TransportError";super(e||n),this.name=n,this.message=e,this.stack=new Error(e).stack,this.id=t}}const K={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738};function Kt(r){switch(r){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=r&&r<=28671)return"Internal error, please report"}class oe extends Error{constructor(e,{canBeMappedToChildError:t=!0}={}){const n=Object.keys(K).find(l=>K[l]===e)||"UNKNOWN_ERROR",s=Kt(e)||n,i=e.toString(16),c=`Ledger device: ${s} (0x${i})`;if(super(c),this.name="TransportStatusError",this.statusCode=e,this.statusText=n,Object.setPrototypeOf(this,oe.prototype),t&&e===K.LOCKED_DEVICE)return new Ge(c)}}class Ge extends oe{constructor(e){super(K.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,Ge.prototype)}}var ae=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(c){c(i)})}return new(t||(t=Promise))(function(i,c){function l(h){try{a(n.next(h))}catch(p){c(p)}}function o(h){try{a(n.throw(h))}catch(p){c(p)}}function a(h){h.done?i(h.value):s(h.value).then(l,o)}a((n=n.apply(r,e||[])).next())})};const Zt="transport";class ge{constructor({context:e,logType:t}={}){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new kt,this.send=(n,s,i,c,...l)=>ae(this,[n,s,i,c,...l],void 0,function*(o,a,h,p,R=b.alloc(0),f=[K.OK],{abortTimeoutMs:m}={}){const D=this.tracer.withUpdatedContext({function:"send"});if(R.length>=256)throw D.trace("data.length exceeded 256 bytes limit",{dataLength:R.length}),new X("data.length exceed 256 bytes limit. Got: "+R.length,"DataLengthTooBig");D.trace("Starting an exchange",{abortTimeoutMs:m});const C=yield this.exchange(b.concat([b.from([o,a,h,p]),b.from([R.length]),R]),{abortTimeoutMs:m});D.trace("Received response from exchange");const U=C.readUInt16BE(C.length-2);if(!f.some(S=>S===U))throw new oe(U);return C}),this._appAPIlock=null,this.tracer=new jt(t??Zt,e)}exchange(e,{abortTimeoutMs:t}={}){throw new Error("exchange not implemented")}exchangeBulk(e,t){let n=!1;const s=()=>{n=!0};return ae(this,void 0,void 0,function*(){if(!n)for(const i of e){const c=yield this.exchange(i);if(n)return;const l=c.readUInt16BE(c.length-2);if(l!==K.OK)throw new oe(l);t.next(c)}}).then(()=>!n&&t.complete(),i=>!n&&t.error(i)),{unsubscribe:s}}setScrambleKey(e){}close(){return Promise.resolve()}on(e,t){this._events.on(e,t)}off(e,t){this._events.removeListener(e,t)}emit(e,...t){this._events.emit(e,...t)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}static create(e=3e3,t){return new Promise((n,s)=>{let i=!1;const c=this.listen({next:o=>{i=!0,c&&c.unsubscribe(),l&&clearTimeout(l),this.open(o.descriptor,e).then(n,s)},error:o=>{l&&clearTimeout(l),s(o)},complete:()=>{l&&clearTimeout(l),i||s(new X(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),l=t?setTimeout(()=>{c.unsubscribe(),s(new X(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},t):null})}exchangeAtomicImpl(e){return ae(this,void 0,void 0,function*(){const t=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw t.trace("Atomic exchange is already busy"),new Yt("An action was already pending on the Ledger device. Please deny or reconnect.");let n;const s=new Promise(l=>{n=l});this.exchangeBusyPromise=s;let i=!1;const c=setTimeout(()=>{t.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),i=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const l=yield e();return i&&(t.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),l}finally{t.trace("Finalize, clearing busy guard"),clearTimeout(c),n&&n(),this.exchangeBusyPromise=null}})}decorateAppAPIMethods(e,t,n){for(const s of t)e[s]=this.decorateAppAPIMethod(s,e[s],e,n)}decorateAppAPIMethod(e,t,n,s){return(...i)=>ae(this,void 0,void 0,function*(){const{_appAPIlock:c}=this;if(c)return Promise.reject(new X("Ledger Device is busy (lock "+c+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(s),yield t.apply(n,i)}finally{this._appAPIlock=null}})}setTraceContext(e){this.tracer=this.tracer.withContext(e)}updateTraceContext(e){this.tracer.updateContext(e)}getTraceContext(){return this.tracer.getContext()}}ge.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",ge.ErrorMessage_NoDeviceFound="No Ledger device found";const Xe=5;function Qt(r){const e=b.alloc(2);return e.writeUInt16BE(r,0),e}const Jt={data:b.alloc(0),dataLength:0,sequence:0},er=(r,e)=>({makeBlocks(t){let n=b.concat([Qt(t.length),t]);const s=e-5,i=Math.ceil(n.length/s);n=b.concat([n,b.alloc(i*s-n.length+1).fill(0)]);const c=[];for(let l=0;l<i;l++){const o=b.alloc(5);o.writeUInt16BE(r,0),o.writeUInt8(Xe,2),o.writeUInt16BE(l,3);const a=n.slice(l*s,(l+1)*s);c.push(b.concat([o,a]))}return c},reduceResponse(t,n){let{data:s,dataLength:i,sequence:c}=t||Jt;if(n.readUInt16BE(0)!==r)throw new X("Invalid channel","InvalidChannel");if(n.readUInt8(2)!==Xe)throw new X("Invalid tag","InvalidTag");if(n.readUInt16BE(3)!==c)throw new X("Invalid sequence","InvalidSequence");t||(i=n.readUInt16BE(5)),c++;const l=n.slice(t?5:7);return s=b.concat([s,l]),s.length>i&&(s=s.slice(0,i)),{data:s,dataLength:i,sequence:c}},getReducedResult(t){if(t&&t.dataLength===t.data.length)return t.data}});var Ie={exports:{}};const tr="2.0.0",Ve=256,rr=Number.MAX_SAFE_INTEGER||9007199254740991,nr=16,sr=Ve-6,ir=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ce={MAX_LENGTH:Ve,MAX_SAFE_COMPONENT_LENGTH:nr,MAX_SAFE_BUILD_LENGTH:sr,MAX_SAFE_INTEGER:rr,RELEASE_TYPES:ir,SEMVER_SPEC_VERSION:tr,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Ne={};const or=typeof Bt=="object"&&Ne&&Ne.NODE_DEBUG&&/\bsemver\b/i.test(Ne.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var le=or;(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=ce,i=le;e=r.exports={};const c=e.re=[],l=e.safeRe=[],o=e.src=[],a=e.t={};let h=0;const p="[a-zA-Z0-9-]",R=[["\\s",1],["\\d",s],[p,n]],f=D=>{for(const[C,U]of R)D=D.split(`${C}*`).join(`${C}{0,${U}}`).split(`${C}+`).join(`${C}{1,${U}}`);return D},m=(D,C,U)=>{const S=f(C),B=h++;i(D,B,C),a[D]=B,o[B]=C,c[B]=new RegExp(C,U?"g":void 0),l[B]=new RegExp(S,U?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${o[a.NUMERICIDENTIFIER]}|${o[a.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${o[a.NUMERICIDENTIFIERLOOSE]}|${o[a.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${o[a.PRERELEASEIDENTIFIER]}(?:\\.${o[a.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${o[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[a.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${o[a.BUILDIDENTIFIER]}(?:\\.${o[a.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${o[a.MAINVERSION]}${o[a.PRERELEASE]}?${o[a.BUILD]}?`),m("FULL",`^${o[a.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${o[a.MAINVERSIONLOOSE]}${o[a.PRERELEASELOOSE]}?${o[a.BUILD]}?`),m("LOOSE",`^${o[a.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${o[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${o[a.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:${o[a.PRERELEASE]})?${o[a.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:${o[a.PRERELEASELOOSE]})?${o[a.BUILD]}?)?)?`),m("XRANGE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),m("COERCE",`${o[a.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",o[a.COERCEPLAIN]+`(?:${o[a.PRERELEASE]})?(?:${o[a.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",o[a.COERCE],!0),m("COERCERTLFULL",o[a.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${o[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",m("TILDE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${o[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",m("CARET",`^${o[a.LONECARET]}${o[a.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${o[a.LONECARET]}${o[a.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${o[a.GTLT]}\\s*(${o[a.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]}|${o[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${o[a.XRANGEPLAIN]})\\s+-\\s+(${o[a.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${o[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[a.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ie,Ie.exports);var re=Ie.exports;const ar=Object.freeze({loose:!0}),cr=Object.freeze({}),lr=r=>r?typeof r!="object"?ar:r:cr;var Re=lr;const ze=/^[0-9]+$/,He=(r,e)=>{const t=ze.test(r),n=ze.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},hr=(r,e)=>He(e,r);var We={compareIdentifiers:He,rcompareIdentifiers:hr};const he=le,{MAX_LENGTH:Ye,MAX_SAFE_INTEGER:ue}=ce,{safeRe:qe,t:Ke}=re,ur=Re,{compareIdentifiers:Z}=We;let pr=class F{constructor(e,t){if(t=ur(t),e instanceof F){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Ye)throw new TypeError(`version is longer than ${Ye} characters`);he("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?qe[Ke.LOOSE]:qe[Ke.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ue||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ue||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ue||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<ue)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(he("SemVer.compare",this.version,this.options,e),!(e instanceof F)){if(typeof e=="string"&&e===this.version)return 0;e=new F(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof F||(e=new F(e,this.options)),Z(this.major,e.major)||Z(this.minor,e.minor)||Z(this.patch,e.patch)}comparePre(e){if(e instanceof F||(e=new F(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],s=e.prerelease[t];if(he("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n!==s)return Z(n,s)}while(++t)}compareBuild(e){e instanceof F||(e=new F(e,this.options));let t=0;do{const n=this.build[t],s=e.build[t];if(he("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n!==s)return Z(n,s)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),Z(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var P=pr;const Ze=P,dr=(r,e,t=!1)=>{if(r instanceof Ze)return r;try{return new Ze(r,e)}catch(n){if(!t)return null;throw n}};var Q=dr;const fr=Q,Er=(r,e)=>{const t=fr(r,e);return t?t.version:null};var mr=Er;const vr=Q,gr=(r,e)=>{const t=vr(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var Ir=gr;const Qe=P,Nr=(r,e,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new Qe(r instanceof Qe?r.version:r,t).inc(e,n,s).version}catch{return null}};var Rr=Nr;const Je=Q,Tr=(r,e)=>{const t=Je(r,null,!0),n=Je(e,null,!0),s=t.compare(n);if(s===0)return null;const i=s>0,c=i?t:n,l=i?n:t,o=!!c.prerelease.length;if(l.prerelease.length&&!o)return!l.patch&&!l.minor?"major":c.patch?"patch":c.minor?"minor":"major";const a=o?"pre":"";return t.major!==n.major?a+"major":t.minor!==n.minor?a+"minor":t.patch!==n.patch?a+"patch":"prerelease"};var Lr=Tr;const yr=P,wr=(r,e)=>new yr(r,e).major;var Or=wr;const Ar=P,Sr=(r,e)=>new Ar(r,e).minor;var $r=Sr;const Cr=P,Pr=(r,e)=>new Cr(r,e).patch;var br=Pr;const Dr=Q,xr=(r,e)=>{const t=Dr(r,e);return t&&t.prerelease.length?t.prerelease:null};var Mr=xr;const et=P,_r=(r,e,t)=>new et(r,t).compare(new et(e,t));var x=_r;const Ur=x,Fr=(r,e,t)=>Ur(e,r,t);var Gr=Fr;const kr=x,jr=(r,e)=>kr(r,e,!0);var Br=jr;const tt=P,Xr=(r,e,t)=>{const n=new tt(r,t),s=new tt(e,t);return n.compare(s)||n.compareBuild(s)};var Te=Xr;const Vr=Te,zr=(r,e)=>r.sort((t,n)=>Vr(t,n,e));var Hr=zr;const Wr=Te,Yr=(r,e)=>r.sort((t,n)=>Wr(n,t,e));var qr=Yr;const Kr=x,Zr=(r,e,t)=>Kr(r,e,t)>0;var pe=Zr;const Qr=x,Jr=(r,e,t)=>Qr(r,e,t)<0;var Le=Jr;const en=x,tn=(r,e,t)=>en(r,e,t)===0;var rt=tn;const rn=x,nn=(r,e,t)=>rn(r,e,t)!==0;var nt=nn;const sn=x,on=(r,e,t)=>sn(r,e,t)>=0;var ye=on;const an=x,cn=(r,e,t)=>an(r,e,t)<=0;var we=cn;const ln=rt,hn=nt,un=pe,pn=ye,dn=Le,fn=we,En=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return ln(r,t,n);case"!=":return hn(r,t,n);case">":return un(r,t,n);case">=":return pn(r,t,n);case"<":return dn(r,t,n);case"<=":return fn(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var st=En;const mn=P,vn=Q,{safeRe:de,t:fe}=re,gn=(r,e)=>{if(r instanceof mn)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?de[fe.COERCEFULL]:de[fe.COERCE]);else{const o=e.includePrerelease?de[fe.COERCERTLFULL]:de[fe.COERCERTL];let a;for(;(a=o.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||a.index+a[0].length!==t.index+t[0].length)&&(t=a),o.lastIndex=a.index+a[1].length+a[2].length;o.lastIndex=-1}if(t===null)return null;const n=t[2],s=t[3]||"0",i=t[4]||"0",c=e.includePrerelease&&t[5]?`-${t[5]}`:"",l=e.includePrerelease&&t[6]?`+${t[6]}`:"";return vn(`${n}.${s}.${i}${c}${l}`,e)};var In=gn,it,ot;function Nn(){return ot||(ot=1,it=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),it}var Rn=L;L.Node=V,L.create=L;function L(r){var e=this;if(e instanceof L||(e=new L),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}L.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e},L.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},L.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}},L.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)Ln(this,arguments[r]);return this.length},L.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)yn(this,arguments[r]);return this.length},L.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},L.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},L.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next},L.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev},L.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value},L.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value},L.prototype.map=function(r,e){e=e||this;for(var t=new L,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t},L.prototype.mapReverse=function(r,e){e=e||this;for(var t=new L,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t},L.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)t=r(t,n.value,s),n=n.next;return t},L.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)t=r(t,n.value,s),n=n.prev;return t},L.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r},L.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r},L.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new L;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)t.push(s.value);return t},L.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new L;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>r;n--,s=s.prev)t.push(s.value);return t},L.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(var i=[],n=0;s&&n<e;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<t.length;n++)s=Tn(this,s,t[n]);return i},L.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function Tn(r,e,t){var n=e===r.head?new V(t,null,e,r):new V(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function Ln(r,e){r.tail=new V(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function yn(r,e){r.head=new V(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function V(r,e,t,n){if(!(this instanceof V))return new V(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Nn()(L)}catch{}const wn=Rn,z=Symbol("max"),G=Symbol("length"),J=Symbol("lengthCalculator"),ne=Symbol("allowStale"),H=Symbol("maxAge"),k=Symbol("dispose"),at=Symbol("noDisposeOnSet"),$=Symbol("lruList"),M=Symbol("cache"),ct=Symbol("updateAgeOnGet"),Oe=()=>1;class On{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[z]=e.max||1/0;const t=e.length||Oe;if(this[J]=typeof t!="function"?Oe:t,this[ne]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[H]=e.maxAge||0,this[k]=e.dispose,this[at]=e.noDisposeOnSet||!1,this[ct]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[z]=e||1/0,se(this)}get max(){return this[z]}set allowStale(e){this[ne]=!!e}get allowStale(){return this[ne]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[H]=e,se(this)}get maxAge(){return this[H]}set lengthCalculator(e){typeof e!="function"&&(e=Oe),e!==this[J]&&(this[J]=e,this[G]=0,this[$].forEach(t=>{t.length=this[J](t.value,t.key),this[G]+=t.length})),se(this)}get lengthCalculator(){return this[J]}get length(){return this[G]}get itemCount(){return this[$].length}rforEach(e,t){t=t||this;for(let n=this[$].tail;n!==null;){const s=n.prev;lt(this,e,n,t),n=s}}forEach(e,t){t=t||this;for(let n=this[$].head;n!==null;){const s=n.next;lt(this,e,n,t),n=s}}keys(){return this[$].toArray().map(e=>e.key)}values(){return this[$].toArray().map(e=>e.value)}reset(){this[k]&&this[$]&&this[$].length&&this[$].forEach(e=>this[k](e.key,e.value)),this[M]=new Map,this[$]=new wn,this[G]=0}dump(){return this[$].map(e=>Ee(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[$]}set(e,t,n){if(n=n||this[H],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const s=n?Date.now():0,i=this[J](t,e);if(this[M].has(e)){if(i>this[z])return ee(this,this[M].get(e)),!1;const l=this[M].get(e).value;return this[k]&&(this[at]||this[k](e,l.value)),l.now=s,l.maxAge=n,l.value=t,this[G]+=i-l.length,l.length=i,this.get(e),se(this),!0}const c=new An(e,t,i,s,n);return c.length>this[z]?(this[k]&&this[k](e,t),!1):(this[G]+=c.length,this[$].unshift(c),this[M].set(e,this[$].head),se(this),!0)}has(e){if(!this[M].has(e))return!1;const t=this[M].get(e).value;return!Ee(this,t)}get(e){return Ae(this,e,!0)}peek(e){return Ae(this,e,!1)}pop(){const e=this[$].tail;return e?(ee(this,e),e.value):null}del(e){ee(this,this[M].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const s=e[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{const c=i-t;c>0&&this.set(s.k,s.v,c)}}}prune(){this[M].forEach((e,t)=>Ae(this,t,!1))}}const Ae=(r,e,t)=>{const n=r[M].get(e);if(n){const s=n.value;if(Ee(r,s)){if(ee(r,n),!r[ne])return}else t&&(r[ct]&&(n.value.now=Date.now()),r[$].unshiftNode(n));return s.value}},Ee=(r,e)=>{if(!e||!e.maxAge&&!r[H])return!1;const t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[H]&&t>r[H]},se=r=>{if(r[G]>r[z])for(let e=r[$].tail;r[G]>r[z]&&e!==null;){const t=e.prev;ee(r,e),e=t}},ee=(r,e)=>{if(e){const t=e.value;r[k]&&r[k](t.key,t.value),r[G]-=t.length,r[M].delete(t.key),r[$].removeNode(e)}};class An{constructor(e,t,n,s,i){this.key=e,this.value=t,this.length=n,this.now=s,this.maxAge=i||0}}const lt=(r,e,t,n)=>{let s=t.value;Ee(r,s)&&(ee(r,t),r[ne]||(s=void 0)),s&&e.call(n,s.value,s.key,r)};var Sn=On,Se,ht;function _(){if(ht)return Se;ht=1;class r{constructor(u,I){if(I=n(I),u instanceof r)return u.loose===!!I.loose&&u.includePrerelease===!!I.includePrerelease?u:new r(u.raw,I);if(u instanceof s)return this.raw=u.value,this.set=[[u]],this.format(),this;if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=u.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(v=>this.parseRange(v.trim())).filter(v=>v.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const v=this.set[0];if(this.set=this.set.filter(g=>!m(g[0])),this.set.length===0)this.set=[v];else if(this.set.length>1){for(const g of this.set)if(g.length===1&&D(g[0])){this.set=[g];break}}}this.format()}format(){return this.range=this.set.map(u=>u.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(u){const I=((this.options.includePrerelease&&R)|(this.options.loose&&f))+":"+u,v=t.get(I);if(v)return v;const g=this.options.loose,E=g?l[o.HYPHENRANGELOOSE]:l[o.HYPHENRANGE];u=u.replace(E,Ft(this.options.includePrerelease)),i("hyphen replace",u),u=u.replace(l[o.COMPARATORTRIM],a),i("comparator trim",u),u=u.replace(l[o.TILDETRIM],h),i("tilde trim",u),u=u.replace(l[o.CARETTRIM],p),i("caret trim",u);let N=u.split(" ").map(O=>U(O,this.options)).join(" ").split(/\s+/).map(O=>Ut(O,this.options));g&&(N=N.filter(O=>(i("loose invalid filter",O,this.options),!!O.match(l[o.COMPARATORLOOSE])))),i("range list",N);const y=new Map,T=N.map(O=>new s(O,this.options));for(const O of T){if(m(O))return[O];y.set(O.value,O)}y.size>1&&y.has("")&&y.delete("");const w=[...y.values()];return t.set(I,w),w}intersects(u,I){if(!(u instanceof r))throw new TypeError("a Range is required");return this.set.some(v=>C(v,I)&&u.set.some(g=>C(g,I)&&v.every(E=>g.every(N=>E.intersects(N,I)))))}test(u){if(!u)return!1;if(typeof u=="string")try{u=new c(u,this.options)}catch{return!1}for(let I=0;I<this.set.length;I++)if(Gt(this.set[I],u,this.options))return!0;return!1}}Se=r;const e=Sn,t=new e({max:1e3}),n=Re,s=me(),i=le,c=P,{safeRe:l,t:o,comparatorTrimReplace:a,tildeTrimReplace:h,caretTrimReplace:p}=re,{FLAG_INCLUDE_PRERELEASE:R,FLAG_LOOSE:f}=ce,m=d=>d.value==="<0.0.0-0",D=d=>d.value==="",C=(d,u)=>{let I=!0;const v=d.slice();let g=v.pop();for(;I&&v.length;)I=v.every(E=>g.intersects(E,u)),g=v.pop();return I},U=(d,u)=>(i("comp",d,u),d=bt(d,u),i("caret",d),d=B(d,u),i("tildes",d),d=xt(d,u),i("xrange",d),d=_t(d,u),i("stars",d),d),S=d=>!d||d.toLowerCase()==="x"||d==="*",B=(d,u)=>d.trim().split(/\s+/).map(I=>Pt(I,u)).join(" "),Pt=(d,u)=>{const I=u.loose?l[o.TILDELOOSE]:l[o.TILDE];return d.replace(I,(v,g,E,N,y)=>{i("tilde",d,v,g,E,N,y);let T;return S(g)?T="":S(E)?T=`>=${g}.0.0 <${+g+1}.0.0-0`:S(N)?T=`>=${g}.${E}.0 <${g}.${+E+1}.0-0`:y?(i("replaceTilde pr",y),T=`>=${g}.${E}.${N}-${y} <${g}.${+E+1}.0-0`):T=`>=${g}.${E}.${N} <${g}.${+E+1}.0-0`,i("tilde return",T),T})},bt=(d,u)=>d.trim().split(/\s+/).map(I=>Dt(I,u)).join(" "),Dt=(d,u)=>{i("caret",d,u);const I=u.loose?l[o.CARETLOOSE]:l[o.CARET],v=u.includePrerelease?"-0":"";return d.replace(I,(g,E,N,y,T)=>{i("caret",d,g,E,N,y,T);let w;return S(E)?w="":S(N)?w=`>=${E}.0.0${v} <${+E+1}.0.0-0`:S(y)?E==="0"?w=`>=${E}.${N}.0${v} <${E}.${+N+1}.0-0`:w=`>=${E}.${N}.0${v} <${+E+1}.0.0-0`:T?(i("replaceCaret pr",T),E==="0"?N==="0"?w=`>=${E}.${N}.${y}-${T} <${E}.${N}.${+y+1}-0`:w=`>=${E}.${N}.${y}-${T} <${E}.${+N+1}.0-0`:w=`>=${E}.${N}.${y}-${T} <${+E+1}.0.0-0`):(i("no pr"),E==="0"?N==="0"?w=`>=${E}.${N}.${y}${v} <${E}.${N}.${+y+1}-0`:w=`>=${E}.${N}.${y}${v} <${E}.${+N+1}.0-0`:w=`>=${E}.${N}.${y} <${+E+1}.0.0-0`),i("caret return",w),w})},xt=(d,u)=>(i("replaceXRanges",d,u),d.split(/\s+/).map(I=>Mt(I,u)).join(" ")),Mt=(d,u)=>{d=d.trim();const I=u.loose?l[o.XRANGELOOSE]:l[o.XRANGE];return d.replace(I,(v,g,E,N,y,T)=>{i("xRange",d,v,g,E,N,y,T);const w=S(E),O=w||S(N),Y=O||S(y),te=Y;return g==="="&&te&&(g=""),T=u.includePrerelease?"-0":"",w?g===">"||g==="<"?v="<0.0.0-0":v="*":g&&te?(O&&(N=0),y=0,g===">"?(g=">=",O?(E=+E+1,N=0,y=0):(N=+N+1,y=0)):g==="<="&&(g="<",O?E=+E+1:N=+N+1),g==="<"&&(T="-0"),v=`${g+E}.${N}.${y}${T}`):O?v=`>=${E}.0.0${T} <${+E+1}.0.0-0`:Y&&(v=`>=${E}.${N}.0${T} <${E}.${+N+1}.0-0`),i("xRange return",v),v})},_t=(d,u)=>(i("replaceStars",d,u),d.trim().replace(l[o.STAR],"")),Ut=(d,u)=>(i("replaceGTE0",d,u),d.trim().replace(l[u.includePrerelease?o.GTE0PRE:o.GTE0],"")),Ft=d=>(u,I,v,g,E,N,y,T,w,O,Y,te,oi)=>(S(v)?I="":S(g)?I=`>=${v}.0.0${d?"-0":""}`:S(E)?I=`>=${v}.${g}.0${d?"-0":""}`:N?I=`>=${I}`:I=`>=${I}${d?"-0":""}`,S(w)?T="":S(O)?T=`<${+w+1}.0.0-0`:S(Y)?T=`<${w}.${+O+1}.0-0`:te?T=`<=${w}.${O}.${Y}-${te}`:d?T=`<${w}.${O}.${+Y+1}-0`:T=`<=${T}`,`${I} ${T}`.trim()),Gt=(d,u,I)=>{for(let v=0;v<d.length;v++)if(!d[v].test(u))return!1;if(u.prerelease.length&&!I.includePrerelease){for(let v=0;v<d.length;v++)if(i(d[v].semver),d[v].semver!==s.ANY&&d[v].semver.prerelease.length>0){const g=d[v].semver;if(g.major===u.major&&g.minor===u.minor&&g.patch===u.patch)return!0}return!1}return!0};return Se}var $e,ut;function me(){if(ut)return $e;ut=1;const r=Symbol("SemVer ANY");class e{static get ANY(){return r}constructor(h,p){if(p=t(p),h instanceof e){if(h.loose===!!p.loose)return h;h=h.value}h=h.trim().split(/\s+/).join(" "),c("comparator",h,p),this.options=p,this.loose=!!p.loose,this.parse(h),this.semver===r?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(h){const p=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],R=h.match(p);if(!R)throw new TypeError(`Invalid comparator: ${h}`);this.operator=R[1]!==void 0?R[1]:"",this.operator==="="&&(this.operator=""),R[2]?this.semver=new l(R[2],this.options.loose):this.semver=r}toString(){return this.value}test(h){if(c("Comparator.test",h,this.options.loose),this.semver===r||h===r)return!0;if(typeof h=="string")try{h=new l(h,this.options)}catch{return!1}return i(h,this.operator,this.semver,this.options)}intersects(h,p){if(!(h instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(h.value,p).test(this.value):h.operator===""?h.value===""?!0:new o(this.value,p).test(h.semver):(p=t(p),p.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||i(this.semver,"<",h.semver,p)&&this.operator.startsWith(">")&&h.operator.startsWith("<")||i(this.semver,">",h.semver,p)&&this.operator.startsWith("<")&&h.operator.startsWith(">")))}}$e=e;const t=Re,{safeRe:n,t:s}=re,i=st,c=le,l=P,o=_();return $e}const $n=_(),Cn=(r,e,t)=>{try{e=new $n(e,t)}catch{return!1}return e.test(r)};var ve=Cn;const Pn=_(),bn=(r,e)=>new Pn(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));var Dn=bn;const xn=P,Mn=_(),_n=(r,e,t)=>{let n=null,s=null,i=null;try{i=new Mn(e,t)}catch{return null}return r.forEach(c=>{i.test(c)&&(!n||s.compare(c)===-1)&&(n=c,s=new xn(n,t))}),n};var Un=_n;const Fn=P,Gn=_(),kn=(r,e,t)=>{let n=null,s=null,i=null;try{i=new Gn(e,t)}catch{return null}return r.forEach(c=>{i.test(c)&&(!n||s.compare(c)===1)&&(n=c,s=new Fn(n,t))}),n};var jn=kn;const Ce=P,Bn=_(),pt=pe,Xn=(r,e)=>{r=new Bn(r,e);let t=new Ce("0.0.0");if(r.test(t)||(t=new Ce("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){const s=r.set[n];let i=null;s.forEach(c=>{const l=new Ce(c.semver.version);switch(c.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!i||pt(l,i))&&(i=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),i&&(!t||pt(t,i))&&(t=i)}return t&&r.test(t)?t:null};var Vn=Xn;const zn=_(),Hn=(r,e)=>{try{return new zn(r,e).range||"*"}catch{return null}};var Wn=Hn;const Yn=P,dt=me(),{ANY:qn}=dt,Kn=_(),Zn=ve,ft=pe,Et=Le,Qn=we,Jn=ye,es=(r,e,t,n)=>{r=new Yn(r,n),e=new Kn(e,n);let s,i,c,l,o;switch(t){case">":s=ft,i=Qn,c=Et,l=">",o=">=";break;case"<":s=Et,i=Jn,c=ft,l="<",o="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Zn(r,e,n))return!1;for(let a=0;a<e.set.length;++a){const h=e.set[a];let p=null,R=null;if(h.forEach(f=>{f.semver===qn&&(f=new dt(">=0.0.0")),p=p||f,R=R||f,s(f.semver,p.semver,n)?p=f:c(f.semver,R.semver,n)&&(R=f)}),p.operator===l||p.operator===o||(!R.operator||R.operator===l)&&i(r,R.semver)||R.operator===o&&c(r,R.semver))return!1}return!0};var Pe=es;const ts=Pe,rs=(r,e,t)=>ts(r,e,">",t);var ns=rs;const ss=Pe,is=(r,e,t)=>ss(r,e,"<",t);var os=is;const mt=_(),as=(r,e,t)=>(r=new mt(r,t),e=new mt(e,t),r.intersects(e,t));var cs=as;const ls=ve,hs=x;var us=(r,e,t)=>{const n=[];let s=null,i=null;const c=r.sort((h,p)=>hs(h,p,t));for(const h of c)ls(h,e,t)?(i=h,s||(s=h)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const l=[];for(const[h,p]of n)h===p?l.push(h):!p&&h===c[0]?l.push("*"):p?h===c[0]?l.push(`<=${p}`):l.push(`${h} - ${p}`):l.push(`>=${h}`);const o=l.join(" || "),a=typeof e.raw=="string"?e.raw:String(e);return o.length<a.length?o:e};const vt=_(),be=me(),{ANY:De}=be,ie=ve,xe=x,ps=(r,e,t={})=>{if(r===e)return!0;r=new vt(r,t),e=new vt(e,t);let n=!1;e:for(const s of r.set){for(const i of e.set){const c=fs(s,i,t);if(n=n||c!==null,c)continue e}if(n)return!1}return!0},ds=[new be(">=0.0.0-0")],gt=[new be(">=0.0.0")],fs=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===De){if(e.length===1&&e[0].semver===De)return!0;t.includePrerelease?r=ds:r=gt}if(e.length===1&&e[0].semver===De){if(t.includePrerelease)return!0;e=gt}const n=new Set;let s,i;for(const f of r)f.operator===">"||f.operator===">="?s=It(s,f,t):f.operator==="<"||f.operator==="<="?i=Nt(i,f,t):n.add(f.semver);if(n.size>1)return null;let c;if(s&&i&&(c=xe(s.semver,i.semver,t),c>0||c===0&&(s.operator!==">="||i.operator!=="<=")))return null;for(const f of n){if(s&&!ie(f,String(s),t)||i&&!ie(f,String(i),t))return null;for(const m of e)if(!ie(f,String(m),t))return!1;return!0}let l,o,a,h,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,R=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;p&&p.prerelease.length===1&&i.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(const f of e){if(h=h||f.operator===">"||f.operator===">=",a=a||f.operator==="<"||f.operator==="<=",s){if(R&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===R.major&&f.semver.minor===R.minor&&f.semver.patch===R.patch&&(R=!1),f.operator===">"||f.operator===">="){if(l=It(s,f,t),l===f&&l!==s)return!1}else if(s.operator===">="&&!ie(s.semver,String(f),t))return!1}if(i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator==="<"||f.operator==="<="){if(o=Nt(i,f,t),o===f&&o!==i)return!1}else if(i.operator==="<="&&!ie(i.semver,String(f),t))return!1}if(!f.operator&&(i||s)&&c!==0)return!1}return!(s&&a&&!i&&c!==0||i&&h&&!s&&c!==0||R||p)},It=(r,e,t)=>{if(!r)return e;const n=xe(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},Nt=(r,e,t)=>{if(!r)return e;const n=xe(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};var Es=ps;const Me=re,Rt=ce,ms=P,Tt=We,vs=Q,gs=mr,Is=Ir,Ns=Rr,Rs=Lr,Ts=Or,Ls=$r,ys=br,ws=Mr,Os=x,As=Gr,Ss=Br,$s=Te,Cs=Hr,Ps=qr,bs=pe,Ds=Le,xs=rt,Ms=nt,_s=ye,Us=we,Fs=st,Gs=In,ks=me(),js=_(),Bs=ve,Xs=Dn,Vs=Un,zs=jn,Hs=Vn,Ws=Wn,Ys=Pe,qs=ns,Ks=os,Zs=cs,Qs=us,Js=Es;var ei={parse:vs,valid:gs,clean:Is,inc:Ns,diff:Rs,major:Ts,minor:Ls,patch:ys,prerelease:ws,compare:Os,rcompare:As,compareLoose:Ss,compareBuild:$s,sort:Cs,rsort:Ps,gt:bs,lt:Ds,eq:xs,neq:Ms,gte:_s,lte:Us,cmp:Fs,coerce:Gs,Comparator:ks,Range:js,satisfies:Bs,toComparators:Xs,maxSatisfying:Vs,minSatisfying:zs,minVersion:Hs,validRange:Ws,outside:Ys,gtr:qs,ltr:Ks,intersects:Zs,simplifyRange:Qs,subset:Js,SemVer:ms,re:Me.re,src:Me.src,tokens:Me.t,SEMVER_SPEC_VERSION:Rt.SEMVER_SPEC_VERSION,RELEASE_TYPES:Rt.RELEASE_TYPES,compareIdentifiers:Tt.compareIdentifiers,rcompareIdentifiers:Tt.rcompareIdentifiers};const Lt=Xt(ei);var A;(function(r){r.blue="blue",r.nanoS="nanoS",r.nanoSP="nanoSP",r.nanoX="nanoX",r.stax="stax",r.europa="europa"})(A||(A={}));const _e={[A.blue]:{id:A.blue,productName:"Ledger\xA0Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:r=>4*1024},[A.nanoS]:{id:A.nanoS,productName:"Ledger\xA0Nano\xA0S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:r=>{var e;return Lt.lt((e=Lt.coerce(r))!==null&&e!==void 0?e:"","2.0.0")?4*1024:2*1024}},[A.nanoX]:{id:A.nanoX,productName:"Ledger\xA0Nano\xA0X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:r=>4*1024,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[A.nanoSP]:{id:A.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1533*1024,masks:[856686592],getBlockSize:r=>32},[A.stax]:{id:A.stax,productName:"Ledger\xA0Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1533*1024,masks:[857735168],getBlockSize:r=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},[A.europa]:{id:A.europa,productName:"Ledger Europa",productIdMM:112,legacyUsbProductId:7,usbOnly:!1,memorySize:1533*1024,masks:[858783744],getBlockSize:r=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}};A.blue,A.nanoS,A.nanoSP,A.nanoX,A.stax,A.europa;const yt=Object.values(_e),wt=11415,Ot=r=>{const e=yt.find(n=>n.legacyUsbProductId===r);if(e)return e;const t=r>>8;return yt.find(n=>n.productIdMM===t)},ti=[],At={};for(const r in _e){const e=_e[r],{bluetoothSpec:t}=e;if(t)for(let n=0;n<t.length;n++){const s=t[n];ti.push(s.serviceUuid),At[s.serviceUuid]=At[s.serviceUuid.replace(/-/g,"")]=Object.assign({deviceModel:e},s)}}var Ue=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(c){c(i)})}return new(t||(t=Promise))(function(i,c){function l(h){try{a(n.next(h))}catch(p){c(p)}}function o(h){try{a(n.throw(h))}catch(p){c(p)}}function a(h){h.done?i(h.value):s(h.value).then(l,o)}a((n=n.apply(r,e||[])).next())})};const ri=[{vendorId:wt}];function St(){return Ue(this,void 0,void 0,function*(){return yield navigator.usb.requestDevice({filters:ri})})}function Fe(){return Ue(this,void 0,void 0,function*(){return(yield navigator.usb.getDevices()).filter(r=>r.vendorId===wt)})}function ni(){return Ue(this,void 0,void 0,function*(){const r=yield Fe();return r.length>0?r[0]:St()})}const si=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function");var W=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(c){c(i)})}return new(t||(t=Promise))(function(i,c){function l(h){try{a(n.next(h))}catch(p){c(p)}}function o(h){try{a(n.throw(h))}catch(p){c(p)}}function a(h){h.done?i(h.value):s(h.value).then(l,o)}a((n=n.apply(r,e||[])).next())})};const ii=1,$t=3;class j extends ge{constructor(e,t){super(),this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this._disconnectEmitted=!1,this._emitDisconnect=n=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",n))},this.device=e,this.interfaceNumber=t,this.deviceModel=Ot(e.productId)}static request(){return W(this,void 0,void 0,function*(){const e=yield St();return j.open(e)})}static openConnected(){return W(this,void 0,void 0,function*(){const e=yield Fe();return e.length===0?null:j.open(e[0])})}static open(e){return W(this,void 0,void 0,function*(){yield e.open(),e.configuration===null&&(yield e.selectConfiguration(ii)),yield Ct(e);const t=e.configurations[0].interfaces.find(({alternates:c})=>c.some(l=>l.interfaceClass===255));if(!t)throw new je("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const n=t.interfaceNumber;try{yield e.claimInterface(n)}catch(c){throw yield e.close(),new je(c.message)}const s=new j(e,n),i=c=>{e===c.device&&(navigator.usb.removeEventListener("disconnect",i),s._emitDisconnect(new zt))};return navigator.usb.addEventListener("disconnect",i),s})}close(){return W(this,void 0,void 0,function*(){yield this.exchangeBusyPromise,yield this.device.releaseInterface(this.interfaceNumber),yield Ct(this.device),yield this.device.close()})}exchange(e){return W(this,void 0,void 0,function*(){return yield this.exchangeAtomicImpl(()=>W(this,void 0,void 0,function*(){const{channel:t,packetSize:n}=this;ke("apdu","=> "+e.toString("hex"));const s=er(t,n),i=s.makeBlocks(e);for(let o=0;o<i.length;o++)yield this.device.transferOut($t,i[o]);let c,l;for(;!(c=s.getReducedResult(l));){const o=yield this.device.transferIn($t,n),a=b.from(o.data.buffer);l=s.reduceResponse(l,a)}return ke("apdu","<= "+c.toString("hex")),c})).catch(t=>{throw t&&t.message&&t.message.includes("disconnected")?(this._emitDisconnect(t),new Ht(t.message)):t})})}setScrambleKey(){}}j.isSupported=si,j.list=Fe,j.listen=r=>{let e=!1;ni().then(n=>{if(!e){const s=Ot(n.productId);r.next({type:"add",descriptor:n,deviceModel:s}),r.complete()}},n=>{window.DOMException&&n instanceof window.DOMException&&n.code===18?r.error(new qt(n.message)):r.error(new Wt(n.message))});function t(){e=!0}return{unsubscribe:t}};function Ct(r){return W(this,void 0,void 0,function*(){try{yield r.reset()}catch(e){console.warn(e)}})}export{j as default};
