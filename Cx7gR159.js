function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as t,s as r,Y as o,ck as Z,cl as p,ap as aa,a9 as ea,z as ta,cu as sa,$ as y,aq as S,ar as E,t as f,ao as R,ab as ia,cp as h,cs as O,at as C,ak as na,av as H,am as _,cm as F,cj as M,cv as U,__tla as ra}from"./assets/index-CyIKZwcA.js";let V,K,b,L,ca=Promise.all([(()=>{try{return ra}catch{}})()]).then(async()=>{(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c=new Error().stack;c&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[c]="8bc56d27-b953-4e7c-bd00-15194301baeb",a._sentryDebugIdIdentifier="sentry-dbid-8bc56d27-b953-4e7c-bd00-15194301baeb")}catch{}})(),V=(a=>(a.Unstake="unstake",a.Deposit="deposit",a))(V||{});let I;K=a=>{const[c,w]=t.useState(new r({value:0,decimal:o.ETH})),m=t.useCallback(async()=>{if(a){const k=await Z(p.STAKING_THOR),{amount:d}=await k.userInfo(0,a);w(r.fromBigInt(d,o.ETH))}},[a]);return t.useEffect(()=>{m()},[m]),{stakedThorAmount:c,hasStakedV1Thor:c.gt(0)}},I=async()=>{const a=await(await M(h[O.THOR])).balanceOf(h[O.VTHOR]);return r.fromBigInt(a,18)},b=async(a,c)=>{try{const w=await(await M(U[p.VTHOR].address,U[p.VTHOR].abi))[a](...c??[])||0;return r.fromBigInt(w,o.ETH)}catch{return new r({value:0,decimal:o.ETH})}},L=()=>{const a=aa(),[c,w]=t.useState(new r({value:0,decimal:o.ETH})),[m,k]=t.useState(new r({value:0,decimal:o.ETH})),[d,N]=t.useState(new r({value:0,decimal:o.ETH})),[j,$]=t.useState(new r({value:0,decimal:o.ETH})),[z,A]=t.useState(new r({value:0,decimal:o.ETH})),{getWalletAddress:x}=ea(),s=t.useMemo(()=>x(ta.Ethereum),[x]),D=t.useCallback(async()=>{const e=await I();w(e);const i=await sa.get("https://api.thorswap.net/aggregator/stats/supply/circulating");k(new r(i))},[]),B=t.useCallback(async()=>{const e=await b("totalSupply");N(e)},[]),g=t.useCallback((e=!1)=>e?c.eqValue(0)?new r(1):d.div(c):d.eqValue(0)?new r(1):c.div(d),[c,d]),G=t.useCallback((e=!1)=>{const i=g(!e);return e?`1 vTHOR = ${i.toSignificant(4)} THOR`:`1 THOR = ${i.toSignificant(4)} vTHOR`},[g]),W=t.useCallback(async()=>{if(!s)return;const e=y.fromChainOrSignature("ETH.THOR"),i=S();a(E({id:i,from:s,label:`${f("txManager.approve")} ${e.ticker}`,inChain:e.chain,type:R.ETH_APPROVAL}));const{approveAssetValue:u}=await(await ia(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();try{const l=await u(e,h[O.VTHOR]);typeof l=="string"&&a(C({id:i,txid:l}))}catch(l){na(l),a(H({id:i,status:"error"})),_(f("notification.approveFailed"),void 0,void 0,l)}},[s,a]),Y=t.useCallback(e=>e.mul(g(!0)).toSignificant(),[g]),J=t.useCallback(e=>e.mul(g()).toSignificant(),[g]),P=t.useCallback(async()=>{if(!s){A(new r({value:0,decimal:o.ETH}));return}const e=await b("balanceOf",[s]);A(e)},[s]),q=t.useCallback(async()=>{if(!s){$(new r({value:0,decimal:o.ETH}));return}const e=await b("balanceOf",[s]),i=await b("previewRedeem",[e]);return $(i)},[s]),v=t.useCallback(()=>{D(),B(),q(),s&&P()},[D,B,q,s,P]),Q=t.useCallback(async(e,i)=>{if(e.eq(0))return;const u=S(),l=y.fromChainOrSignature("ETH.THOR",e.getValue("string"));if(a(E({id:u,from:s,label:`${f("txManager.stake")} ${e.toSignificant()} ${l.ticker}`,inChain:l.chain,type:R.ETH_STATUS})),!s)throw new Error("No ETH address");let T;try{T=await F(p.VTHOR,"deposit",[e.getBaseValue("bigint"),i])}catch(n){return _(f("notification.stakeFailed"),(n==null?void 0:n.message)||(n==null?void 0:n.toString()),void 0,n),a(H({id:u,status:"error"}))}a(T?C({id:u,txid:T}):H({id:u,status:"mined"}))},[a,s]),X=t.useCallback(async(e,i)=>{const u=y.fromChainOrSignature("ETH.vTHOR",e.getValue("string")),l=S();a(E({id:l,from:s,label:`${f("txManager.unstake")} ${e.toSignificant()} ${u.ticker}`,inChain:u.chain,type:R.ETH_STATUS}));let T;try{T=await F(p.VTHOR,"redeem",[e.getBaseValue("bigint"),i,i])}catch(n){return _(f("notification.stakeFailed"),(n==null?void 0:n.message)||(n==null?void 0:n.toString()),void 0,n),a(H({id:l,status:"error"}))}a(T?C({id:l,txid:T}):H({id:l,status:"mined"}))},[a,s]);return t.useEffect(()=>v(),[v]),{thorStaked:c,thorRedeemable:j,stakePercentageRate:m.gt(0)?c.div(m).mul(100).getValue("number").toFixed(2):0,vthorBalance:z,vthorTS:d,getRate:g,getRateString:G,approveTHOR:W,handleRefresh:v,previewDeposit:Y,previewRedeem:J,stakeThor:Q,unstakeThor:X}}});export{V as S,ca as __tla,K as a,b as g,L as u};
