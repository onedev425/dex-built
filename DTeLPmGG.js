import{P as j,r,j as s,H as k,p as L,t as a,D as S,bt as T,I,a7 as D,c3 as g,s as m,c0 as $,aE as z,c8 as P,c9 as R,q as p,bg as M,T as V,br as F,L as W}from"./assets/index-CyIKZwcA.js";import{S as E}from"./CYxzY4q6.js";import{T as B}from"./D07MMJG9.js";import{g as w,u as O,a as Y,S as q}from"./omI6iCAS.js";import{n as N}from"./BuU0OJJZ.js";import"./mMiU1HvE.js";import"./G016iS_E.js";import"./C20jg5MW.js";import"./BfMEEv4T.js";import"./BDCxTHDM.js";import"./rzhudTEk.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="7ec25cb8-fc01-4a1a-ab3b-5d129e5d8dbb",t._sentryDebugIdIdentifier="sentry-dbid-7ec25cb8-fc01-4a1a-ab3b-5d129e5d8dbb")}catch{}})();const G=t=>{const{setWatchList:o,nodeWatchList:i}=j(),d=r.useCallback(e=>{if(i.includes(e)){const n=i.filter(l=>l!==e);o(n)}else o([e,...i])},[o,i]);return r.useMemo(()=>[{id:"Bookmark",Header:()=>s.jsx(k,{className:"group-hover:text-dark-typo-primary",color:"secondary",iconName:"refresh",onClick:t,size:12}),align:"center",disableSortBy:!0,accessor:e=>e,Cell:({cell:{value:e}})=>{const n=i.includes(e.node_address);return s.jsx(L,{className:"w-fit m-auto",content:n?a("views.nodes.removeFromList"):a("views.nodes.addToWatch"),children:s.jsx(k,{color:n?"pink":"secondary",iconHoverHighlight:!1,iconName:n?"heartFilled":"heart",onClick:l=>{d(e.node_address),l.stopPropagation(),l.preventDefault()},size:16})})}},{id:"Address",Header:()=>a("common.address"),align:"center",accessor:e=>e.node_address,disableSortBy:!0,Cell:({cell:{value:e}})=>s.jsx(S,{className:"!px-2 justify-items-start",onClick:n=>{T(e),n.stopPropagation(),n.preventDefault()},rightIcon:s.jsx(I,{name:"copy",size:16}),tooltip:a("common.copy"),tooltipClasses:"mx-auto w-fit",transform:"none",variant:"borderlessTint",children:D(e,6,4)})},{id:"Version",Header:()=>a("views.nodes.version"),accessor:"version"},{id:"IP",Header:()=>"IP",accessor:"ip_address",minScreenSize:g.md,disableSortBy:!0},{id:"Rewards",Header:()=>a("views.nodes.rewards"),accessor:e=>new m(e.current_award).div(1e8),Cell:({cell:{value:e}})=>e.toCurrency(""),minScreenSize:g.md,sortType:w("Rewards")},{id:"Slash",Header:()=>a("views.nodes.slash"),accessor:e=>new m(e.slash_points),Cell:({cell:{value:e}})=>e.toCurrency(""),minScreenSize:g.md,sortType:w("Slash")},{id:"Bond",Header:()=>a("views.nodes.bond"),accessor:e=>new m(e.total_bond).div(1e8),Cell:({cell:{value:e}})=>e.toCurrency(""),sortType:w("Bond")},{id:"ActiveBlock",Header:()=>"Active Block",accessor:e=>new m(e.active_block_height),Cell:({cell:{value:e}})=>e.toCurrency(""),minScreenSize:g.md,sortType:w("ActiveBlock")}],[t,i,d])},K=()=>{const t=O(),{data:o}=$(),{totalBond:i,totalActiveBond:d,totalStandbyBond:e,bondingAPYLabel:n}=Y(),l=r.useMemo(()=>{var b;return[{iconName:"chartPie",color:"yellow",label:a("views.nodes.totalBond"),value:`${t(i.getValue("string"))} (${i.toAbbreviation(1)} \u16B1)`,tooltip:a("views.nodes.detail.totalBond")},{iconName:"lightning",color:"pink",label:a("views.nodes.detail.activeBond"),value:`${t(d.getValue("string"))} (${d.toAbbreviation(1)} \u16B1)`,tooltip:a("views.nodes.detail.activeBondTooltip")},{iconName:"wifi",color:"red",label:a("views.nodes.detail.standbyBond"),value:`${t(e.getValue("string"))} (${e.toAbbreviation(1)} \u16B1)`,tooltip:a("views.nodes.detail.standbyBondTooltip")},{iconName:"chartArea",color:"purple",label:a("views.nodes.detail.bondingAPY"),value:n},{iconName:"chartArea2",color:"green",label:a("views.nodes.detail.dailyBondRewards"),value:`${t(new m({value:((b=o==null?void 0:o.blockRewards)==null?void 0:b.bondReward)||"0",decimal:8}).mul(14400).getValue("string"))} `},{iconName:"fire",color:"blueLight",label:a("views.nodes.detail.nextChurnHeight"),value:new m((o==null?void 0:o.nextChurnHeight)||0).getValue("number").toFixed(1)}]},[t,i,d,e,n,o]);return s.jsx(q,{scrollable:!0,itemWidth:265,list:l})},_=[{id:"Bond",desc:!0}],Q=()=>{const t=z(),{nodeWatchList:o}=j(),[i,d]=r.useState(0),[e,n]=r.useState(""),{data:l,refetch:b,isLoading:y,isFetching:x}=P(),f=G(b),v=r.useMemo(()=>l||[],[l]),H=r.useCallback(c=>{n(c.target.value)},[]),u=r.useMemo(()=>v.filter(c=>o.includes(c.node_address)),[o,v]),A=r.useMemo(()=>{const c=v.filter(h=>h.status===N[i]);return e?c.filter(h=>h.node_address.toLowerCase().includes(e.toLowerCase())):c},[v,e,i]),C=r.useCallback(({original:c})=>{t(R(c.node_address))},[t]);return s.jsxs(p,{col:!0,children:[s.jsx(M,{content:a("views.nodes.description"),keywords:" THORChain, Nodes, Overview, Management, DEFI, DEX",title:a("views.nodes.title")}),s.jsx(K,{}),(u==null?void 0:u.length)>0&&s.jsxs(p,{col:!0,className:"mt-4 mb-4",children:[s.jsx(V,{className:"mb-2 text-light-typo-primary dark:text-dark-typo-primary",children:`${a("views.nodes.watchList")} (${u.length})`}),s.jsx(B,{sortable:!0,columns:f,data:u,initialSort:_,loading:y||x,onRowClick:C})]}),s.jsxs(p,{col:!0,align:"start",className:"md:my-8 gap-4 !my-4 flex-grow lg:flex-row lg:justify-between",justify:"between",children:[s.jsxs(p,{alignCenter:!0,justify:"between",children:[s.jsx("div",{className:"mx-2.5",children:s.jsx(F,{border:"rounded",icon:"search",onChange:H,placeholder:"Search node address",value:e})}),s.jsx(W,{className:"no-underline",to:"/node-manager",children:s.jsx(S,{size:"sm",variant:"outlineSecondary",children:a("common.manage")})})]}),s.jsx("div",{className:"flex mx-[10px]",children:s.jsx(E,{activeIndex:i,onChange:d,options:N})})]}),s.jsx(B,{sortable:!0,columns:f,data:A,initialSort:_,loading:y||x,onRowClick:C})]})},X=Q;export{X as default};
