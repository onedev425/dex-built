function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as l,t,j as e,q as r,T as b,A as ne,R as S,aE as $e,$ as Ye,O as Be,h as Ve,bR as Oe,s as w,Y as re,bS as Ue,bT as ze,E as We,p as He,I as k,w as Y,k as Ge,D as N,bU as Ke,bV as Fe,a9 as de,ag as Xe,ap as Je,ab as Qe,aq as oe,ar as le,bB as ce,at as ue,bE as pe,am as B,av as V,bW as me,aK as O,l as he,z as K,M as Ze,aM as F,bA as R,aI as ye,bf as es,L as ss,bX as ts,__tla as is}from"./assets/index-CyIKZwcA.js";import{G as as}from"./Cse5bgR0.js";import{I as U}from"./nkxDqpDa.js";import{A as ns}from"./TP_WktaR.js";import{P as y,L as M}from"./DKb0irD5.js";import{L as rs}from"./B0Nsn_Oa.js";import{C as ge,__tla as ds}from"./VQNeEiYk.js";import{P as os}from"./GQQXxAVl.js";import{V as ls}from"./DA3rLf5F.js";import{u as cs}from"./BlqyVemR.js";import{u as us,a as ps,b as ms,A as hs,P as ys,__tla as gs}from"./BDd2-1bt.js";import{u as xs}from"./rzhudTEk.js";import{g as xe}from"./DYrZbK8R.js";import{u as As,__tla as fs}from"./BQokClGM.js";import"./BGeRo-1L.js";import"./CkVRNEhN.js";import"./nBoaRR4P.js";import"./C20jg5MW.js";import"./CzdZMSiN.js";import"./CWmyRVe8.js";import"./l25LWlPl.js";import"./DVVdR7oe.js";import"./C2yJ0wdw.js";import"./Cm9YPx6u.js";import{__tla as js}from"./CJ_Ik3qV.js";let Ae,vs=Promise.all([(()=>{try{return is}catch{}})(),(()=>{try{return ds}catch{}})(),(()=>{try{return gs}catch{}})(),(()=>{try{return fs}catch{}})(),(()=>{try{return js}catch{}})()]).then(async()=>{(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[i]="de3922d6-3adb-4fad-ad78-7265f09ad04f",s._sentryDebugIdIdentifier="sentry-dbid-de3922d6-3adb-4fad-ad78-7265f09ad04f")}catch{}})();let X,J,Q,Z,ee;X=l.memo(({asset:s,assetShare:i,contentRef:d,lastAddedDate:m,maxHeightStyle:x,poolShare:p,runeShare:A,shareType:a,runePending:h,assetPending:c,tickerPending:f})=>{const o=l.useMemo(()=>{const u=[{label:t("views.liquidity.poolShare"),value:p==="0 %"?"~0 %":p}];return h.gt(0)&&u.push({label:t("views.liquidity.runePending"),value:h.toSignificant(6)}),c.gt(0)&&u.push({label:t("views.liquidity.assetPending"),value:c.toSignificant(6)}),[y.SYM,y.ASSET_ASYM].includes(a)&&u.unshift({label:`${s.ticker} ${t("views.liquidity.share")}`,value:e.jsxs(r,{center:!0,className:"gap-2",children:[e.jsx(b,{children:`${i.toSignificant(6)} ${s.ticker}`}),e.jsx(ne,{asset:s,size:24})]})}),[y.SYM,y.RUNE_ASYM].includes(a)&&u.unshift({label:`${S.symbol} ${t("views.liquidity.share")}`,value:e.jsxs(r,{center:!0,className:"gap-2",children:[e.jsx(b,{children:`${A.toSignificant(4)} ${S.symbol}`}),e.jsx(ne,{asset:S,size:24})]})}),u.push({label:t("views.liquidity.lastAdded"),value:m}),u},[s,i,m,p,A,a,h,c]),n=l.useMemo(()=>{switch(a){case y.SYM:return`RUNE + ${s.ticker} LP`;case y.ASSET_ASYM:return`${s.ticker} LP`;case y.RUNE_ASYM:return"RUNE LP"}},[s.ticker,a]);return e.jsxs(r,{col:!0,className:"overflow-hidden ease-in-out transition-all",ref:d,style:x,children:[!!f&&e.jsx(b,{className:"brightness-90",textStyle:"caption",variant:"yellow",children:t("pendingLiquidity.content",{asset:f})}),e.jsxs(r,{col:!0,className:"self-stretch pt-1 pb-2",children:[e.jsx(r,{alignCenter:!0,row:!0,justify:"between",children:e.jsx(b,{className:"px-1.5",textStyle:"caption",variant:"cyan",children:n})}),e.jsx(U,{horizontalInset:!0,items:o,size:"sm"})]})]})}),J=({assetPending:s,dateLastAdded:i,poolDetail:{asset:d,runeDepth:m,assetDepth:x,units:p},runePending:A,shareType:a,sharedUnits:h,withFooter:c})=>{const f=$e(),o=Ye.fromStringSync(d),{isActive:n,contentRef:u,toggle:T,maxHeightStyle:D}=Be(),{isMdActive:I}=Ve(),L=l.useMemo(()=>Oe(new w(h).div(p).getValue("string")),[p,h]),[_,g]=l.useMemo(()=>{const v=a===y.ASSET_ASYM,$=a===y.RUNE_ASYM,E={liquidityUnits:h,poolUnits:p,assetDepth:x,runeDepth:m};if(!(v||$))return[w.fromBigInt(BigInt(E.runeDepth),re.THOR).mul(h).div(p),w.fromBigInt(BigInt(E.assetDepth),re.THOR).mul(h).div(p)];const z=Ue(E).getValue("string"),W=ze(E).getValue("string");return $?[new w(W),new w(0)]:[new w(0),new w(z)]},[p,h,m,x,a]),j=l.useMemo(()=>!!(Number(A)||Number(s)),[A,s]),C=j&&(Number(A)>0?o.ticker:S.ticker)||"",q=l.useMemo(()=>{switch(a){case y.SYM:return`RUNE + ${o.ticker} LP`;case y.ASSET_ASYM:return`${o.ticker} LP`;case y.RUNE_ASYM:return"RUNE LP"}},[o.ticker,a]);return e.jsx(r,{col:!0,justifyCenter:!0,className:"self-stretch",children:e.jsxs(We,{className:"!rounded-2xl p-2 !gap-1",type:j?"warn":"primary",children:[e.jsxs(r,{alignCenter:!0,className:"cursor-pointer",justify:"between",onClick:T,children:[e.jsxs(r,{center:!0,children:[j&&e.jsx(He,{content:t("pendingLiquidity.pendingLiquidity"),children:e.jsx(k,{className:"mr-3",color:"yellow",name:"warn",size:24})}),e.jsx(r,{col:!0,children:e.jsx(ns,{inline:!0,asset1:o,asset2:S,size:n&&I?40:32})}),e.jsx(b,{className:Y("mx-1 md:mx-3 !transition-all",n?"text-body md:!text-subtitle1":"!text-body"),fontWeight:"semibold",children:q})]}),e.jsxs(r,{center:!0,className:"gap-2",children:[e.jsxs(r,{col:!0,align:"end",children:[e.jsx(b,{className:Y("!transition-all",n?"!text-body":"!text-caption"),fontWeight:"normal",children:` ${t("views.liquidity.poolShare")}`}),e.jsx(b,{className:Y("!transition-all",n?"!text-subtitle1":"!text-body"),fontWeight:"bold",children:L==="0 %"?"~0 %":L})]}),e.jsx(k,{className:Y("transform duration-300 ease",{"-rotate-180":n}),color:"secondary",name:"chevronDown"})]})]}),e.jsx(X,{asset:o,assetPending:w.fromBigInt(BigInt(s),8),assetShare:g,contentRef:u,lastAddedDate:Ge.unix(Number(i)).format("YYYY-MM-DD"),maxHeightStyle:D,poolShare:L,runePending:w.fromBigInt(BigInt(A),8),runeShare:_,shareType:a,tickerPending:C}),c&&e.jsxs(r,{justifyCenter:!0,className:"space-x-6 md:pr-0",children:[e.jsx(N,{stretch:!0,className:"px-8 md:px-12",onClick:()=>f(Ke(o)),variant:"primary",children:j?t("views.liquidity.completeButton"):t("views.liquidity.addButton")}),e.jsx(N,{stretch:!0,className:"px-8 md:px-12",onClick:()=>f(Fe(o)),variant:"secondary",children:t("common.withdraw")})]})]})})},Q=({poolAssetValue:s,runeAssetValue:i,poolAddress:d,assetAddress:m,runeAddress:x,symmetric:p,isOpened:A,onClose:a})=>{const{isWalletLoading:h,getWallet:c}=de(),{setIsConnectModalOpen:f}=Xe(),o=Je(),[n,u]=l.useState(i?"addRune":"addAsset"),T=l.useCallback(async()=>{if(n==="completed")return a();const{thorchain:g}=await(await Qe(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();if(!g)throw new Error("SwapKit client not found");const j=p||!!(i&&s),C=oe(),q=oe();if(n==="addRune"&&i){u("pendingRune"),o(le({id:C,type:ce.TC_LP_ADD,inChain:i.chain,label:t("txManager.addAmountAsset",{asset:i.ticker,amount:i.toSignificant(6)})}));try{const v=await g.addLiquidityPart({address:m,assetValue:i,poolAddress:d,symmetric:j});v?(o(ue({id:C,txid:v,status:"pending"})),u(j?"addAsset":"completed"),pe(t("txManager.addLiquidity"),t("txManager.addedAmountAsset",{asset:i.ticker,amount:i.toSignificant(6)}))):(u("addRune"),B(t("txManager.addLiquidity"),t("txManager.failed")),o(V({id:C,status:"error"})))}catch(v){u("addRune"),B(t("txManager.addLiquidity"),t("txManager.failed"),void 0,v),o(V({id:C,status:"error"}))}}if(n==="addAsset"&&s){u("pendingAsset"),o(le({id:q,type:ce.TC_LP_ADD,inChain:s.chain,label:t("txManager.addAmountAsset",{asset:s.ticker,amount:s.toSignificant(6)})}));try{const v=await g.addLiquidityPart({address:x,assetValue:s,poolAddress:d,symmetric:j});v?(u("completed"),o(ue({id:q,txid:v,status:"pending"})),pe(t("txManager.addLiquidity"),t("txManager.addedAmountAsset",{asset:s.ticker,amount:s.toSignificant(6)}))):(u("addAsset"),B(t("txManager.addLiquidity"),t("txManager.failed")),o(V({id:q,status:"error"})))}catch(v){u("addAsset"),B(t("txManager.addLiquidity"),t("txManager.failed"),void 0,v),o(V({id:q,status:"error"}))}}},[n,a,p,i,s,o,m,d,x]),D=l.useMemo(()=>{const g=[];return i&&g.push({label:e.jsxs(r,{center:!0,children:[e.jsx(r,{className:"mr-2",children:n==="pendingRune"?e.jsx(me,{}):n==="addRune"?e.jsx(k,{color:"yellow",name:"inIcon"}):e.jsx(k,{color:"green",name:"checkBoxChecked"})}),e.jsx(b,{children:t("views.addLiquidity.addAssetStatusLabel",{asset:i.ticker})})]}),value:`${i.toSignificant(6)} ${i.ticker}`}),s&&g.push({label:e.jsxs(r,{center:!0,children:[e.jsx(r,{className:"mr-2",children:n==="completed"?e.jsx(k,{color:"green",name:"checkBoxChecked"}):n==="pendingAsset"?e.jsx(me,{}):e.jsx(k,{color:"yellow",name:"inIcon"})}),e.jsx(b,{children:t("views.addLiquidity.addAssetStatusLabel",{asset:s.ticker})})]}),value:`${s.toSignificant(6)} ${s.ticker}`}),g},[s,i,n]),I=l.useMemo(()=>{switch(n){case"addRune":return t("views.addLiquidity.addAssetLabel",{asset:i==null?void 0:i.ticker});case"addAsset":return t("views.addLiquidity.addAssetLabel",{asset:s==null?void 0:s.ticker});case"pendingAsset":return t("views.addLiquidity.pendingAssetLabel",{asset:s==null?void 0:s.ticker});case"pendingRune":return t("views.addLiquidity.pendingAssetLabel",{asset:i==null?void 0:i.ticker});case"completed":return t("common.close")}},[s,i,n]),L=l.useMemo(()=>{var g,j;switch(n){case"addRune":case"pendingRune":return((g=c(K.THORChain))==null?void 0:g.walletType)===O.LEDGER?t("views.addLiquidity.openLedgerWallet",{chain:he(K.THORChain),asset:S.ticker,wallet:O.LEDGER}):void 0;case"addAsset":case"pendingAsset":return s&&((j=c(s.chain))==null?void 0:j.walletType)===O.LEDGER?t("views.addLiquidity.openLedgerWallet",{chain:he(s.chain),asset:s.ticker,wallet:O.LEDGER}):void 0;case"completed":return}},[c,s,n]),_=l.useMemo(()=>n==="completed",[n]);return e.jsx(Ze,{isOpened:A,onClose:a,title:t("views.addLiquidity.lpProgressModalTitle"),children:e.jsxs(r,{col:!0,children:[e.jsx(U,{items:D}),e.jsx(r,{className:"py-4",children:e.jsx(F,{content:t("views.addLiquidity.lpProgressModalDescription"),type:"info"})}),L&&e.jsx(r,{className:"py-4",children:e.jsx(F,{content:L,type:"warn"})}),e.jsxs(r,{row:!0,className:"pt-4",justify:_?"around":"between",children:[!_&&e.jsx(N,{onClick:()=>f(!0),size:"md",variant:"outlineSecondary",children:t("common.changeWallet")}),e.jsx(N,{loading:h||["pendingAsset","pendingRune"].includes(n),onClick:T,size:_?"lg":"md",variant:"fancy",children:I})]})]})})},Z=({poolAsset:s})=>{const{getMaxBalance:i,isWalletAssetConnected:d}=As(),{wallet:m}=de(),[x,p]=l.useState(s==null?void 0:s.set(0)),[A,a]=l.useState(S.set(0)),h=l.useMemo(()=>m[(s==null?void 0:s.chain)||R.chain]?xe(s||R,m):(s||R).set(10**9),[s,m]);l.useEffect(()=>{s&&i(s).then(f=>{p(f||ye)})},[s,i]),l.useEffect(()=>{i(S).then(f=>a(f||ye))},[i]);const c=l.useMemo(()=>m[K.THORChain]?xe(S,m):S.set(10**9),[m]);return{isWalletAssetConnected:d,poolAssetBalance:x,maxPoolAssetBalance:h,runeBalance:A,maxRuneBalance:c}},ee=s=>s===M.ASSET?y.ASSET_ASYM:s===M.RUNE?y.RUNE_ASYM:y.SYM,Ae=()=>{const{liquidityType:s,setLiquidityType:i}=us(),{poolAsset:d,handleSelectPoolAsset:m}=ps(),{pools:x,allPoolAssets:p}=xs(),A=Z({poolAsset:d}),a=es(),h=cs(),c=l.useMemo(()=>x.find(P=>P.asset===(d||R).toString().toUpperCase())||x[0],[x,d]),f=l.useMemo(()=>p.map(P=>h.find(G=>G.asset.eqAsset(P))||{asset:P,balance:void 0}).sort((P,G)=>+(G.asset.type==="Native")-+(P.asset.type==="Native")),[h,p]),{addLiquiditySlip:o,approveConfirmInfo:n,assetAddress:u,asymmTipVisible:T,btnLabel:D,confirmInfo:I,depositAssets:L,feeInUSD:_,symmetric:g,handleAddLiquidity:j,handleApprove:C,handleChangeAssetAmount:q,handleChangeRuneAmount:v,handleConfirmProgressModal:$,handleConfirmApprove:E,handleSelectLiquidityType:z,isApproveRequired:W,isAssetApproveLoading:fe,isAssetPending:je,isDepositAvailable:ve,isRunePending:Se,isValidDeposit:se,isWalletConnected:we,lpMemberData:H,lpProgressModal:te,poolAddress:be,poolAssetInput:ie,poolAssetValue:Me,poolShareEst:Le,rate:Ce,runeAddress:qe,runeAssetInput:ae,runeAssetValue:ke,setAsymmTipVisible:Re,setIsConnectModalOpen:_e,setLpProgressModal:Ne,setVisibleApproveModal:Ee,setVisibleConfirmModal:Pe,visibleApproveModal:Te,visibleConfirmModal:De}=ms({depositAssetsBalance:A,liquidityType:s,poolAsset:d||R,poolData:c,setLiquidityType:i}),Ie=l.useMemo(()=>!!Object.keys(H||{}).length,[H]);return e.jsxs(os,{description:t("views.addLiquidity.description"),header:e.jsx(ls,{actionsComponent:e.jsx(as,{transactionMode:!0}),title:`${t("common.addLiquidity")} - ${d==null?void 0:d.ticker}${(c==null?void 0:c.status)==="staged"?" (Staged)":""}`}),keywords:"LP, Liquidity provider, THORSwap, THORChain, DEFI, DEX",title:t("views.addLiquidity.title"),children:[e.jsx(rs,{onChange:z,options:(c==null?void 0:c.status)==="staged"?[M.SYMMETRICAL]:[M.ASSET,M.SYMMETRICAL,M.RUNE],poolAsset:d||R,selected:s}),e.jsx(hs,{isAssetPending:je,isRunePending:Se,liquidityType:s,onAssetAmountChange:q,onPoolChange:m,onRuneAmountChange:v,poolAsset:ie,poolAssetList:f,runeAsset:ae}),e.jsx(ys,{fee:_,poolShare:Le,poolTicker:ie.asset.ticker,rate:new w(Ce).toSignificant(6)||null,runeTicker:ae.asset.ticker,slippage:o}),Ie&&c&&e.jsx(J,{...H,poolDetail:c,shareType:ee(s)}),[M.ASSET,M.RUNE].includes(s)&&T&&e.jsx(F,{content:e.jsxs(e.Fragment,{children:[`${t("views.addLiquidity.asymmetricPoolNotice0",{depositAsset:s===M.ASSET?(d||R).ticker:S,asset:(d||R).ticker})} `,e.jsx(ss,{className:"text-twitter-blue",to:ts,children:t("common.learnMore")})]}),onClose:()=>Re(!1),title:t("views.addLiquidity.asymmetricPoolTip"),type:"warn"}),W&&e.jsx(r,{className:"w-full pt-5",children:e.jsx(N,{stretch:!0,disabled:a,error:a,loading:fe,onClick:C,rightIcon:a?e.jsx(k,{name:"infoCircle",size:20}):void 0,size:"lg",tooltip:a?t("views.liquidity.hardCapReachedTooltip"):void 0,variant:"fancy",children:t("common.approve")})}),ve&&e.jsx(r,{className:"w-full pt-5",children:e.jsx(N,{stretch:!0,disabled:!se.valid||a,error:!se.valid||a,onClick:j,rightIcon:a?e.jsx(k,{name:"infoCircle",size:20}):void 0,size:"lg",tooltip:a?t("views.liquidity.hardCapReachedTooltip"):void 0,variant:"fancy",children:D})}),!we&&e.jsx(r,{className:"w-full pt-5",children:e.jsx(N,{stretch:!0,onClick:()=>_e(!0),size:"lg",variant:"fancy",children:t("common.connectWallet")})}),e.jsx(ge,{inputAssets:L,isOpened:De,onClose:()=>Pe(!1),onConfirm:$,children:e.jsx(U,{items:I})}),d&&e.jsx(ge,{inputAssets:[d],isOpened:Te,onClose:()=>Ee(!1),onConfirm:E,children:e.jsx(U,{items:n})}),te&&e.jsx(Q,{assetAddress:u,isOpened:te,onClose:()=>Ne(!1),poolAddress:be,poolAssetValue:Me,runeAddress:qe,runeAssetValue:ke,symmetric:g})]})}});export{vs as __tla,Ae as default};
