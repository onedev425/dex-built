function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as t,aa as xe,j as e,t as r,bI as E,bJ as I,aE as q,bK as fe,z as N,aL as $,q as m,$ as _,R as T,bL as X,bA as ke,T as H,A as ge,aM as Re,D as W,s as P,aJ as Ce,am as Ae,M as Ee,a7 as Ie,aH as be,ab as Pe,bM as Le,w as Z,I as Oe,E as De,bi as Ve,p as Be,H as Ue,__tla as qe}from"./assets/index-CyIKZwcA.js";import{P as $e}from"./GQQXxAVl.js";import{V as We}from"./DA3rLf5F.js";import{u as R}from"./Dk64sxA0.js";import{B as L}from"./BuU0OJJZ.js";import{N as Ye,__tla as ze}from"./CKZW4okM.js";import{I as Y}from"./nkxDqpDa.js";import{L as we}from"./B0Nsn_Oa.js";import{C as ye,__tla as He}from"./VQNeEiYk.js";import{P as K}from"./B3Cf38Ih.js";import{L as C,P as O}from"./DKb0irD5.js";import{u as Ke,a as Je,b as Fe,A as Ge,P as Qe,__tla as Xe}from"./BDd2-1bt.js";import{u as je}from"./BlqyVemR.js";import{a as ee,b as Ze,c as es}from"./ChoHBXOg.js";import{A as ve,b as ss,c as ts}from"./nBoaRR4P.js";import{L as as}from"./CC7w5R6c.js";import{P as ns}from"./xyTk0RBf.js";import"./CkVRNEhN.js";import{__tla as is}from"./BQokClGM.js";import"./DYrZbK8R.js";import"./C2yJ0wdw.js";import"./Cm6z4UIW.js";import"./CWmyRVe8.js";import"./l25LWlPl.js";import"./DVVdR7oe.js";import"./Cm9YPx6u.js";import{__tla as ls}from"./CJ_Ik3qV.js";import"./rzhudTEk.js";import"./C20jg5MW.js";import"./B88jsabw.js";import"./BGeRo-1L.js";import"./CzdZMSiN.js";let Te,os=Promise.all([(()=>{try{return qe}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return He}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return is}catch{}})(),(()=>{try{return ls}catch{}})()]).then(async()=>{(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[n]="44faa352-2a49-4809-a6c3-27b8169a4f7c",s._sentryDebugIdIdentifier="sentry-dbid-44faa352-2a49-4809-a6c3-27b8169a4f7c")}catch{}})();const se=t.createContext({}),D=()=>{const s=t.useContext(se);if(!(s!=null&&s.signers))throw Error(r("views.multisig.incorrectTxCreateConfig"));return s},Se=({children:s})=>{const{loadBalances:n}=R(),[l,i]=t.useState([]),o=xe(({multisig:d})=>d.members),c=t.useCallback(d=>{i(x=>x.find(f=>f.pubKey===d.pubKey)?x.filter(f=>f.pubKey!==d.pubKey):[...x,d])},[]),a=t.useCallback(()=>{i(d=>d.length===o.length?[]:[...o])},[o]);t.useEffect(()=>{n()},[n]);const p=t.useMemo(()=>({signers:l,toggleSigner:c,toggleAllSigners:a}),[l,a,c]);return e.jsx(se.Provider,{value:p,children:s})},Me=(s,n,l)=>{switch(s){case L.Bond:return E(I.BOND,{address:n});case L.Unbond:{if(!l)throw new Error("Amount not provided");return E(I.UNBOND,{address:n,unbondAmount:l.getBaseValue("number")})}case L.Leave:return E(I.LEAVE,{address:n});default:return""}},Ne=()=>{const{signers:s}=D(),n=q(),{createDepositTx:l}=R();return t.useCallback(async({amount:i,nodeAddress:o,type:c})=>{if((c===L.Bond||c===L.Unbond)&&!i)throw new Error("Amount not provided");const a=Me(c,o,i),p=await l({memo:a,assetValue:c===L.Bond&&i?i:fe(N.THORChain)});p&&n($.TxMultisig,{state:{tx:p,signers:s}})},[l,s,n])},_e=t.memo(()=>{const s=Ne();return e.jsx(m,{col:!0,className:"gap-1",flex:1,children:e.jsx(Ye,{skipWalletCheck:!0,handleBondAction:s})})});var S=(s=>(s.send="send",s.bond="bond",s.deposit="deposit",s.withdraw="withdraw",s.msgDeposit="msgDeposit",s))(S||{});let te,ae,ne,ie,le,J,oe,re,ce,de,F,me,ue,he,pe;te=({poolAsset:s})=>{const{isConnected:n,isWalletAssetConnected:l}=R(),{getAssetBalance:i,getMaxBalance:o}=ee(),c=t.useMemo(()=>n&&s?i(s):s?_.fromStringSync(s.toString(),10**3):T,[n,i,s]),a=t.useMemo(()=>s?o(s):new _({value:0,decimal:8,chain:N.THORChain,symbol:"RUNE"}),[s,o]),p=t.useMemo(()=>n?i(T):_.fromChainOrSignature(N.THORChain,10**3),[i,n]),d=t.useMemo(()=>o(T),[o]);return{isWalletAssetConnected:l,poolAssetBalance:c,maxPoolAssetBalance:a,runeBalance:p,maxRuneBalance:d}},ae=s=>{const{signers:n}=D(),{wallet:l}=Ze(),i=t.useCallback(h=>X(h),[]),{liquidityType:o,setLiquidityType:c}=Ke(),{poolAsset:a,handleSelectPoolAsset:p}=Je({assetRouteGetter:i}),d=te({poolAsset:a}),x=je(),f=q(),{createDepositTx:g}=R(),u=Fe({onAddLiquidity:async({runeAmount:h,poolAsset:w})=>{if(h!=null&&h.gt(0)){const j=await g({assetValue:h,memo:E(I.DEPOSIT,{chain:w.chain,symbol:w.symbol,address:o===C.SYMMETRICAL?s:void 0})});j&&f($.TxMultisig,{state:{tx:j,signers:n}})}},skipWalletCheck:!0,liquidityType:o,setLiquidityType:c,poolAsset:a||ke,depositAssetsBalance:d,wallet:l||void 0}),b=t.useMemo(()=>{const h=[];return o===C.SYMMETRICAL&&h.push({label:`${r("views.liquidity.depositAmount")} ${u.poolAssetInput.asset.symbol}`,value:e.jsxs(m,{alignCenter:!0,justify:"between",children:[e.jsx(H,{className:"mx-2",fontWeight:"semibold",children:u.poolAssetInput.value.toSignificant(6)}),e.jsx(ge,{asset:u.poolAssetInput.asset,size:24})]})}),h.push({label:`${r("views.liquidity.depositAmount")} ${T.symbol}`,value:e.jsxs(m,{alignCenter:!0,justify:"between",children:[e.jsx(H,{className:"mx-2",fontWeight:"semibold",children:u.runeAssetInput.value.toSignificant(6)}),e.jsx(ge,{asset:T,size:24})]})}),a&&h.push({label:r("common.memo"),value:E(I.DEPOSIT,{chain:a.chain,symbol:a.symbol,address:o===C.SYMMETRICAL?s:void 0})}),h},[u.poolAssetInput.asset,u.poolAssetInput.value,u.runeAssetInput.value,s,o,a]);return{...u,handleSelectPoolAsset:p,poolAssetList:x,liquidityType:o,poolAsset:a,confirmInfo:b}},ne=()=>{const[s,n]=t.useState(""),{addLiquiditySlip:l,confirmInfo:i,feeInUSD:o,handleAddLiquidity:c,handleChangeAssetAmount:a,handleChangeRuneAmount:p,handleConfirmAdd:d,handleSelectLiquidityType:x,handleSelectPoolAsset:f,isAssetPending:g,isRunePending:u,isValidDeposit:b,liquidityType:h,poolAsset:w,poolAssetInput:j,poolAssetList:k,poolShareEst:M,runeAssetInput:y,setVisibleConfirmModal:V,visibleConfirmModal:B,rate:v}=ae(s);return e.jsxs(m,{col:!0,flex:1,children:[w&&e.jsx(we,{onChange:x,options:[C.SYMMETRICAL,C.RUNE],poolAsset:w,selected:h,tabsCount:2}),e.jsx(m,{className:"pb-1",flex:1}),h===C.SYMMETRICAL&&e.jsxs(m,{col:!0,children:[e.jsx(Re,{className:"mb-1",content:r("views.multisig.depositSymWarning"),type:"warn"}),e.jsx(K,{className:"mb-1",onChange:U=>n(U.target.value),title:r("views.multisig.assetWalletAddress"),value:s})]}),e.jsx(Ge,{isAssetPending:g,isRunePending:u,liquidityType:h,onAssetAmountChange:a,onPoolChange:f,onRuneAmountChange:p,poolAsset:j,poolAssetList:k,runeAsset:y}),e.jsx(Qe,{fee:o,poolShare:M,poolTicker:j.asset.ticker,rate:v.toFixed(6),runeTicker:y.asset.ticker,slippage:l}),e.jsx(m,{className:"w-full pt-5",children:e.jsx(W,{stretch:!0,disabled:!b.valid,error:!b.valid,onClick:c,size:"lg",variant:"fancy",children:r("views.multisig.createTransaction")})}),e.jsx(ye,{inputAssets:[],isOpened:B,onClose:()=>V(!1),onConfirm:d,children:e.jsx(Y,{items:i})})]})},ie=()=>{const{signers:s}=D(),n=q(),{getMaxBalance:l}=ee(),[i,o]=t.useState(new P({value:0,decimal:8})),[c,a]=t.useState(""),[p,d]=t.useState(!1),{data:x}=Ce([T]),f=t.useMemo(()=>{var y;return((y=x[T.ticker])==null?void 0:y.price_usd)||0*i.getValue("number")},[x,i]),g=t.useMemo(()=>l(T),[l]),u=t.useMemo(()=>({asset:T,value:i,balance:g,usdPrice:f}),[i,g,f]),b=t.useCallback(y=>o(y.gt(g.getValue("string"))?new P({value:g.getValue("string"),decimal:g.decimal}):y),[g]),h=t.useCallback(({target:{value:y}})=>{a(y)},[]),w=t.useCallback(()=>{d(!1)},[]),{createDepositTx:j}=R(),k=async()=>{const y=await j({memo:c,assetValue:_.fromChainOrSignature(N.THORChain,i.getValue("string"))});y&&n($.TxMultisig,{state:{tx:y,signers:s}})},M=t.useCallback(()=>{if(!c){Ae(r("views.multisig.memoRequired"));return}d(!0)},[c]);return{isOpenConfirmModal:p,memo:c,assetInput:u,depositAmount:i,handleChangeDepositAmount:b,handleChangeMemo:h,handleCancelConfirm:w,handleCreateTx:k,handleDeposit:M}},le=60*1e3,J=({isOpened:s,onConfirm:n,onClose:l,children:i})=>{t.useEffect(()=>{let a;return s&&(a=setTimeout(()=>{l()},le)),()=>{clearTimeout(a)}},[s,l]);const o=t.useCallback(()=>{s&&n()},[n,s]),c=t.useCallback(()=>{l&&l()},[l]);return e.jsx(Ee,{isOpened:s,onClose:c,title:r("common.confirm"),children:e.jsxs(m,{col:!0,className:"gap-y-4 md:!min-w-[350px]",children:[i&&e.jsx("div",{children:i}),e.jsx(W,{stretch:!0,onClick:o,size:"md",variant:"fancy",children:r("common.confirm")})]})})},oe=()=>{const{isOpenConfirmModal:s,memo:n,assetInput:l,depositAmount:i,handleChangeDepositAmount:o,handleChangeMemo:c,handleCancelConfirm:a,handleCreateTx:p,handleDeposit:d}=ie(),x=t.useMemo(()=>[{label:r("common.deposit"),value:`${i==null?void 0:i.toSignificant(6)} ${T.ticker}`},{label:r("common.memo"),value:n.length<30?n:Ie(n,14)}],[n,i]);return e.jsxs(m,{col:!0,className:"gap-1",flex:1,children:[e.jsx("div",{className:"relative self-stretch md:w-full",children:e.jsx(ve,{singleAsset:!0,onValueChange:o,selectedAsset:l})}),e.jsx(K,{onChange:c,title:r("views.multisig.customMemoLabel"),value:n}),e.jsx(m,{center:!0,className:"w-full pt-5",children:e.jsx(W,{stretch:!0,onClick:d,size:"lg",variant:"fancy",children:r("views.multisig.createTransaction")})}),e.jsx(J,{isOpened:s,onClose:a,onConfirm:p,children:e.jsx(Y,{items:x})})]})},re=()=>{const{signers:s}=D(),{createTransferTx:n}=R(),{assetsWithBalance:l,getMaxBalance:i}=ee(),{assetParam:o}=be(),c=q(),[a,p]=t.useState(T),[d,x]=t.useState(new P({value:0,decimal:8})),[f,g]=t.useState(""),[u,b]=t.useState(""),[h,w]=t.useState(!1),{data:j}=Ce([a]),k=t.useMemo(()=>{var A;return((A=j[a.ticker])==null?void 0:A.price_usd)||0*Number(d.getValue("string"))},[j,d,a.ticker]),M=t.useMemo(()=>i(a),[a,i]),y=t.useMemo(()=>({asset:a,value:d,balance:M,usdPrice:k}),[a,d,M,k]);t.useEffect(()=>{(async()=>{if(o){const A=await _.fromString(o);p(A||T)}else p(T)})()},[o]);const V=t.useCallback(A=>{b(""),c(X(A))},[c]),B=t.useCallback(A=>x(A.gt(M.getValue("string"))?new P({value:M.getValue("string"),decimal:M.decimal}):A),[M]),v=t.useCallback(({target:{value:A}})=>{b(A)},[]),U=t.useCallback(({target:{value:A}})=>{g(A)},[]),G=t.useCallback(()=>{w(!1)},[]),Q=async()=>{const A=await n({recipient:u,memo:f,assetValue:a.mul(0).add(d)});A&&c($.TxMultisig,{state:{tx:A,signers:s}})},z=t.useCallback(async()=>{const{validateAddress:A}=await(await Pe(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();A({chain:N.THORChain,address:u})?w(!0):Ae(r("notification.invalidchainAddy",{chain:N.THORChain}))},[u,w]);return{isOpenConfirmModal:h,setIsOpenConfirmModal:w,assetInputList:l,assetPriceInUSD:k,memo:f,recipientAddress:u,assetInput:y,sendAmount:d,handleSelectAsset:V,handleChangeSendAmount:B,handleChangeRecipient:v,handleChangeMemo:U,handleCancelConfirm:G,sendAsset:a,handleCreateTx:Q,handleSend:z}},ce=()=>{const{assetInputList:s,memo:n,recipientAddress:l,assetInput:i,sendAsset:o,sendAmount:c,handleSelectAsset:a,handleChangeSendAmount:p,handleChangeRecipient:d,handleChangeMemo:x,isOpenConfirmModal:f,handleCancelConfirm:g,handleCreateTx:u,handleSend:b}=re(),h=t.useMemo(()=>[{label:r("common.send"),value:`${c==null?void 0:c.toSignificant(6)} ${o.ticker}`},{label:r("common.recipient"),value:l}],[l,c,o.ticker]);return e.jsxs(m,{col:!0,className:"gap-1",flex:1,children:[e.jsx("div",{className:"relative self-stretch md:w-full",children:e.jsx(ve,{assets:s,onAssetChange:a,onValueChange:p,selectedAsset:i})}),e.jsx(K,{onChange:d,placeholder:`${i.asset.isSynthetic?T.chain:i.asset.chain} ${r("common.address")}`,title:r("common.recipientAddress"),value:l}),e.jsx(K,{collapsible:!0,onChange:x,title:r("common.memo"),value:n}),e.jsx(m,{center:!0,className:"w-full pt-5",children:e.jsx(W,{stretch:!0,onClick:b,size:"lg",variant:"fancy",children:r("views.multisig.createTransaction")})}),e.jsx(J,{isOpened:f,onClose:g,onConfirm:u,children:e.jsx(Y,{items:h})})]})},de=({onChange:s,selected:n})=>{const l=t.useMemo(()=>[{label:r("views.multisig.send"),value:S.send},{label:r("views.multisig.nodeActions"),value:S.bond},{label:r("views.multisig.deposit"),value:S.deposit},{label:r("views.multisig.withdraw"),value:S.withdraw},{label:r("views.multisig.customDeposit"),value:S.msgDeposit}],[]);return e.jsx(Le,{stretch:!0,buttonClassName:"shadow-none",menuItems:l,onChange:i=>s(i),value:n||l[0]})},F=[O.SYM,O.RUNE_ASYM],me=()=>{const{createDepositTx:s}=R(),{signers:n}=D(),l=q(),i=je(),[o,c]=t.useState(_.from({chain:N.Bitcoin})),[a,p]=t.useState(F[0]),d=t.useMemo(()=>{switch(a){case O.RUNE_ASYM:return C.RUNE;default:return C.SYMMETRICAL}},[a]),[x,f]=t.useState(d),[g,u]=t.useState(0),{assetParam:b=_.from({chain:N.Bitcoin}).toString()}=be(),h=t.useMemo(()=>a===O.RUNE_ASYM?[C.RUNE]:[C.SYMMETRICAL,C.RUNE],[a]),w=t.useMemo(()=>x===C.ASSET?o:_.from({chain:N.THORChain}),[x,o]),j=g>0;t.useEffect(()=>{(async()=>{if(!b)return;const v=await _.fromString(b);if(v){if(v.eqAsset(T))return;c(v)}})()},[b]);const k=t.useCallback(v=>{l(X(v))},[l]),[M,y]=t.useState(!1),V=t.useCallback(v=>{p(v),v===O.RUNE_ASYM?f(C.RUNE):f(C.SYMMETRICAL)},[]),B=t.useCallback(v=>{u(Number(v.toSignificant(2)))},[]);return{poolAssetList:i,poolAsset:o,handleSelectPoolAsset:k,setVisibleConfirmModal:y,visibleConfirmModal:M,handleConfirmWithdraw:async()=>{if(!j)return;const{chain:v,symbol:U,ticker:G}=a===O.RUNE_ASYM||x===C.RUNE?o:_.from({chain:N.THORChain}),Q=E(I.WITHDRAW,{chain:v,symbol:U,ticker:G,basisPoints:new P({value:g,decimal:2}).mul(100).getValue("number")}),z=await s({memo:Q,assetValue:fe(N.THORChain)});z&&l($.TxMultisig,{state:{tx:z,signers:n}})},percent:g,setPercent:u,withdrawType:x,withdrawOptions:h,setWithdrawType:f,handleSetLPType:V,lpType:a,handleChangePercent:B,sendAsset:w,isValid:j,shareTypes:F}},ue=()=>{const{poolAsset:s,handleSelectPoolAsset:n,poolAssetList:l,setVisibleConfirmModal:i,visibleConfirmModal:o,handleConfirmWithdraw:c,withdrawType:a,withdrawOptions:p,setWithdrawType:d,lpType:x,shareTypes:f,handleSetLPType:g,percent:u,handleChangePercent:b,sendAsset:h,isValid:w}=me(),j=t.useMemo(()=>[{label:`${r("common.withdrawPercent")}:`,value:`${u}%`}],[u]);return e.jsxs(m,{col:!0,className:"gap-1",flex:1,children:[e.jsx(we,{onChange:d,options:p,poolAsset:s,selected:a,tabsCount:2,title:`${r("views.liquidity.withdraw")}:`}),e.jsx(as,{onChange:g,options:f,poolAsset:s,selected:x,tabsCount:2,title:`${r("views.liquidity.from")}:`}),e.jsxs("div",{className:"relative self-stretch md:w-full",children:[e.jsx("div",{className:Z("absolute flex items-center justify-center top-1/2 rounded-3xl left-6 -translate-y-1/2 w-[52px] h-[52px]","border-10 border-solid bg-blue dark:border-dark-border-primary border-light-border-primary"),children:e.jsx(Oe,{color:"white",name:"arrowDown",size:20})}),e.jsx(ns,{onChange:b,percent:new P(u),title:r("common.withdrawPercent")}),e.jsxs(De,{className:"min-h-[107px] p-4 flex-col md:flex-row items-end md:items-center gap-2",children:[e.jsx(m,{children:e.jsx(H,{className:"whitespace-nowrap",children:`${r("common.receive")}:`})}),e.jsxs(m,{className:"gap-2 py-1 flex-1 self-stretch md:self-center",children:[e.jsx(m,{alignCenter:!0,className:Z("overflow-hidden transition-all origin-left",{"scale-x-0":a===C.RUNE}),flex:a===C.RUNE?0:1,children:e.jsx(ss,{showAssetType:!0,assets:l,className:"m-2 md:m-0 flex-1",onSelect:n,selected:s})}),e.jsx(m,{className:Z("overflow-hidden transition-all origin-right",{"scale-x-0":a===C.ASSET}),flex:a===C.ASSET?0:1,children:e.jsx(ts,{showAssetType:!0,className:"pr-3 m-2 md:m-0 flex-1",selected:T})})]})]})]}),e.jsx(m,{className:"w-full pt-4",children:e.jsx(Y,{horizontalInset:!0,items:j})}),e.jsx(m,{className:"self-stretch gap-4 pt-5",children:e.jsx(W,{stretch:!0,disabled:!w,error:!w,onClick:()=>i(!0),size:"lg",variant:"fancy",children:r("views.multisig.createTransaction")})}),e.jsx(ye,{inputAssets:[h],isOpened:o,onClose:()=>i(!1),onConfirm:c,children:e.jsx(Y,{items:j})})]})},he=()=>{const[s,n]=t.useState(S.send);return e.jsxs(m,{col:!0,className:"w-full gap-1 self-stretch",flex:1,children:[e.jsxs(m,{center:!0,className:"self-stretch mx-2 mb-2",flex:1,children:[e.jsx(m,{flex:1,children:e.jsx(H,{variant:"secondary",children:`${r("views.multisig.txType")}:`})}),e.jsx(m,{className:"z-20",flex:1,children:e.jsx(de,{onChange:n,selected:s})})]}),e.jsx(Ve,{className:"!px-2.5 !py-3",children:e.jsxs(m,{flex:1,children:[s===S.send&&e.jsx(ce,{}),s===S.bond&&e.jsx(_e,{}),s===S.deposit&&e.jsx(ne,{}),s===S.withdraw&&e.jsx(ue,{}),s===S.msgDeposit&&e.jsx(oe,{})]})})]})},pe=()=>{const{loadBalances:s}=R(),n=xe(({multisig:l})=>!!l.loadingBalances);return e.jsx(Be,{className:"h-fit",content:r("common.refresh"),children:e.jsx(Ue,{iconName:"refresh",onClick:s,size:19,spin:n})})},Te=()=>(es(),e.jsx(Se,{children:e.jsx($e,{header:e.jsxs(m,{className:"w-full justify-between align-center",children:[e.jsx(We,{withBack:!0,title:r("views.multisig.createTransaction")}),e.jsx(m,{className:"px-6",children:e.jsx(pe,{})})]}),title:r("views.multisig.createTransaction"),children:e.jsx(m,{col:!0,className:"self-stretch",flex:1,children:e.jsx(he,{})})})}))});export{os as __tla,Te as default};
