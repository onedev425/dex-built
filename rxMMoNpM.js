function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["CRWIkueS.js","assets/index-CyIKZwcA.js","assets/index-C3LuW5Z2.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{b8 as He,j as e,q as h,cx as F,T as w,l as le,bM as ze,r as t,bj as P,t as s,b7 as Ie,E as ie,G as oe,H as ce,p as H,a7 as Q,bt as Le,bE as Me,ad as De,D as V,I as W,A as Be,R as z,cy as Y,z as A,ap as Fe,cf as Pe,ak as de,am as K,cg as he,aq as Ve,ar as We,ao as me,ab as Z,$ as Ye,at as Ke,av as Ue,ag as qe,a9 as Ge,aG as Xe,br as ee,bc as R,__tla as Je}from"./assets/index-CyIKZwcA.js";import{F as Qe}from"./C7jX1ZPo.js";import{I as ue}from"./nkxDqpDa.js";import{C as pe,__tla as Ze}from"./VQNeEiYk.js";import{P as ea}from"./GQQXxAVl.js";import{V as aa}from"./DA3rLf5F.js";import{d as xe,i as ge}from"./Cm9YPx6u.js";import{T as sa}from"./DYrZbK8R.js";import{u as ra}from"./BDlMcymV.js";import"./Cm6z4UIW.js";let be,ta=Promise.all([(()=>{try{return Je}catch{}})(),(()=>{try{return Ze}catch{}})()]).then(async()=>{(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[r]="35e52681-428e-4caf-a1a3-7199b2d2307f",a._sentryDebugIdIdentifier="sentry-dbid-35e52681-428e-4caf-a1a3-7199b2d2307f")}catch{}})();const ye=He.filter(a=>!sa.includes(a)).map(a=>({value:a,Component:e.jsxs(h,{alignCenter:!0,className:"gap-x-2",children:[e.jsx(F,{withoutBackground:!0,chain:a,size:24}),e.jsx(w,{children:le(a,!0)})]})})),ve=({chain:a,onChange:r})=>e.jsx(ze,{buttonClassName:"!w-[120px]",className:"!w-[120px] mr-2",menuItems:ye,onChange:r,openComponent:e.jsxs(h,{alignCenter:!0,className:"gap-x-2",children:[e.jsx(F,{withoutBackground:!0,chain:a,size:24}),e.jsx(w,{children:le(a)})]}),value:a}),je=t.memo(({editThorname:a})=>{const r=ra(),{data:l}=P();return r!=null&&r.length?e.jsxs(h,{col:!0,className:"pt-8 w-full",children:[e.jsx(w,{className:"pb-4",textStyle:"h5",children:s("views.thorname.myThornames")}),e.jsx(Ie,{secondary:!0,maxHeight:"60vh",scrollClassName:"!mr-2",children:r.map(({thorname:u,expire:d,entries:p=[],owner:m})=>{var i;return e.jsx(ie,{className:"!p-0 m-2",children:e.jsx(oe,{className:"!py-1",shadow:!1,title:e.jsxs(h,{alignCenter:!0,row:!0,className:"gap-2",flex:1,justify:"between",children:[e.jsx(w,{children:u}),e.jsx(ce,{iconName:"edit",onClick:()=>a(u),size:16})]}),children:e.jsx(ue,{items:[{label:s("views.thorname.expire"),value:e.jsxs(h,{center:!0,className:"gap-x-2",children:[e.jsx(H,{content:s("views.thorname.expirationNote",{block:d}),iconName:"infoCircle"}),e.jsx(w,{children:xe({expire:d||"0",lastThorchainBlock:(i=l==null?void 0:l[0])==null?void 0:i.thorchain})})]})},{label:s("views.thorname.owner"),value:m},...p.map(({address:n,chain:f})=>({label:e.jsx(F,{withoutBackground:!0,chain:f,size:24}),value:Q(n,15)}))]})})},`${u}-${m}-${d}`)})})]}):null}),we=a=>({handleCopyValue:t.useCallback(()=>{Le(a),Me(s("common.copied"))},[a])}),fe=({type:a="icon",value:r})=>{const{handleCopyValue:l}=we(r);return a==="icon"?e.jsx(ce,{iconName:"copy",onClick:l,size:16,tooltip:s("common.copy")}):e.jsx(H,{content:s("common.copy"),children:e.jsx(h,{onClick:l,children:e.jsx(w,{className:De,fontWeight:"semibold",textStyle:"caption",children:r})})})},Ce=({thorname:a,details:r,available:l,years:u,setYears:d,thorAddress:p})=>{const{data:m}=P(),i=!r||l,n=t.useMemo(()=>[!r&&{label:s("components.sidebar.thorname"),value:e.jsxs("div",{className:"flex",children:[a," ",e.jsx(fe,{type:"icon",value:a})]})},{label:s("views.thorname.status"),value:e.jsx(w,{variant:i?"green":"red",children:s(`views.thorname.${i?(r==null?void 0:r.owner)===p?"ownedByYou":"available":"unavailable"}`)})},...i?[{label:r?s("views.thorname.extend"):s("views.thorname.duration"),value:e.jsxs(h,{alignCenter:!0,className:"gap-x-2",justify:"between",children:[e.jsx(V,{className:"px-1.5 group",leftIcon:e.jsx(W,{className:"group-hover:!text-light-typo-primary dark:group-hover:!text-dark-typo-primary",color:"secondary",name:"minusCircle"}),onClick:()=>d(u-1),variant:"borderlessTint"}),e.jsx(h,{center:!0,className:"w-3",children:e.jsx(w,{children:u})}),e.jsx(V,{className:"px-1.5 group",leftIcon:e.jsx(W,{className:"group-hover:!text-light-typo-primary dark:group-hover:!text-dark-typo-primary",color:"secondary",name:"plusCircle"}),onClick:()=>d(u+1),variant:"borderlessTint"})]})},{label:r?s("views.thorname.updateFee"):s("views.thorname.registrationFee"),value:e.jsxs(h,{center:!0,className:"gap-x-2",children:[e.jsx(Be,{asset:z,size:"tiny"}),e.jsxs(w,{children:[r?u:Y(u)," $RUNE"]})]})}]:[]],[r,i,d,a,u]),f=t.useMemo(()=>{var C;return r?[{label:s("views.thorname.expire"),value:e.jsxs(h,{center:!0,className:"gap-x-2",children:[e.jsx(H,{content:s("views.thorname.expirationNote",{block:r.expire}),iconName:"infoCircle"}),e.jsx(w,{children:xe({expire:r.expire,lastThorchainBlock:(C=m==null?void 0:m[0])==null?void 0:C.thorchain})})]})},{label:s("views.thorname.owner"),value:e.jsx(w,{className:"!text-xs",children:r.owner})}]:[]},[r,m]),g=t.useMemo(()=>{var C;return[...n,...f,...(C=r==null?void 0:r.entries)!=null&&C.length?r.entries.map(({address:k,chain:N})=>({key:N,label:e.jsx(H,{content:`${a}.${N.toLowerCase()}`,children:e.jsx(F,{withoutBackground:!0,chain:N,size:24})}),value:e.jsx(w,{className:"!text-xs",children:k})})):[]].filter(Boolean)},[n,r,f,a]);return{ownerColumns:f,data:r||l?g:[]}};function Ne(a){const r=t.useRef();return t.useEffect(()=>{r.current=a}),r.current}let U,ae,se,re;U={available:!1,chain:A.THORChain,details:null,loading:!1,searchedThorname:"",currentThorname:"",years:1},ae=(a,{type:r,payload:l})=>{switch(r){case"setLoading":return{...a,loading:l};case"setChain":return{...a,chain:l};case"setAvailable":return{...a,loading:!1,available:l};case"setSearchedThorname":{const u=l.length>=1;return{...u?a:U,searchedThorname:u?he(l)?l.toLowerCase():a.searchedThorname:""}}case"setCurrentThorname":return{...a,currentThorname:l};case"setDetails":return{...a,details:l.details,available:l.available,loading:!1,years:l.details?0:1};case"setYears":return{...a,years:Math.min(Math.max(a.details?0:1,l),99)};default:return a}},se=a=>{const r=Fe(),l=Ne(a),[{available:u,chain:d,details:p,loading:m,searchedThorname:i,currentThorname:n,years:f},g]=t.useReducer(ae,U),[C]=Pe(),{data:k}=P(),N=t.useCallback(y=>{g({type:"setChain",payload:y})},[]),E=t.useCallback(y=>{g({type:"setSearchedThorname",payload:y})},[]),q=t.useCallback(y=>{g({type:"setCurrentThorname",payload:y})},[]),b=t.useCallback(y=>{g({type:"setYears",payload:y})},[]),x=t.useCallback(async y=>{var j;const{data:o}=await C(y||i),v=Array.isArray(o)||!o||typeof o=="boolean"?{details:null,available:!0}:{details:o,available:a?o.owner===a:ge({expire:o.expire,lastThorchainBlock:(j=k==null?void 0:k[0])==null?void 0:j.thorchain})};g({type:"setDetails",payload:v})},[C,a,i,k]),T=t.useCallback(y=>{var o;try{return g({type:"setLoading",payload:!0}),x(y),!0}catch(v){de(v.toString());const j=((o=v==null?void 0:v.response)==null?void 0:o.status)===404;return g({type:"setAvailable",payload:j}),j||K(s("common.defaultErrMsg"),void 0,void 0,v),!1}},[x]),_=t.useCallback(async(y,o)=>{if(!he(i))return K(s("notification.invalidTHORName"));const v=!!o,j=(p==null?void 0:p.owner)!==a;g({type:"setLoading",payload:!0});const I=j?Y(f):f;let L=`${j?s("txManager.registerThorname"):s("txManager.updateThorname")} ${i} - ${I} ${z.ticker}`;p!=null&&p.owner&&v&&(L=`${s("common.transfer")} ${i} - ${Q(o,6,8)}`);const S=Ve();r(We({id:S,inChain:A.THORChain,type:v?me.TC_TNS_UPDATE:me.TC_TNS_CREATE,label:L}));const G=v?{address:o,owner:o||a,name:i,chain:A.THORChain}:{address:y,owner:a,name:i,chain:d},{thorchain:O}=await(await Z(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();try{if(!O)throw new Error("THORChain Provider not found");const $=await O.registerThorname({...G,assetValue:Ye.fromChainOrSignature(A.THORChain,I)});$&&r(Ke({id:S,txid:$}))}catch($){de($),r(Ue({id:S,status:"error"})),K(s("notification.submitFail"),void 0,void 0,$)}finally{g({type:"setLoading",payload:!1}),setTimeout(x,5e3)}},[i,p==null?void 0:p.owner,a,f,r,d,x]);return t.useEffect(()=>{i&&a!==l&&T()},[a]),{available:u,chain:d,details:p,loading:m,searchedThorname:i,currentThorname:n,years:f,lookupForTNS:T,registerThornameAddress:_,setChain:N,setSearchedThorname:E,setCurrentThorname:q,setYears:b}},re=()=>{const{setIsConnectModalOpen:a}=qe(),{isWalletLoading:r,getWalletAddress:l}=Ge(),{signingRequired:u}=Xe(),d=l(A.THORChain),{data:p}=P(),{available:m,chain:i,details:n,loading:f,registerThornameAddress:g,lookupForTNS:C,setChain:k,setSearchedThorname:N,setCurrentThorname:E,setYears:q,currentThorname:b,searchedThorname:x,years:T}=se(d),[_,y]=t.useState(!1),[o,v]=t.useState(null),[j,I]=t.useState(""),[L,S]=t.useState(!1),[G,O]=t.useState(!1),[$,X]=t.useState(0),M=l(i),Te=t.useMemo(()=>u([z]),[u]),{data:ke}=Ce({years:T,setYears:q,thorname:x,details:n,available:m,thorAddress:d}),D=t.useMemo(()=>{var c;return n&&n.owner!==d&&!ge({expire:n.expire,lastThorchainBlock:(c=p==null?void 0:p[0])==null?void 0:c.thorchain})},[n,d]),J=t.useMemo(()=>(b.length===0||D||!!o&&!_)&&(b===x||b.length===0),[o,b,x,D,_]),te=t.useMemo(()=>{var c;return(c=n==null?void 0:n.entries)!=null&&c.length?n.entries.map(Oe=>Oe.chain):[]},[n]),B=t.useCallback(()=>{if(!J){if(N(b),!(n||m)||b!==x)return X(1),C(b);d&&o&&_?g(o):a(!0)}},[J,N,b,x,n,m,X,C,d,o,_,g,a]),ne=t.useCallback(()=>{B()},[B]),_e=t.useCallback(c=>{c.key==="Enter"&&B()},[B]),Re=t.useCallback(c=>k(c),[k]),Se=t.useCallback(c=>{E(c),N(c),C(c)},[C,N,E]),$e=t.useMemo(()=>b.toLowerCase()!==x&&x!==""?s("common.refresh"):D?s("views.thorname.unavailableForPurchase"):m?d?te.length>0?s("common.update"):s("views.thorname.purchase"):s("common.connectWallet"):s("views.wallet.search"),[D,m,d,te.length,b,x]),Ae=t.useCallback(async()=>{const{validateAddress:c}=await(await Z(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2]))).getSwapKitClient();if(!c({chain:A.THORChain,address:j||""}))return K(s("views.thorname.invalidTransferAddress"),s("views.thorname.inputValidThorAddress"));O(!0)},[j]);t.useEffect(()=>{M?v(M):M===void 0&&v("")},[M,i]),t.useEffect(()=>{o&&Z(()=>import("./CRWIkueS.js"),__vite__mapDeps([0,1,2])).then(({getSwapKitClient:c})=>c()).then(({validateAddress:c})=>y(!!c({chain:i,address:o})))},[o,i]);const Ee=()=>{N(""),E(""),X(0)};return e.jsxs(ea,{description:s("views.thorname.description"),header:e.jsxs(h,{col:!0,children:[e.jsx(aa,{title:s("components.sidebar.thorname")}),e.jsxs(h,{className:"px-2.5 pt-1",justify:"between",children:[e.jsx(w,{fontWeight:"medium",textStyle:"caption",variant:"secondary",children:s("views.thorname.thornameSubtitle")}),e.jsx(H,{content:s("views.thorname.thornameInfo"),place:"bottom",children:e.jsx(W,{color:"primaryBtn",name:"infoCircle",size:24})})]})]}),keywords:"THORName, THORSwap, THORChain, DEFI, DEX",title:s("views.thorname.title"),children:[e.jsx(ee,{autoFocus:!0,stretch:!0,border:"rounded",className:"!text-md p-1.5 flex-1 border",containerClassName:"bg-light-gray-light dark:bg-dark-gray-light !bg-opacity-80",onChange:c=>E(c.target.value),onKeyDown:_e,placeholder:s("views.thorname.checkNameAvailability"),suffix:b&&e.jsx(W,{color:"secondary",name:"close",onClick:Ee}),value:b}),m&&n&&e.jsx(ie,{className:"!mt-2 !p-0 w-full",children:e.jsx(oe,{className:"!py-1",shadow:!1,title:e.jsxs(h,{className:"flex justify-between w-full",children:[e.jsx(w,{fontWeight:"medium",variant:"secondary",children:s("components.sidebar.thorname")}),e.jsx(w,{className:"text-right",fontWeight:"semibold",variant:"primary",children:x})]}),children:e.jsxs(h,{col:!0,className:"gap-4",children:[e.jsxs(h,{col:!0,children:[e.jsx(Qe,{label:s("views.thorname.transferTHORName")}),e.jsx(h,{row:!0,className:"w-full gap-x-4",children:e.jsx(ee,{autoFocus:!0,stretch:!0,border:"rounded",className:"!text-md !p-1.5 border pt-5",containerClassName:"bg-light-gray-light dark:bg-dark-gray-light !bg-opacity-80",onChange:({target:c})=>I(c.value),placeholder:`${A.THORChain} ${s("common.address")}`,value:j||""})})]}),e.jsx(V,{stretch:!0,disabled:!j,error:!!n&&m&&!_,loading:r||f,onClick:Ae,size:"sm",variant:"secondary",children:s("common.transfer")})]})})}),e.jsx(ue,{horizontalInset:!0,items:ke,size:"lg"}),m&&(n==null?void 0:n.owner)===d&&e.jsxs(h,{row:!0,className:"w-full pt-4",children:[e.jsx(ve,{chain:i,onChange:Re}),e.jsx(ee,{autoFocus:!0,stretch:!0,border:"rounded",className:"!text-xs !p-1.5 border",containerClassName:"bg-light-gray-light dark:bg-dark-gray-light !bg-opacity-80",onChange:({target:c})=>v(c.value),placeholder:`${i} ${s("common.address")}`,value:o||""})]}),e.jsx(h,{className:"w-full pt-6",children:e.jsx(V,{stretch:!0,disabled:J,error:!!n&&m&&!_,loading:r||f,onClick:()=>{$===1&&d&&Te&&x===b?S(!0):ne()},size:"lg",variant:"fancy",children:$e})}),!n&&e.jsx(je,{editThorname:Se}),e.jsx(pe,{inputAssets:[z],isOpened:L,onClose:()=>S(!1),onConfirm:()=>{ne(),S(!1)},children:n?e.jsxs(h,{col:!0,children:[e.jsx(R,{label:"THORName",value:x}),e.jsx(R,{capitalizeLabel:!0,label:s("view.thorname.cost"),value:`${Y(Math.max(0,T-10))} RUNE`}),T>0&&e.jsx(R,{capitalizeLabel:!0,label:s("view.thorname.duration"),value:`${T} ${T>1?s("view.thorname.years"):s("view.thorname.year")}`})]}):e.jsxs(h,{col:!0,children:[e.jsx(R,{label:"THORName",value:x}),e.jsx(R,{capitalizeLabel:!0,label:s("view.thorname.cost"),value:`${Y(T)} RUNE`}),e.jsx(R,{capitalizeLabel:!0,label:s("view.thorname.duration"),value:`${T} ${T>1?s("view.thorname.years"):s("view.thorname.year")}`})]})}),e.jsx(pe,{inputAssets:[z],isOpened:G,onClose:()=>O(!1),onConfirm:()=>{g(o||"",j),O(!1)},children:e.jsxs(h,{col:!0,children:[e.jsx(R,{label:"THORName",value:x}),e.jsx(R,{capitalizeLabel:!0,label:s("common.transferAddress"),value:Q(j,6,8)})]})})]})},be=re});export{ta as __tla,be as default};
